<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم المعرض</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/admin.css">
</head>
<body class="admin-shell">
    <section id="adminLoginCard" class="admin-card">
        <div class="admin-header">
            <div>
                <p class="eyebrow">دخول الأدمن</p>
                <h1>تسجيل الدخول</h1>
                <p>الدخول للبريد المصرّح فقط.</p>
            </div>
        </div>
        <form id="adminLoginForm" class="admin-form" autocomplete="off">
            <label>
                <span>البريد الإلكتروني</span>
                <input type="email" id="adminEmail" required placeholder="btecmaad@gmail.com" autocomplete="off">
            </label>
            <label>
                <span>كلمة المرور</span>
                <input type="password" id="adminPassword" required placeholder="••••••••" autocomplete="new-password">
            </label>
            <div class="admin-actions">
                <button type="submit"><i class="fa-solid fa-door-open"></i> تسجيل الدخول</button>
                <div id="adminStatus" class="status"></div>
            </div>
        </form>
    </section>

    <section id="adminPanelCard" class="admin-card admin-card--panel" style="display:none;">
        <div class="admin-header">
            <div>
                <p class="eyebrow">لوحة تحكم المعرض</p>
                <h1>نشر وحذف منشورات المعرض</h1>
                <p>يُسمح فقط للبريد المصرّح به، سيتم الخروج تلقائياً لغير الأدمن.</p>
            </div>
            <button id="adminLogout" class="danger"><i class="fa-solid fa-right-from-bracket"></i> تسجيل الخروج</button>
        </div>

        <div class="admin-tabs">
            <button id="adminTabGallery" class="active"><i class="fa-solid fa-layer-group"></i> إدارة المعرض</button>
            <button id="adminTabVideos"><i class="fa-solid fa-circle-play"></i> إدارة الفيديوهات</button>
        </div>

        <div id="gallerySection" class="panel-section">
            <div class="admin-grid">
                <div class="admin-form card-block">
                    <div class="block-title">
                        <h2><i class="fa-solid fa-pen-to-square"></i> إنشاء منشور جديد</h2>
                        <p>كل الصور التي تختارها هنا تنزل في منشور واحد مع أوصافها ضمن معرض مستقل.</p>
                    </div>
                    <label>
                        <span>عنوان المعرض / الموضوع</span>
                        <input type="text" id="postGroupTitle" placeholder="مثال: تكريم RoboChamps">
                    </label>
                    <label>
                        <span>وصف قصير للمعرض</span>
                        <textarea id="postGroupIntro" rows="2" placeholder="اكتب وصفاً قصيراً للمعرض"></textarea>
                    </label>
                    <label>
                        <span>عنوان رئيسي للمعرض (يظهر في الصفحة)</span>
                        <input type="text" id="galleryHeading" placeholder="معرض الإنجازات">
                    </label>
                    <label>
                        <span>وصف رئيسي تحت العنوان</span>
                        <textarea id="galleryIntro" rows="3" placeholder="اكتب الوصف الذي تريده للمعرض"></textarea>
                    </label>
                    <button type="button" id="saveHeroBtn"><i class="fa-solid fa-floppy-disk"></i> حفظ العنوان/الوصف</button>
                    <hr>
                    <label>
                        <span>عنوان المنشور</span>
                        <input type="text" id="postTitle" placeholder="مثال: تكريم فريق RoboChamps">
                    </label>
                    <label>
                        <span>الصور (اختيار أكثر من صورة يعني منشور واحد يحتويها كلها)</span>
                        <input type="file" id="postImage" accept="image/*" multiple>
                    </label>
                    <div id="selectedImages" class="image-list"></div>
                    <div class="admin-actions">
                        <button type="button" id="addPostBtn"><i class="fa-solid fa-cloud-arrow-up"></i> إضافة منشور</button>
                        <div id="adminStatus" class="status"></div>
                    </div>
                </div>

                <div class="card-block posts-wrap">
                    <div class="block-title">
                        <h2><i class="fa-solid fa-layer-group"></i> المنشورات الحالية</h2>
                        <p>لكل منشور زر تعديل/حذف يظهر للأدمن فقط.</p>
                    </div>
                    <div class="posts-list" id="adminPosts"></div>
                </div>
            </div>

            <div class="card-block">
                <div class="block-title">
                    <h2><i class="fa-solid fa-clone"></i> ١١ بطاقة جاهزة (مثل بطاقات الروبوت)</h2>
                    <p>كل بطاقة ثابتة بنفس المقاس: صورة + عنوان + وصف. عند الحفظ تُنشر كبطاقات جديدة في المعرض.</p>
                </div>
                <div class="dual-inputs">
                    <label>
                        <span>عنوان المعرض/الموضوع الجديد</span>
                        <input type="text" id="slotGroupTitle" placeholder="مثال: إنجازات RoboChamps">
                    </label>
                    <label>
                        <span>وصف قصير للمعرض</span>
                        <input type="text" id="slotGroupIntro" placeholder="شرح أو وصف لهذا المعرض">
                    </label>
                </div>
                <div class="slot-grid" id="slotGrid">
                    <!-- يتم توليد الحقول من السكربت -->
                </div>
                <div class="admin-actions">
                    <button type="button" id="saveSlotsBtn"><i class="fa-solid fa-floppy-disk"></i> نشر البطاقات</button>
                    <div id="slotsStatus" class="status"></div>
                </div>
            </div>
        </div>

        <div id="videosSection" class="panel-section" style="display:none;">
            <div class="card-block admin-form video-form">
                <div class="block-title">
                    <h2><i class="fa-solid fa-circle-plus"></i> إضافة فيديو توعوي</h2>
                    <p>يمكنك لصق رابط MP4/YouTube جاهز أو رفع ملف فيديو، مع صورة مصغرة اختيارية.</p>
                </div>
                <label>
                    <span>عنوان الفيديو</span>
                    <input type="text" id="videoTitle" placeholder="مثال: لماذا تختار BTEC؟">
                </label>
                <label>
                    <span>وصف قصير</span>
                    <textarea id="videoDesc" rows="2" placeholder="اكتب وصفاً مختصراً يظهر أسفل العنوان"></textarea>
                </label>
                <div class="dual-inputs">
                    <label>
                        <span>رابط فيديو جاهز (MP4 أو YouTube)</span>
                        <input type="text" id="videoUrl" placeholder="https://... أو رابط يوتيوب">
                    </label>
                    <label>
                        <span>أو رفع ملف فيديو</span>
                        <input type="file" id="videoFile" accept="video/*">
                    </label>
                </div>
                <label>
                    <span>صورة مصغرة (اختياري)</span>
                    <input type="file" id="videoThumb" accept="image/*">
                </label>
                <div class="admin-actions">
                    <button type="button" id="addVideoBtn"><i class="fa-solid fa-cloud-arrow-up"></i> نشر الفيديو</button>
                    <div id="videoStatus" class="status"></div>
                </div>
            </div>

            <div class="card-block">
                <div class="block-title">
                    <h2><i class="fa-solid fa-list"></i> الفيديوهات الحالية</h2>
                    <p>تعديل/حذف يظهر للأدمن فقط.</p>
                </div>
                <div class="posts-list" id="adminVideos"></div>
            </div>
        </div>
    </section>

    <script type="module" src="assets/js/admin.js"></script>
</body>
</html>
