(()=>{var a_=Object.defineProperty,c_=Object.defineProperties;var u_=Object.getOwnPropertyDescriptors;var ts=Object.getOwnPropertySymbols,l_=Object.getPrototypeOf,cd=Object.prototype.hasOwnProperty,ud=Object.prototype.propertyIsEnumerable,h_=Reflect.get;var ad=(n,e,t)=>e in n?a_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,G=(n,e)=>{for(var t in e||(e={}))cd.call(e,t)&&ad(n,t,e[t]);if(ts)for(var t of ts(e))ud.call(e,t)&&ad(n,t,e[t]);return n},Ee=(n,e)=>c_(n,u_(e));var ns=(n,e)=>{var t={};for(var r in n)cd.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&ts)for(var r of ts(n))e.indexOf(r)<0&&ud.call(n,r)&&(t[r]=n[r]);return t};var Vt=(n,e,t)=>h_(l_(n),t,e);var g=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{c(t.next(l))}catch(d){i(d)}},a=l=>{try{c(t.throw(l))}catch(d){i(d)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,a);c((t=t.apply(n,e)).next())});var ld=()=>{};var fd=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},d_=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},pd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,f=s>>2,m=(s&3)<<4|c>>4,I=(c&15)<<2|d>>6,R=d&63;l||(R=64,a||(I=64)),r.push(t[f],t[m],t[I],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fd(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):d_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||m==null)throw new Pa;let I=s<<2|c>>4;if(r.push(I),d!==64){let R=c<<4&240|d>>2;if(r.push(R),m!==64){let N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Pa=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},f_=function(n){let e=fd(n);return pd.encodeByteArray(e,!0)},xr=function(n){return f_(n).replace(/\./g,"")},is=function(n){try{return pd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function md(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}var p_=()=>md().__FIREBASE_DEFAULTS__,m_=()=>{if(typeof process=="undefined"||typeof process.env=="undefined")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},g_=()=>{if(typeof document=="undefined")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}let e=n&&is(n[1]);return e&&JSON.parse(e)},ss=()=>{try{return ld()||p_()||m_()||g_()}catch(n){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(n));return}},ka=n=>{var e,t;return(t=(e=ss())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},os=n=>{let e=ka(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Na=()=>{var n;return(n=ss())==null?void 0:n.config},Da=n=>{var e;return(e=ss())==null?void 0:e["_".concat(n)]};var rs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function He(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch(e){return!1}}function Dn(n){return g(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function as(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=G({iss:"https://securetoken.google.com/".concat(r),aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xr(JSON.stringify(t)),xr(JSON.stringify(a)),""].join(".")}var Or={};function __(){let n={prod:[],emulator:[]};for(let e of Object.keys(Or))Or[e]?n.emulator.push(e):n.prod.push(e);return n}function y_(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var hd=!1;function On(n,e){if(typeof window=="undefined"||typeof document=="undefined"||!He(window.location.host)||Or[n]===e||Or[n]||hd)return;Or[n]=e;function t(I){return"__firebase__banner__".concat(I)}let r="__firebase__banner",s=__().prod.length>0;function a(){let I=document.getElementById(r);I&&I.remove()}function c(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function l(I,R){I.setAttribute("width","24"),I.setAttribute("id",R),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function d(){let I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{hd=!0,a()},I}function f(I,R){I.setAttribute("id",R),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function m(){let I=y_(r),R=t("text"),N=document.getElementById(R)||document.createElement("span"),O=t("learnmore"),C=document.getElementById(O)||document.createElement("a"),U=t("preprendIcon"),$=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){let z=I.element;c(z),f(C,O);let W=d();l($,U),z.append($,N,C,W),document.body.appendChild(z)}s?(N.innerText="Preview backend disconnected.",$.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):($.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',N.innerText="Preview backend running in this workspace."),N.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function _e(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gd(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function I_(){var e;let n=(e=ss())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(t){return!1}}function _d(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function yd(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Id(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wd(){let n=_e();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ed(){return!I_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oa(){try{return typeof indexedDB=="object"}catch(n){return!1}}function Td(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}var w_="FirebaseError",Ce=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=w_,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ht.prototype.create)}},ht=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i="".concat(this.service,"/").concat(e),s=this.errors[e],a=s?E_(s,r):"Error",c="".concat(this.serviceName,": ").concat(a," (").concat(i,").");return new Ce(i,c,r)}};function E_(n,e){return n.replace(T_,(t,r)=>{let i=e[r];return i!=null?String(i):"<".concat(r,"?>")})}var T_=/\{\$([^}]+)}/g;function vd(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function We(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(dd(s)&&dd(a)){if(!We(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function dd(n){return n!==null&&typeof n=="object"}function xn(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vn(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ln(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Ad(n,e){let t=new Ca(n,e);return t.subscribe.bind(t)}var Ca=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");v_(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ra),i.error===void 0&&(i.error=Ra),i.complete===void 0&&(i.complete=Ra);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(a){}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function v_(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ra(){}var kv=14400*1e3;function ne(n){return n&&n._delegate?n._delegate:n}var Ne=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var rn="[DEFAULT]";var xa=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new rs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var i;let t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(i=e==null?void 0:e.optional)!=null?i:!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error("Service ".concat(this.name," is not available"))}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,!!this.shouldAutoInitialize()){if(b_(e))try{this.getOrInitializeService({instanceIdentifier:rn})}catch(t){}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=rn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return g(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=rn){return this.instances.has(e)}getOptions(e=rn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var a;let r=this.normalizeInstanceIdentifier(t),i=(a=this.onInitCallbacks.get(r))!=null?a:new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:A_(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=rn){return this.component?this.component.multipleInstances?e:rn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function A_(n){return n===rn?void 0:n}function b_(n){return n.instantiationMode==="EAGER"}var cs=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new xa(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var S_=[],H;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(H||(H={}));var R_={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},P_=H.INFO,C_={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},k_=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=C_[e];if(i)console[i]("[".concat(r,"]  ").concat(n.name,":"),...t);else throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"))},Lt=class{constructor(e){this.name=e,this._logLevel=P_,this._logHandler=k_,this._userLogHandler=null,S_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in H))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?R_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...e),this._logHandler(this,H.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...e),this._logHandler(this,H.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,H.INFO,...e),this._logHandler(this,H.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,H.WARN,...e),this._logHandler(this,H.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...e),this._logHandler(this,H.ERROR,...e)}};var N_=(n,e)=>e.some(t=>n instanceof t),bd,Sd;function D_(){return bd||(bd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O_(){return Sd||(Sd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Rd=new WeakMap,La=new WeakMap,Pd=new WeakMap,Va=new WeakMap,Fa=new WeakMap;function x_(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Ke(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Rd.set(t,n)}).catch(()=>{}),Fa.set(e,n),e}function V_(n){if(La.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});La.set(n,e)}var Ma={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return La.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Pd.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ke(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Cd(n){Ma=n(Ma)}function L_(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(us(this),e,...t);return Pd.set(r,e.sort?e.sort():[e]),Ke(r)}:O_().includes(n)?function(...e){return n.apply(us(this),e),Ke(Rd.get(this))}:function(...e){return Ke(n.apply(us(this),e))}}function M_(n){return typeof n=="function"?L_(n):(n instanceof IDBTransaction&&V_(n),N_(n,D_())?new Proxy(n,Ma):n)}function Ke(n){if(n instanceof IDBRequest)return x_(n);if(Va.has(n))return Va.get(n);let e=M_(n);return e!==n&&(Va.set(n,e),Fa.set(e,n)),e}var us=n=>Fa.get(n);function Nd(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),c=Ke(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Ke(a.result),l.oldVersion,l.newVersion,Ke(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var F_=["get","getKey","getAll","getAllKeys","count"],U_=["put","add","delete","clear"],Ua=new Map;function kd(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ua.get(e))return Ua.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=U_.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||F_.includes(t)))return;let s=function(a,...c){return g(this,null,function*(){let l=this.transaction(a,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&l.done]))[0]})};return Ua.set(e,s),s}Cd(n=>Ee(G({},n),{get:(e,t,r)=>kd(e,t)||n.get(e,t,r),has:(e,t)=>!!kd(e,t)||n.has(e,t)}));var qa=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(B_(t)){let r=t.getImmediate();return"".concat(r.library,"/").concat(r.version)}else return null}).filter(t=>t).join(" ")}};function B_(n){let e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}var za="@firebase/app",Dd="0.14.6";var dt=new Lt("@firebase/app"),q_="@firebase/app-compat",z_="@firebase/analytics-compat",$_="@firebase/analytics",j_="@firebase/app-check-compat",G_="@firebase/app-check",H_="@firebase/auth",W_="@firebase/auth-compat",K_="@firebase/database",Q_="@firebase/data-connect",J_="@firebase/database-compat",Y_="@firebase/functions",X_="@firebase/functions-compat",Z_="@firebase/installations",ey="@firebase/installations-compat",ty="@firebase/messaging",ny="@firebase/messaging-compat",ry="@firebase/performance",iy="@firebase/performance-compat",sy="@firebase/remote-config",oy="@firebase/remote-config-compat",ay="@firebase/storage",cy="@firebase/storage-compat",uy="@firebase/firestore",ly="@firebase/ai",hy="@firebase/firestore-compat",dy="firebase",fy="12.6.0";var $a="[DEFAULT]",py={[za]:"fire-core",[q_]:"fire-core-compat",[$_]:"fire-analytics",[z_]:"fire-analytics-compat",[G_]:"fire-app-check",[j_]:"fire-app-check-compat",[H_]:"fire-auth",[W_]:"fire-auth-compat",[K_]:"fire-rtdb",[Q_]:"fire-data-connect",[J_]:"fire-rtdb-compat",[Y_]:"fire-fn",[X_]:"fire-fn-compat",[Z_]:"fire-iid",[ey]:"fire-iid-compat",[ty]:"fire-fcm",[ny]:"fire-fcm-compat",[ry]:"fire-perf",[iy]:"fire-perf-compat",[sy]:"fire-rc",[oy]:"fire-rc-compat",[ay]:"fire-gcs",[cy]:"fire-gcs-compat",[uy]:"fire-fst",[hy]:"fire-fst-compat",[ly]:"fire-vertex","fire-js":"fire-js",[dy]:"fire-js-all"};var Vr=new Map,my=new Map,ja=new Map;function Od(n,e){try{n.container.addComponent(e)}catch(t){dt.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(n.name),t)}}function Qe(n){let e=n.name;if(ja.has(e))return dt.debug("There were multiple attempts to register component ".concat(e,".")),!1;ja.set(e,n);for(let t of Vr.values())Od(t,n);for(let t of my.values())Od(t,n);return!0}function sn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Te(n){return n==null?!1:n.settings!==void 0}var gy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mt=new ht("app","Firebase",gy);var Ga=class{constructor(e,t,r){this._isDeleted=!1,this._options=G({},e),this._config=G({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ne("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mt.create("app-deleted",{appName:this._name})}};var Je=fy;function Ka(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=G({name:$a,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Mt.create("bad-app-name",{appName:String(i)});if(t||(t=Na()),!t)throw Mt.create("no-options");let s=Vr.get(i);if(s){if(We(t,s.options)&&We(r,s.config))return s;throw Mt.create("duplicate-app",{appName:i})}let a=new cs(i);for(let l of ja.values())a.addComponent(l);let c=new Ga(t,r,a);return Vr.set(i,c),c}function Ft(n=$a){let e=Vr.get(n);if(!e&&n===$a&&Na())return Ka();if(!e)throw Mt.create("no-app",{appName:n});return e}function Md(){return Array.from(Vr.values())}function De(n,e,t){var a;let r=(a=py[n])!=null?a:n;t&&(r+="-".concat(t));let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let c=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];i&&c.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),i&&s&&c.push("and"),s&&c.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),dt.warn(c.join(" "));return}Qe(new Ne("".concat(r,"-version"),()=>({library:r,version:e}),"VERSION"))}var _y="firebase-heartbeat-database",yy=1,Lr="firebase-heartbeat-store",Ba=null;function Fd(){return Ba||(Ba=Nd(_y,yy,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lr)}catch(t){console.warn(t)}}}}).catch(n=>{throw Mt.create("idb-open",{originalErrorMessage:n.message})})),Ba}function Iy(n){return g(this,null,function*(){try{let t=(yield Fd()).transaction(Lr),r=yield t.objectStore(Lr).get(Ud(n));return yield t.done,r}catch(e){if(e instanceof Ce)dt.warn(e.message);else{let t=Mt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dt.warn(t.message)}}})}function xd(n,e){return g(this,null,function*(){try{let r=(yield Fd()).transaction(Lr,"readwrite");yield r.objectStore(Lr).put(e,Ud(n)),yield r.done}catch(t){if(t instanceof Ce)dt.warn(t.message);else{let r=Mt.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});dt.warn(r.message)}}})}function Ud(n){return"".concat(n.name,"!").concat(n.options.appId)}var wy=1024,Ey=30,Ha=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Wa(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return g(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vd();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Ey){let a=vy(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){dt.warn(r)}})}getHeartbeatsHeader(){return g(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Vd(),{heartbeatsToSend:r,unsentEntries:i}=Ty(this._heartbeatsCache.heartbeats),s=xr(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return dt.warn(t),""}})}};function Vd(){return new Date().toISOString().substring(0,10)}function Ty(n,e=wy){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Ld(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ld(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Wa=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return Oa()?Td().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Iy(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return g(this,null,function*(){var r;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xd(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!=null?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return g(this,null,function*(){var r;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xd(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!=null?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Ld(n){return xr(JSON.stringify({version:2,heartbeats:n})).length}function vy(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Ay(n){Qe(new Ne("platform-logger",e=>new qa(e),"PRIVATE")),Qe(new Ne("heartbeat",e=>new Ha(e),"PRIVATE")),De(za,Dd,n),De(za,Dd,"esm2020"),De("fire-js","")}Ay("");var by="firebase",Sy="12.6.0";De(by,Sy,"app");function sf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var of=sf,af=new ht("auth","Firebase",sf());var gs=new Lt("@firebase/auth");function Ry(n,...e){gs.logLevel<=H.WARN&&gs.warn("Auth (".concat(Je,"): ").concat(n),...e)}function hs(n,...e){gs.logLevel<=H.ERROR&&gs.error("Auth (".concat(Je,"): ").concat(n),...e)}function qe(n,...e){throw Ic(n,...e)}function Xe(n,...e){return Ic(n,...e)}function cf(n,e,t){let r=Ee(G({},of()),{[e]:t});return new ht("auth","Firebase",r).create(e,{appName:n.name})}function pt(n){return cf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ic(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return af.create(n,...e)}function L(n,e,...t){if(!n)throw Ic(e,...t)}function Ye(n){let e="INTERNAL ASSERTION FAILED: "+n;throw hs(e),new Error(e)}function mt(n,e){n||Ye(e)}function ec(){var n;return typeof self!="undefined"&&((n=self.location)==null?void 0:n.href)||""}function Py(){return Bd()==="http:"||Bd()==="https:"}function Bd(){var n;return typeof self!="undefined"&&((n=self.location)==null?void 0:n.protocol)||null}function Cy(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Py()||yd()||"connection"in navigator)?navigator.onLine:!0}function ky(){if(typeof navigator=="undefined")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var on=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,mt(t>e,"Short delay should be less than long delay!"),this.isMobile=gd()||Id()}get(){return Cy()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function wc(n,e){mt(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?"".concat(t).concat(e.startsWith("/")?e.slice(1):e):t}var _s=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ny={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Dy=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Oy=new on(3e4,6e4);function pe(n,e){return n.tenantId&&!e.tenantId?Ee(G({},e),{tenantId:n.tenantId}):e}function ve(s,a,c,l){return g(this,arguments,function*(n,e,t,r,i={}){return uf(n,i,()=>g(null,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let m=xn(G({key:n.config.apiKey},f)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let R=G({method:e,headers:I},d);return _d()||(R.referrerPolicy="no-referrer"),n.emulatorConfig&&He(n.emulatorConfig.host)&&(R.credentials="include"),_s.fetch()(yield lf(n,n.config.apiHost,t,m),R)}))})}function uf(n,e,t){return g(this,null,function*(){n._canInitEmulator=!1;let r=G(G({},Ny),e);try{let i=new tc(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw Fr(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fr(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Fr(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Fr(n,"user-disabled",a);let f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw cf(n,f,d);qe(n,f)}}catch(i){if(i instanceof Ce)throw i;qe(n,"network-request-failed",{message:String(i)})}})}function qt(s,a,c,l){return g(this,arguments,function*(n,e,t,r,i={}){let d=yield ve(n,e,t,r,i);return"mfaPendingCredential"in d&&qe(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function lf(n,e,t,r){return g(this,null,function*(){let i="".concat(e).concat(t,"?").concat(r),s=n,a=s.config.emulator?wc(n.config,i):"".concat(n.config.apiScheme,"://").concat(i);return Dy.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a})}function xy(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var tc=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xe(this.auth,"network-request-failed")),Oy.get())})}};function Fr(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Xe(n,e,r);return i.customData._tokenResponse=t,i}function qd(n){return n!==void 0&&n.enterprise!==void 0}var ys=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xy(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function hf(n,e){return g(this,null,function*(){return ve(n,"GET","/v2/recaptchaConfig",pe(n,e))})}function Vy(n,e){return g(this,null,function*(){return ve(n,"POST","/v1/accounts:delete",e)})}function Is(n,e){return g(this,null,function*(){return ve(n,"POST","/v1/accounts:lookup",e)})}function Ur(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function df(n,e=!1){return g(this,null,function*(){let t=ne(n),r=yield t.getIdToken(e),i=Ec(r);L(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ur(Qa(i.auth_time)),issuedAtTime:Ur(Qa(i.iat)),expirationTime:Ur(Qa(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}})}function Qa(n){return Number(n)*1e3}function Ec(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return hs("JWT malformed, contained fewer than 3 sections"),null;try{let i=is(t);return i?JSON.parse(i):(hs("Failed to decode base64 JWT payload"),null)}catch(i){return hs("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function zd(n){let e=Ec(n);return L(e,"internal-error"),L(typeof e.exp!="undefined","internal-error"),L(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}function zr(n,e,t=!1){return g(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ce&&Ly(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Ly({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var nc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!=null?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),t)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var $r=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ur(this.lastLoginAt),this.creationTime=Ur(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ws(n){return g(this,null,function*(){var m;let e=n.auth,t=yield n.getIdToken(),r=yield zr(n,Is(e,{idToken:t}));L(r==null?void 0:r.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=(m=i.providerUserInfo)!=null&&m.length?pf(i.providerUserInfo):[],a=My(n.providerData,s),c=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),d=c?l:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $r(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function ff(n){return g(this,null,function*(){let e=ne(n);yield ws(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function My(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pf(n){return n.map(r=>{var i=r,{providerId:e}=i,t=ns(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function Fy(n,e){return g(this,null,function*(){let t=yield uf(n,{},()=>g(null,null,function*(){let r=xn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=yield lf(n,i,"/v1/token","key=".concat(s)),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:r};return n.emulatorConfig&&He(n.emulatorConfig.host)&&(l.credentials="include"),_s.fetch()(a,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Uy(n,e){return g(this,null,function*(){return ve(n,"POST","/v2/accounts:revokeToken",pe(n,e))})}var Br=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken!="undefined","internal-error"),L(typeof e.refreshToken!="undefined","internal-error");let t="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):zd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){L(e.length!==0,"internal-error");let t=zd(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return g(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(L(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return g(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Fy(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(L(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(L(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(L(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ye("not implemented")}};function Ut(n,e){L(typeof n=="string"||typeof n=="undefined","internal-error",{appName:e})}var Bt=class n{constructor(s){var a=s,{uid:e,auth:t,stsTokenManager:r}=a,i=ns(a,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $r(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return g(this,null,function*(){let t=yield zr(this,this.stsTokenManager.getToken(this.auth,e));return L(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return df(this,e)}reload(){return ff(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>G({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Ee(G({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return g(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ws(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(Te(this.auth.app))return Promise.reject(pt(this.auth));let e=yield this.getIdToken();return yield zr(this,Vy(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Ee(G({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>G({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var $,z,W,te,X,E,_,w;let r=($=t.displayName)!=null?$:void 0,i=(z=t.email)!=null?z:void 0,s=(W=t.phoneNumber)!=null?W:void 0,a=(te=t.photoURL)!=null?te:void 0,c=(X=t.tenantId)!=null?X:void 0,l=(E=t._redirectEventId)!=null?E:void 0,d=(_=t.createdAt)!=null?_:void 0,f=(w=t.lastLoginAt)!=null?w:void 0,{uid:m,emailVerified:I,isAnonymous:R,providerData:N,stsTokenManager:O}=t;L(m&&O,e,"internal-error");let C=Br.fromJSON(this.name,O);L(typeof m=="string",e,"internal-error"),Ut(r,e.name),Ut(i,e.name),L(typeof I=="boolean",e,"internal-error"),L(typeof R=="boolean",e,"internal-error"),Ut(s,e.name),Ut(a,e.name),Ut(c,e.name),Ut(l,e.name),Ut(d,e.name),Ut(f,e.name);let U=new n({uid:m,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:R,photoURL:a,phoneNumber:s,tenantId:c,stsTokenManager:C,createdAt:d,lastLoginAt:f});return N&&Array.isArray(N)&&(U.providerData=N.map(v=>G({},v))),l&&(U._redirectEventId=l),U}static _fromIdTokenResponse(e,t,r=!1){return g(this,null,function*(){let i=new Br;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ws(s),s})}static _fromGetAccountInfoResponse(e,t,r){return g(this,null,function*(){let i=t.users[0];L(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?pf(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Br;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new $r(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,d),l})}};var $d=new Map;function ft(n){mt(n instanceof Function,"Expected a class definition");let e=$d.get(n);return e?(mt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$d.set(n,e),e)}var Es=class{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(e,t){return g(this,null,function*(){this.storage[e]=t})}_get(e){return g(this,null,function*(){let t=this.storage[e];return t===void 0?null:t})}_remove(e){return g(this,null,function*(){delete this.storage[e]})}_addListener(e,t){}_removeListener(e,t){}};Es.type="NONE";var rc=Es;function ds(n,e,t){return"firebase:".concat(n,":").concat(e,":").concat(t)}var Ts=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ds(this.userKey,i.apiKey,s),this.fullPersistenceKey=ds("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return g(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Is(this.auth,{idToken:e}).catch(()=>{});return t?Bt._fromGetAccountInfoResponse(this.auth,t,e):null}return Bt._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return g(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return g(this,null,function*(){if(!t.length)return new n(ft(rc),e,r);let i=(yield Promise.all(t.map(d=>g(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||ft(rc),a=ds(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(a);if(f){let m;if(typeof f=="string"){let I=yield Is(e,{idToken:f}).catch(()=>{});if(!I)break;m=yield Bt._fromGetAccountInfoResponse(e,I,f)}else m=Bt._fromJSON(e,f);d!==s&&(c=m),s=d;break}}catch(f){}let l=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(d=>g(null,null,function*(){if(d!==s)try{yield d._remove(a)}catch(f){}}))),new n(s,e,r))})}};function jd(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yf(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mf(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wf(e))return"Blackberry";if(Ef(e))return"Webos";if(gf(e))return"Safari";if((e.includes("chrome/")||_f(e))&&!e.includes("edge/"))return"Chrome";if(If(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mf(n=_e()){return/firefox\//i.test(n)}function gf(n=_e()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _f(n=_e()){return/crios\//i.test(n)}function yf(n=_e()){return/iemobile/i.test(n)}function If(n=_e()){return/android/i.test(n)}function wf(n=_e()){return/blackberry/i.test(n)}function Ef(n=_e()){return/webos/i.test(n)}function Tc(n=_e()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function By(n=_e()){var e;return Tc(n)&&!!((e=window.navigator)!=null&&e.standalone)}function qy(){return wd()&&document.documentMode===10}function Tf(n=_e()){return Tc(n)||If(n)||Ef(n)||wf(n)||/windows phone/i.test(n)||yf(n)}function vf(n,e=[]){let t;switch(n){case"Browser":t=jd(_e());break;case"Worker":t="".concat(jd(_e()),"-").concat(n);break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(Je,"/").concat(r)}var ic=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,c)=>{try{let l=e(s);a(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return g(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch(s){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}})}};function zy(t){return g(this,arguments,function*(n,e={}){return ve(n,"GET","/v2/passwordPolicy",pe(n,e))})}var $y=6,sc=class{constructor(e){var r,i,s,a;let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=t.minPasswordLength)!=null?r:$y,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))!=null?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!=null?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,a,c,l;let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=(r=t.meetsMinPasswordLength)!=null?r:!0),t.isValid&&(t.isValid=(i=t.meetsMaxPasswordLength)!=null?i:!0),t.isValid&&(t.isValid=(s=t.containsLowercaseLetter)!=null?s:!0),t.isValid&&(t.isValid=(a=t.containsUppercaseLetter)!=null?a:!0),t.isValid&&(t.isValid=(c=t.containsNumericCharacter)!=null?c:!0),t.isValid&&(t.isValid=(l=t.containsNonAlphanumericCharacter)!=null?l:!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var oc=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vs(this),this.idTokenSubscription=new vs(this),this.beforeStateQueue=new ic(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=af,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ft(t)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield Ts.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch(a){}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return g(this,null,function*(){try{let t=yield Is(this,{idToken:e}),r=yield Bt._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return g(this,null,function*(){var s;if(Te(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(s=this.redirectUser)==null?void 0:s._redirectEventId,c=r==null?void 0:r._redirectEventId,l=yield this.tryRedirectSignIn(e);(!a||a===c)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return L(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return g(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return g(this,null,function*(){try{yield ws(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ky()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return g(this,null,function*(){if(Te(this.app))return Promise.reject(pt(this));let t=e?ne(e):null;return t&&L(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return g(this,null,function*(){if(!this._deleted)return e&&L(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return Te(this.app)?Promise.reject(pt(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Te(this.app)?Promise.reject(pt(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(ft(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let e=yield zy(this),t=new sc(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ht("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return g(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Uy(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}_setRedirectUser(e,t){return g(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return g(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ft(e)||this._popupRedirectResolver;L(t,this,"argument-error"),this.redirectPersistenceManager=yield Ts.create(this,[ft(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return g(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return g(this,null,function*(){if(e===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=(r=(t=this.currentUser)==null?void 0:t.uid)!=null?r:null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(L(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}directlySetCurrentUser(e){return g(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var i;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield(i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return g(this,null,function*(){var t;if(Te(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken();return e!=null&&e.error&&Ry("Error while retrieving App Check token: ".concat(e.error)),e==null?void 0:e.token})}};function gt(n){return ne(n)}var vs=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ad(t=>this.observer=t)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var qs={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jy(n){qs=n}function Af(n){return qs.loadJS(n)}function Gy(){return qs.recaptchaEnterpriseScript}function Hy(){return qs.gapiScript}function bf(n){return"__".concat(n).concat(Math.floor(Math.random()*1e6))}var ac=class{constructor(){this.enterprise=new cc}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},cc=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var Wy="recaptcha-enterprise",qr="NO_RECAPTCHA",As=class{constructor(e){this.type=Wy,this.auth=gt(e)}verify(e="verify",t=!1){return g(this,null,function*(){function r(s){return g(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((a,c)=>g(null,null,function*(){hf(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let d=new ys(l);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(l=>{c(l)})}))})}function i(s,a,c){let l=window.grecaptcha;qd(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(qr)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ac().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(c=>{if(!t&&qd(window.grecaptcha))i(c,s,a);else{if(typeof window=="undefined"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Gy();l.length!==0&&(l+=c),Af(l).then(()=>{i(c,s,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})})}};function Mr(n,e,t,r=!1,i=!1){return g(this,null,function*(){let s=new As(n),a;if(i)a=qr;else try{a=yield s.verify(t)}catch(l){a=yield s.verify(t,!0)}let c=G({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let l=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function Mn(n,e,t,r,i){return g(this,null,function*(){var s,a;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let c=yield Mr(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(c=>g(null,null,function*(){if(c.code==="auth/missing-recaptcha-token"){console.log("".concat(t," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));let l=yield Mr(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(c)}));else if(i==="PHONE_PROVIDER")if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){let c=yield Mr(n,e,t);return r(n,c).catch(l=>g(null,null,function*(){var d;if(((d=n._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(t," flow."));let f=yield Mr(n,e,t,!1,!0);return r(n,f)}return Promise.reject(l)}))}else{let c=yield Mr(n,e,t,!1,!0);return r(n,c)}else return Promise.reject(i+" provider is not supported.")})}function Ky(n){return g(this,null,function*(){let e=gt(n),t=yield hf(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ys(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new As(e).verify()})}function Sf(n,e){let t=sn(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(We(s,e!=null?e:{}))return i;qe(i,"already-initialized")}return t.initialize({options:e})}function Qy(n,e){let t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ft);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Rf(n,e,t){let r=gt(n);L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!(t!=null&&t.disableWarnings),s=Pf(e),{host:a,port:c}=Jy(e),l=c===null?"":":".concat(c),d={url:"".concat(s,"//").concat(a).concat(l,"/")},f=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){L(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),L(We(d,r.config.emulator)&&We(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,He(a)?(Dn("".concat(s,"//").concat(a).concat(l)),On("Auth",!0)):i||Yy()}function Pf(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Jy(n){let e=Pf(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Gd(r.substr(s.length+1))}}else{let[s,a]=r.split(":");return{host:s,port:Gd(a)}}}function Gd(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Yy(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var an=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ye("not implemented")}_getIdTokenResponse(e){return Ye("not implemented")}_linkToIdToken(e,t){return Ye("not implemented")}_getReauthenticationResolver(e){return Ye("not implemented")}};function Xy(n,e){return g(this,null,function*(){return ve(n,"POST","/v1/accounts:signUp",e)})}function Zy(n,e){return g(this,null,function*(){return qt(n,"POST","/v1/accounts:signInWithPassword",pe(n,e))})}function eI(n,e){return g(this,null,function*(){return qt(n,"POST","/v1/accounts:signInWithEmailLink",pe(n,e))})}function tI(n,e){return g(this,null,function*(){return qt(n,"POST","/v1/accounts:signInWithEmailLink",pe(n,e))})}var jr=class n extends an{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return g(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mn(e,t,"signInWithPassword",Zy,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return eI(e,{email:this._email,oobCode:this._password});default:qe(e,"internal-error")}})}_linkToIdToken(e,t){return g(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mn(e,r,"signUpPassword",Xy,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return tI(e,{idToken:t,email:this._email,oobCode:this._password});default:qe(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Fn(n,e){return g(this,null,function*(){return qt(n,"POST","/v1/accounts:signInWithIdp",pe(n,e))})}var nI="http://localhost",cn=class n extends an{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qe("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let c=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=c,s=ns(c,["providerId","signInMethod"]);if(!r||!i)return null;let a=new n(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return Fn(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Fn(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Fn(e,t)}buildRequest(){let e={requestUri:nI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xn(t)}return e}};function Hd(n,e){return g(this,null,function*(){return ve(n,"POST","/v1/accounts:sendVerificationCode",pe(n,e))})}function rI(n,e){return g(this,null,function*(){return qt(n,"POST","/v1/accounts:signInWithPhoneNumber",pe(n,e))})}function iI(n,e){return g(this,null,function*(){let t=yield qt(n,"POST","/v1/accounts:signInWithPhoneNumber",pe(n,e));if(t.temporaryProof)throw Fr(n,"account-exists-with-different-credential",t);return t})}var sI={USER_NOT_FOUND:"user-not-found"};function oI(n,e){return g(this,null,function*(){let t=Ee(G({},e),{operation:"REAUTH"});return qt(n,"POST","/v1/accounts:signInWithPhoneNumber",pe(n,t),sI)})}var Gr=class n extends an{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new n({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new n({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return rI(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return iI(e,G({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return oI(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new n({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}};function aI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cI(n){let e=Vn(Ln(n)).link,t=e?Vn(Ln(e)).deep_link_id:null,r=Vn(Ln(n)).deep_link_id;return(r?Vn(Ln(r)).link:null)||r||t||e||n}var bs=class n{constructor(e){var a,c,l,d,f,m;let t=Vn(Ln(e)),r=(a=t.apiKey)!=null?a:null,i=(c=t.oobCode)!=null?c:null,s=aI((l=t.mode)!=null?l:null);L(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=(d=t.continueUrl)!=null?d:null,this.languageCode=(f=t.lang)!=null?f:null,this.tenantId=(m=t.tenantId)!=null?m:null}static parseLink(e){let t=cI(e);try{return new n(t)}catch(r){return null}}};var un=class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(e,t){return jr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=bs.parseLink(t);return L(r,"argument-error"),jr._fromEmailAndCode(e,r.code,r.tenantId)}};un.PROVIDER_ID="password";un.EMAIL_PASSWORD_SIGN_IN_METHOD="password";un.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ss=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ln=class extends Ss{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Hr=class n extends ln{constructor(){super("facebook.com")}static credential(e){return cn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch(t){return null}}};Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hr.PROVIDER_ID="facebook.com";var Wr=class n extends ln{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return cn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return n.credential(t,r)}catch(i){return null}}};Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";var Kr=class n extends ln{constructor(){super("github.com")}static credential(e){return cn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch(t){return null}}};Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";var Qr=class n extends ln{constructor(){super("twitter.com")}static credential(e,t){return cn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return n.credential(t,r)}catch(i){return null}}};Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";function uI(n,e){return g(this,null,function*(){return qt(n,"POST","/v1/accounts:signUp",pe(n,e))})}var Un=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return g(this,null,function*(){let s=yield Bt._fromIdTokenResponse(e,r,i),a=Wd(r);return new n({user:s,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return g(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Wd(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Wd(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var uc=class n extends Ce{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!=null?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Cf(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?uc._fromErrorAndOperation(n,s,e,r):s})}function lI(n,e,t=!1){return g(this,null,function*(){let r=yield zr(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Un._forOperation(n,"link",r)})}function hI(n,e,t=!1){return g(this,null,function*(){let{auth:r}=n;if(Te(r.app))return Promise.reject(pt(r));let i="reauthenticate";try{let s=yield zr(n,Cf(r,i,e,n),t);L(s.idToken,r,"internal-error");let a=Ec(s.idToken);L(a,r,"internal-error");let{sub:c}=a;return L(n.uid===c,r,"user-mismatch"),Un._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qe(r,"user-mismatch"),s}})}function kf(n,e,t=!1){return g(this,null,function*(){if(Te(n.app))return Promise.reject(pt(n));let r="signIn",i=yield Cf(n,r,e),s=yield Un._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Nf(n,e){return g(this,null,function*(){return kf(gt(n),e)})}function Df(n){return g(this,null,function*(){let e=gt(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function zs(n,e,t){return g(this,null,function*(){if(Te(n.app))return Promise.reject(pt(n));let r=gt(n),a=yield Mn(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uI,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Df(n),l}),c=yield Un._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(c.user),c})}function $s(n,e,t){return Te(n.app)?Promise.reject(pt(n)):Nf(ne(n),un.credential(e,t)).catch(r=>g(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Df(n),r}))}function Of(n,e,t,r){return ne(n).onIdTokenChanged(e,t,r)}function xf(n,e,t){return ne(n).beforeAuthStateChanged(e,t)}function js(n,e,t,r){return ne(n).onAuthStateChanged(e,t,r)}function Bn(n){return ne(n).signOut()}function Kd(n,e){return ve(n,"POST","/v2/accounts/mfaEnrollment:start",pe(n,e))}function dI(n,e){return ve(n,"POST","/v2/accounts/mfaEnrollment:finalize",pe(n,e))}function fI(n,e){return ve(n,"POST","/v2/accounts/mfaEnrollment:start",pe(n,e))}function pI(n,e){return ve(n,"POST","/v2/accounts/mfaEnrollment:finalize",pe(n,e))}var Rs="__sak";var Ps=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rs,"1"),this.storage.removeItem(Rs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var mI=1e3,gI=10,Cs=class n extends Ps{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tf(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=e.key;t?this.detachListener():this.stopPolling();let i=()=>{let a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);qy()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,gI):i()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},mI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,t){return g(this,null,function*(){yield Vt(n.prototype,this,"_set").call(this,e,t),this.localCache[e]=JSON.stringify(t)})}_get(e){return g(this,null,function*(){let t=yield Vt(n.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(t),t})}_remove(e){return g(this,null,function*(){yield Vt(n.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}};Cs.type="LOCAL";var Vf=Cs;var _I=1e3;function Ja(n){var r,i;let e=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),t=RegExp("".concat(e,"=([^;]+)"));return(i=(r=document.cookie.match(t))==null?void 0:r[1])!=null?i:null}function Ya(n){let e=window.location.protocol==="http:";return"".concat(e?"__dev_":"__HOST-","FIREBASE_").concat(n.split(":")[3])}var lc=class{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;let t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}_isAvailable(){return g(this,null,function*(){var e;return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator=="undefined"||typeof document=="undefined"?!1:(e=navigator.cookieEnabled)!=null?e:!0})}_set(e,t){return g(this,null,function*(){})}_get(e){return g(this,null,function*(){if(!this._isAvailable())return null;let t=Ya(e);if(window.cookieStore){let r=yield window.cookieStore.get(t);return r==null?void 0:r.value}return Ja(t)})}_remove(e){return g(this,null,function*(){if(!this._isAvailable()||!(yield this._get(e)))return;let r=Ya(e);document.cookie="".concat(r,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),yield fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})})}_addListener(e,t){if(!this._isAvailable())return;let r=Ya(e);if(window.cookieStore){let c=(d=>{let f=d.changed.find(I=>I.name===r);f&&t(f.value),d.deleted.find(I=>I.name===r)&&t(null)}),l=()=>window.cookieStore.removeEventListener("change",c);return this.listenerUnsubscribes.set(t,l),window.cookieStore.addEventListener("change",c)}let i=Ja(r),s=setInterval(()=>{let c=Ja(r);c!==i&&(t(c),i=c)},_I),a=()=>clearInterval(s);this.listenerUnsubscribes.set(t,a)}_removeListener(e,t){let r=this.listenerUnsubscribes.get(t);r&&(r(),this.listenerUnsubscribes.delete(t))}};lc.type="COOKIE";var ks=class extends Ps{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}};ks.type="SESSION";var vc=ks;function yI(n){return Promise.all(n.map(e=>g(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Ns=class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;let r=new n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return g(this,null,function*(){let t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});let c=Array.from(a).map(d=>g(this,null,function*(){return d(t.origin,s)})),l=yield yI(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};Ns.receivers=[];function Ac(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var hc=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return g(this,null,function*(){let i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,l)=>{let d=Ac("",20);i.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(m){let I=m;if(I.data.eventId===d)switch(I.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(I.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Ze(){return window}function II(n){Ze().location.href=n}function Lf(){return typeof Ze().WorkerGlobalScope!="undefined"&&typeof Ze().importScripts=="function"}function wI(){return g(this,null,function*(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})}function EI(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function TI(){return Lf()?self:null}var Mf="firebaseLocalStorageDb",vI=1,Ds="firebaseLocalStorage",Ff="fbase_key",hn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Gs(n,e){return n.transaction([Ds],e?"readwrite":"readonly").objectStore(Ds)}function AI(){let n=indexedDB.deleteDatabase(Mf);return new hn(n).toPromise()}function dc(){let n=indexedDB.open(Mf,vI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Ds,{keyPath:Ff})}catch(i){t(i)}}),n.addEventListener("success",()=>g(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Ds)?e(r):(r.close(),yield AI(),e(yield dc()))}))})}function Qd(n,e,t){return g(this,null,function*(){let r=Gs(n,!0).put({[Ff]:e,value:t});return new hn(r).toPromise()})}function bI(n,e){return g(this,null,function*(){let t=Gs(n,!1).get(e),r=yield new hn(t).toPromise();return r===void 0?null:r.value})}function Jd(n,e){let t=Gs(n,!0).delete(e);return new hn(t).toPromise()}var SI=800,RI=3,Os=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return g(this,null,function*(){return this.db?this.db:(this.db=yield dc(),this.db)})}_withRetries(e){return g(this,null,function*(){let t=0;for(;;)try{let r=yield this._openDb();return yield e(r)}catch(r){if(t++>RI)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return g(this,null,function*(){return Lf()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return g(this,null,function*(){this.receiver=Ns._getInstance(TI()),this.receiver._subscribe("keyChanged",(e,t)=>g(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(t.key)}})),this.receiver._subscribe("ping",(e,t)=>g(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return g(this,null,function*(){var t,r;if(this.activeServiceWorker=yield wI(),!this.activeServiceWorker)return;this.sender=new hc(this.activeServiceWorker);let e=yield this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return g(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||EI()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}})}_isAvailable(){return g(this,null,function*(){try{if(!indexedDB)return!1;let e=yield dc();return yield Qd(e,Rs,"1"),yield Jd(e,Rs),!0}catch(e){}return!1})}_withPendingWrite(e){return g(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,t){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(r=>Qd(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)}))})}_get(e){return g(this,null,function*(){let t=yield this._withRetries(r=>bI(r,e));return this.localCache[e]=t,t})}_remove(e){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(t=>Jd(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return g(this,null,function*(){let e=yield this._withRetries(i=>{let s=Gs(i,!1).getAll();return new hn(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let t=[],r=new Set;if(e.length!==0)for(let{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(let i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t})}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>g(this,null,function*(){return this._poll()}),SI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Os.type="LOCAL";var Uf=Os;function Yd(n,e){return ve(n,"POST","/v2/accounts/mfaSignIn:start",pe(n,e))}function PI(n,e){return ve(n,"POST","/v2/accounts/mfaSignIn:finalize",pe(n,e))}function CI(n,e){return ve(n,"POST","/v2/accounts/mfaSignIn:finalize",pe(n,e))}var oA=bf("rcb"),aA=new on(3e4,6e4);var fs="recaptcha";function kI(n,e,t){return g(this,null,function*(){var r;if(!n._getRecaptchaConfig())try{yield Ky(n)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){let s=i.session;if("phoneNumber"in i){L(s.type==="enroll",n,"internal-error");let a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(yield Mn(n,a,"mfaSmsEnrollment",(f,m)=>g(null,null,function*(){if(m.phoneEnrollmentInfo.captchaResponse===qr){L((t==null?void 0:t.type)===fs,f,"argument-error");let I=yield Xa(f,m,t);return Kd(f,I)}return Kd(f,m)}),"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{L(s.type==="signin",n,"internal-error");let a=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;L(a,n,"missing-multi-factor-info");let c={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(yield Mn(n,c,"mfaSmsSignIn",(m,I)=>g(null,null,function*(){if(I.phoneSignInInfo.captchaResponse===qr){L((t==null?void 0:t.type)===fs,m,"argument-error");let R=yield Xa(m,I,t);return Yd(m,R)}return Yd(m,I)}),"PHONE_PROVIDER").catch(m=>Promise.reject(m))).phoneResponseInfo.sessionInfo}}else{let s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(yield Mn(n,s,"sendVerificationCode",(d,f)=>g(null,null,function*(){if(f.captchaResponse===qr){L((t==null?void 0:t.type)===fs,d,"argument-error");let m=yield Xa(d,f,t);return Hd(d,m)}return Hd(d,f)}),"PHONE_PROVIDER").catch(d=>Promise.reject(d))).sessionInfo}}finally{t==null||t._reset()}})}function Xa(n,e,t){return g(this,null,function*(){L(t.type===fs,n,"argument-error");let r=yield t.verify();L(typeof r=="string",n,"argument-error");let i=G({},e);if("phoneEnrollmentInfo"in i){let s=i.phoneEnrollmentInfo.phoneNumber,a=i.phoneEnrollmentInfo.captchaResponse,c=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:a,clientType:c,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){let s=i.phoneSignInInfo.captchaResponse,a=i.phoneSignInInfo.clientType,c=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:a,recaptchaVersion:c}}),i}else return Object.assign(i,{recaptchaToken:r}),i})}var Jr=class n{constructor(e){this.providerId=n.PROVIDER_ID,this.auth=gt(e)}verifyPhoneNumber(e,t){return kI(this.auth,e,ne(t))}static credential(e,t){return Gr._fromVerification(e,t)}static credentialFromResult(e){let t=e;return n.credentialFromTaggedObject(t)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?Gr._fromTokenResponse(t,r):null}};Jr.PROVIDER_ID="phone";Jr.PHONE_SIGN_IN_METHOD="phone";function NI(n,e){return e?ft(e):(L(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Yr=class extends an{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fn(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function DI(n){return kf(n.auth,new Yr(n),n.bypassAuthState)}function OI(n){let{auth:e,user:t}=n;return L(t,e,"internal-error"),hI(t,new Yr(n),n.bypassAuthState)}function xI(n){return g(this,null,function*(){let{auth:e,user:t}=n;return L(t,e,"internal-error"),lI(t,new Yr(n),n.bypassAuthState)})}var xs=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>g(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return g(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DI;case"linkViaPopup":case"linkViaRedirect":return xI;case"reauthViaPopup":case"reauthViaRedirect":return OI;default:qe(this.auth,"internal-error")}}resolve(e){mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var VI=new on(2e3,1e4);var fc=class n extends xs{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return g(this,null,function*(){let e=yield this.execute();return L(e,this.auth,"internal-error"),e})}onExecution(){return g(this,null,function*(){mt(this.filter.length===1,"Popup operations only handle one event");let e=Ac();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xe(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xe(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VI.get())};e()}};fc.currentPopupAction=null;var LI="pendingRedirect",ps=new Map,pc=class n extends xs{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return g(this,null,function*(){let e=ps.get(this.auth._key());if(!e){try{let r=(yield MI(this.resolver,this.auth))?yield Vt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ps.set(this.auth._key(),e)}return this.bypassAuthState||ps.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return g(this,null,function*(){if(e.type==="signInViaRedirect")return Vt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Vt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return g(this,null,function*(){})}cleanUp(){}};function MI(n,e){return g(this,null,function*(){let t=BI(e),r=UI(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function FI(n,e){ps.set(n._key(),e)}function UI(n){return ft(n._redirectPersistence)}function BI(n){return ds(LI,n.config.apiKey,n.name)}function qI(n,e,t=!1){return g(this,null,function*(){if(Te(n.app))return Promise.reject(pt(n));let r=gt(n),i=NI(r,e),a=yield new pc(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var zI=600*1e3,mc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$I(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Bf(e)){let i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Xe(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xd(e))}saveEventToCache(e){this.cachedEventUids.add(Xd(e)),this.lastProcessedEventTime=Date.now()}};function Xd(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Bf({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $I(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bf(n);default:return!1}}function jI(t){return g(this,arguments,function*(n,e={}){return ve(n,"GET","/v1/projects",e)})}var GI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HI=/^https?/;function WI(n){return g(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield jI(n);for(let t of e)try{if(KI(t))return}catch(r){}qe(n,"unauthorized-domain")})}function KI(n){let e=ec(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!HI.test(t))return!1;if(GI.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var QI=new on(3e4,6e4);function Zd(){let n=Ze().___jsl;if(n!=null&&n.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function JI(n){return new Promise((e,t)=>{var i,s,a;function r(){Zd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zd(),t(Xe(n,"network-request-failed"))},timeout:QI.get()})}if((s=(i=Ze().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Ze().gapi)!=null&&a.load)r();else{let c=bf("iframefcb");return Ze()[c]=()=>{gapi.load?r():t(Xe(n,"network-request-failed"))},Af("".concat(Hy(),"?onload=").concat(c)).catch(l=>t(l))}}).catch(e=>{throw ms=null,e})}var ms=null;function YI(n){return ms=ms||JI(n),ms}var XI=new on(5e3,15e3),ZI="__/auth/iframe",ew="emulator/auth/iframe",tw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rw(n){let e=n.config;L(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?wc(e,ew):"https://".concat(n.config.authDomain,"/").concat(ZI),r={apiKey:e.apiKey,appName:n.name,v:Je},i=nw.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(t,"?").concat(xn(r).slice(1))}function iw(n){return g(this,null,function*(){let e=yield YI(n),t=Ze().gapi;return L(t,n,"internal-error"),e.open({where:document.body,url:rw(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tw,dontclear:!0},r=>new Promise((i,s)=>g(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=Xe(n,"network-request-failed"),c=Ze().setTimeout(()=>{s(a)},XI.get());function l(){Ze().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{s(a)})})))})}var sw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ow=500,aw=600,cw="_blank",uw="http://localhost",Vs=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}};function lw(n,e,t,r=ow,i=aw){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Ee(G({},sw),{width:r.toString(),height:i.toString(),top:s,left:a}),d=_e().toLowerCase();t&&(c=_f(d)?cw:t),mf(d)&&(e=e||uw,l.scrollbars="yes");let f=Object.entries(l).reduce((I,[R,N])=>"".concat(I).concat(R,"=").concat(N,","),"");if(By(d)&&c!=="_self")return hw(e||"",c),new Vs(null);let m=window.open(e||"",c,f);L(m,n,"popup-blocked");try{m.focus()}catch(I){}return new Vs(m)}function hw(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var dw="__/auth/handler",fw="emulator/auth/handler",pw=encodeURIComponent("fac");function ef(n,e,t,r,i,s){return g(this,null,function*(){L(n.config.authDomain,n,"auth-domain-config-required"),L(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Je,eventId:i};if(e instanceof Ss){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",vd(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(s||{}))a[f]=m}if(e instanceof ln){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),d=l?"#".concat(pw,"=").concat(encodeURIComponent(l)):"";return"".concat(mw(n),"?").concat(xn(c).slice(1)).concat(d)})}function mw({config:n}){return n.emulator?wc(n,fw):"https://".concat(n.authDomain,"/").concat(dw)}var Za="webStorageSupport",gc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vc,this._completeRedirectFn=qI,this._overrideRedirectResult=FI}_openPopup(e,t,r,i){return g(this,null,function*(){var a;mt((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");let s=yield ef(e,t,r,ec(),i);return lw(e,s,Ac())})}_openRedirect(e,t,r,i){return g(this,null,function*(){yield this._originValidation(e);let s=yield ef(e,t,r,ec(),i);return II(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(mt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return g(this,null,function*(){let t=yield iw(e),r=new mc(e);return t.register("authEvent",i=>(L(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Za,{type:Za},i=>{var a;let s=(a=i==null?void 0:i[0])==null?void 0:a[Za];s!==void 0&&t(!!s),qe(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=WI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tf()||gf()||Tc()}},qf=gc,Ls=class{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ye("unexpected MultiFactorSessionType")}}},_c=class n extends Ls{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new n(e)}_finalizeEnroll(e,t,r){return dI(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return PI(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},Ms=class{constructor(){}static assertion(e){return _c._fromCredential(e)}};Ms.FACTOR_ID="phone";var Fs=class{static assertionForEnrollment(e,t){return Us._fromSecret(e,t)}static assertionForSignIn(e,t){return Us._fromEnrollmentId(e,t)}static generateSecret(e){return g(this,null,function*(){var i;let t=e;L(typeof((i=t.user)==null?void 0:i.auth)!="undefined","internal-error");let r=yield fI(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return Bs._fromStartTotpMfaEnrollmentResponse(r,t.user.auth)})}};Fs.FACTOR_ID="totp";var Us=class n extends Ls{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new n(t,void 0,e)}static _fromEnrollmentId(e,t){return new n(t,e)}_finalizeEnroll(e,t,r){return g(this,null,function*(){return L(typeof this.secret!="undefined",e,"argument-error"),pI(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})})}_finalizeSignIn(e,t){return g(this,null,function*(){L(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");let r={verificationCode:this.otp};return CI(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})})}},Bs=class n{constructor(e,t,r,i,s,a,c){this.sessionInfo=a,this.auth=c,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,t){return new n(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var i;let r=!1;return(ls(e)||ls(t))&&(r=!0),r&&(ls(e)&&(e=((i=this.auth.currentUser)==null?void 0:i.email)||"unknownuser"),ls(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}};function ls(n){return typeof n=="undefined"||(n==null?void 0:n.length)===0}var tf="@firebase/auth",nf="1.11.1";var yc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}getToken(e){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function gw(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _w(n){Qe(new Ne("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;L(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vf(n)},d=new oc(r,i,s,l);return Qy(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qe(new Ne("auth-internal",e=>{let t=gt(e.getProvider("auth").getImmediate());return(r=>new yc(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),De(tf,nf,gw(n)),De(tf,nf,"esm2020")}var yw=300,Iw=Da("authIdTokenMaxAge")||yw,rf=null,ww=n=>e=>g(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Iw)return;let i=t==null?void 0:t.token;rf!==i&&(rf=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});function bc(n=Ft()){let e=sn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Sf(n,{popupRedirectResolver:qf,persistence:[Uf,Vf,vc]}),r=Da("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let a=ww(s.toString());xf(t,a,()=>a(t.currentUser)),Of(t,c=>a(c))}}let i=ka("auth");return i&&Rf(t,"http://".concat(i)),t}function Ew(){var n,e;return(e=(n=document.getElementsByTagName("head"))==null?void 0:n[0])!=null?e:document}jy({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Xe("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Ew().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_w("Browser");var zf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},$f={};var _t,Sc;(function(){var n;function e(E,_){function w(){}w.prototype=_.prototype,E.F=_.prototype,E.prototype=new w,E.prototype.constructor=E,E.D=function(v,T,b){for(var y=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)y[ke-2]=arguments[ke];return _.prototype[T].apply(v,y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,_,w){w||(w=0);let v=Array(16);if(typeof _=="string")for(var T=0;T<16;++T)v[T]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(T=0;T<16;++T)v[T]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=E.g[0],w=E.g[1],T=E.g[2];let b=E.g[3],y;y=_+(b^w&(T^b))+v[0]+3614090360&4294967295,_=w+(y<<7&4294967295|y>>>25),y=b+(T^_&(w^T))+v[1]+3905402710&4294967295,b=_+(y<<12&4294967295|y>>>20),y=T+(w^b&(_^w))+v[2]+606105819&4294967295,T=b+(y<<17&4294967295|y>>>15),y=w+(_^T&(b^_))+v[3]+3250441966&4294967295,w=T+(y<<22&4294967295|y>>>10),y=_+(b^w&(T^b))+v[4]+4118548399&4294967295,_=w+(y<<7&4294967295|y>>>25),y=b+(T^_&(w^T))+v[5]+1200080426&4294967295,b=_+(y<<12&4294967295|y>>>20),y=T+(w^b&(_^w))+v[6]+2821735955&4294967295,T=b+(y<<17&4294967295|y>>>15),y=w+(_^T&(b^_))+v[7]+4249261313&4294967295,w=T+(y<<22&4294967295|y>>>10),y=_+(b^w&(T^b))+v[8]+1770035416&4294967295,_=w+(y<<7&4294967295|y>>>25),y=b+(T^_&(w^T))+v[9]+2336552879&4294967295,b=_+(y<<12&4294967295|y>>>20),y=T+(w^b&(_^w))+v[10]+4294925233&4294967295,T=b+(y<<17&4294967295|y>>>15),y=w+(_^T&(b^_))+v[11]+2304563134&4294967295,w=T+(y<<22&4294967295|y>>>10),y=_+(b^w&(T^b))+v[12]+1804603682&4294967295,_=w+(y<<7&4294967295|y>>>25),y=b+(T^_&(w^T))+v[13]+4254626195&4294967295,b=_+(y<<12&4294967295|y>>>20),y=T+(w^b&(_^w))+v[14]+2792965006&4294967295,T=b+(y<<17&4294967295|y>>>15),y=w+(_^T&(b^_))+v[15]+1236535329&4294967295,w=T+(y<<22&4294967295|y>>>10),y=_+(T^b&(w^T))+v[1]+4129170786&4294967295,_=w+(y<<5&4294967295|y>>>27),y=b+(w^T&(_^w))+v[6]+3225465664&4294967295,b=_+(y<<9&4294967295|y>>>23),y=T+(_^w&(b^_))+v[11]+643717713&4294967295,T=b+(y<<14&4294967295|y>>>18),y=w+(b^_&(T^b))+v[0]+3921069994&4294967295,w=T+(y<<20&4294967295|y>>>12),y=_+(T^b&(w^T))+v[5]+3593408605&4294967295,_=w+(y<<5&4294967295|y>>>27),y=b+(w^T&(_^w))+v[10]+38016083&4294967295,b=_+(y<<9&4294967295|y>>>23),y=T+(_^w&(b^_))+v[15]+3634488961&4294967295,T=b+(y<<14&4294967295|y>>>18),y=w+(b^_&(T^b))+v[4]+3889429448&4294967295,w=T+(y<<20&4294967295|y>>>12),y=_+(T^b&(w^T))+v[9]+568446438&4294967295,_=w+(y<<5&4294967295|y>>>27),y=b+(w^T&(_^w))+v[14]+3275163606&4294967295,b=_+(y<<9&4294967295|y>>>23),y=T+(_^w&(b^_))+v[3]+4107603335&4294967295,T=b+(y<<14&4294967295|y>>>18),y=w+(b^_&(T^b))+v[8]+1163531501&4294967295,w=T+(y<<20&4294967295|y>>>12),y=_+(T^b&(w^T))+v[13]+2850285829&4294967295,_=w+(y<<5&4294967295|y>>>27),y=b+(w^T&(_^w))+v[2]+4243563512&4294967295,b=_+(y<<9&4294967295|y>>>23),y=T+(_^w&(b^_))+v[7]+1735328473&4294967295,T=b+(y<<14&4294967295|y>>>18),y=w+(b^_&(T^b))+v[12]+2368359562&4294967295,w=T+(y<<20&4294967295|y>>>12),y=_+(w^T^b)+v[5]+4294588738&4294967295,_=w+(y<<4&4294967295|y>>>28),y=b+(_^w^T)+v[8]+2272392833&4294967295,b=_+(y<<11&4294967295|y>>>21),y=T+(b^_^w)+v[11]+1839030562&4294967295,T=b+(y<<16&4294967295|y>>>16),y=w+(T^b^_)+v[14]+4259657740&4294967295,w=T+(y<<23&4294967295|y>>>9),y=_+(w^T^b)+v[1]+2763975236&4294967295,_=w+(y<<4&4294967295|y>>>28),y=b+(_^w^T)+v[4]+1272893353&4294967295,b=_+(y<<11&4294967295|y>>>21),y=T+(b^_^w)+v[7]+4139469664&4294967295,T=b+(y<<16&4294967295|y>>>16),y=w+(T^b^_)+v[10]+3200236656&4294967295,w=T+(y<<23&4294967295|y>>>9),y=_+(w^T^b)+v[13]+681279174&4294967295,_=w+(y<<4&4294967295|y>>>28),y=b+(_^w^T)+v[0]+3936430074&4294967295,b=_+(y<<11&4294967295|y>>>21),y=T+(b^_^w)+v[3]+3572445317&4294967295,T=b+(y<<16&4294967295|y>>>16),y=w+(T^b^_)+v[6]+76029189&4294967295,w=T+(y<<23&4294967295|y>>>9),y=_+(w^T^b)+v[9]+3654602809&4294967295,_=w+(y<<4&4294967295|y>>>28),y=b+(_^w^T)+v[12]+3873151461&4294967295,b=_+(y<<11&4294967295|y>>>21),y=T+(b^_^w)+v[15]+530742520&4294967295,T=b+(y<<16&4294967295|y>>>16),y=w+(T^b^_)+v[2]+3299628645&4294967295,w=T+(y<<23&4294967295|y>>>9),y=_+(T^(w|~b))+v[0]+4096336452&4294967295,_=w+(y<<6&4294967295|y>>>26),y=b+(w^(_|~T))+v[7]+1126891415&4294967295,b=_+(y<<10&4294967295|y>>>22),y=T+(_^(b|~w))+v[14]+2878612391&4294967295,T=b+(y<<15&4294967295|y>>>17),y=w+(b^(T|~_))+v[5]+4237533241&4294967295,w=T+(y<<21&4294967295|y>>>11),y=_+(T^(w|~b))+v[12]+1700485571&4294967295,_=w+(y<<6&4294967295|y>>>26),y=b+(w^(_|~T))+v[3]+2399980690&4294967295,b=_+(y<<10&4294967295|y>>>22),y=T+(_^(b|~w))+v[10]+4293915773&4294967295,T=b+(y<<15&4294967295|y>>>17),y=w+(b^(T|~_))+v[1]+2240044497&4294967295,w=T+(y<<21&4294967295|y>>>11),y=_+(T^(w|~b))+v[8]+1873313359&4294967295,_=w+(y<<6&4294967295|y>>>26),y=b+(w^(_|~T))+v[15]+4264355552&4294967295,b=_+(y<<10&4294967295|y>>>22),y=T+(_^(b|~w))+v[6]+2734768916&4294967295,T=b+(y<<15&4294967295|y>>>17),y=w+(b^(T|~_))+v[13]+1309151649&4294967295,w=T+(y<<21&4294967295|y>>>11),y=_+(T^(w|~b))+v[4]+4149444226&4294967295,_=w+(y<<6&4294967295|y>>>26),y=b+(w^(_|~T))+v[11]+3174756917&4294967295,b=_+(y<<10&4294967295|y>>>22),y=T+(_^(b|~w))+v[2]+718787259&4294967295,T=b+(y<<15&4294967295|y>>>17),y=w+(b^(T|~_))+v[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(T+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.v=function(E,_){_===void 0&&(_=E.length);let w=_-this.blockSize,v=this.C,T=this.h,b=0;for(;b<_;){if(T==0)for(;b<=w;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<_;)if(v[T++]=E.charCodeAt(b++),T==this.blockSize){i(this,v),T=0;break}}else for(;b<_;)if(v[T++]=E[b++],T==this.blockSize){i(this,v),T=0;break}}this.h=T,this.o+=_},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;_=this.o*8;for(var w=E.length-8;w<E.length;++w)E[w]=_&255,_/=256;for(this.v(E),E=Array(16),_=0,w=0;w<4;++w)for(let v=0;v<32;v+=8)E[_++]=this.g[w]>>>v&255;return E};function s(E,_){var w=c;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=_(E)}function a(E,_){this.h=_;let w=[],v=!0;for(let T=E.length-1;T>=0;T--){let b=E[T]|0;v&&b==_||(w[T]=b,v=!1)}this.g=w}var c={};function l(E){return-128<=E&&E<128?s(E,function(_){return new a([_|0],_<0?-1:0)}):new a([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return C(d(-E));let _=[],w=1;for(let v=0;E>=w;v++)_[v]=E/w|0,w*=4294967296;return new a(_,0)}function f(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return C(f(E.substring(1),_));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');let w=d(Math.pow(_,8)),v=m;for(let b=0;b<E.length;b+=8){var T=Math.min(8,E.length-b);let y=parseInt(E.substring(b,b+T),_);T<8?(T=d(Math.pow(_,T)),v=v.j(T).add(d(y))):(v=v.j(w),v=v.add(d(y)))}return v}var m=l(0),I=l(1),R=l(16777216);n=a.prototype,n.m=function(){if(O(this))return-C(this).m();let E=0,_=1;for(let w=0;w<this.g.length;w++){let v=this.i(w);E+=(v>=0?v:4294967296+v)*_,_*=4294967296}return E},n.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(O(this))return"-"+C(this).toString(E);let _=d(Math.pow(E,6));var w=this;let v="";for(;;){let T=W(w,_).g;w=U(w,T.j(_));let b=((w.g.length>0?w.g[0]:w.h)>>>0).toString(E);if(w=T,N(w))return b+v;for(;b.length<6;)b="0"+b;v=b+v}},n.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(let _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function O(E){return E.h==-1}n.l=function(E){return E=U(this,E),O(E)?-1:N(E)?0:1};function C(E){let _=E.g.length,w=[];for(let v=0;v<_;v++)w[v]=~E.g[v];return new a(w,~E.h).add(I)}n.abs=function(){return O(this)?C(this):this},n.add=function(E){let _=Math.max(this.g.length,E.g.length),w=[],v=0;for(let T=0;T<=_;T++){let b=v+(this.i(T)&65535)+(E.i(T)&65535),y=(b>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);v=y>>>16,b&=65535,y&=65535,w[T]=y<<16|b}return new a(w,w[w.length-1]&-2147483648?-1:0)};function U(E,_){return E.add(C(_))}n.j=function(E){if(N(this)||N(E))return m;if(O(this))return O(E)?C(this).j(C(E)):C(C(this).j(E));if(O(E))return C(this.j(C(E)));if(this.l(R)<0&&E.l(R)<0)return d(this.m()*E.m());let _=this.g.length+E.g.length,w=[];for(var v=0;v<2*_;v++)w[v]=0;for(v=0;v<this.g.length;v++)for(let T=0;T<E.g.length;T++){let b=this.i(v)>>>16,y=this.i(v)&65535,ke=E.i(T)>>>16,Pt=E.i(T)&65535;w[2*v+2*T]+=y*Pt,$(w,2*v+2*T),w[2*v+2*T+1]+=b*Pt,$(w,2*v+2*T+1),w[2*v+2*T+1]+=y*ke,$(w,2*v+2*T+1),w[2*v+2*T+2]+=b*ke,$(w,2*v+2*T+2)}for(E=0;E<_;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=_;E<2*_;E++)w[E]=0;return new a(w,0)};function $(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function z(E,_){this.g=E,this.h=_}function W(E,_){if(N(_))throw Error("division by zero");if(N(E))return new z(m,m);if(O(E))return _=W(C(E),_),new z(C(_.g),C(_.h));if(O(_))return _=W(E,C(_)),new z(C(_.g),_.h);if(E.g.length>30){if(O(E)||O(_))throw Error("slowDivide_ only works with positive integers.");for(var w=I,v=_;v.l(E)<=0;)w=te(w),v=te(v);var T=X(w,1),b=X(v,1);for(v=X(v,2),w=X(w,2);!N(v);){var y=b.add(v);y.l(E)<=0&&(T=T.add(w),b=y),v=X(v,1),w=X(w,1)}return _=U(E,T.j(_)),new z(T,_)}for(T=m;E.l(_)>=0;){for(w=Math.max(1,Math.floor(E.m()/_.m())),v=Math.ceil(Math.log(w)/Math.LN2),v=v<=48?1:Math.pow(2,v-48),b=d(w),y=b.j(_);O(y)||y.l(E)>0;)w-=v,b=d(w),y=b.j(_);N(b)&&(b=I),T=T.add(b),E=U(E,y)}return new z(T,E)}n.B=function(E){return W(this,E).h},n.and=function(E){let _=Math.max(this.g.length,E.g.length),w=[];for(let v=0;v<_;v++)w[v]=this.i(v)&E.i(v);return new a(w,this.h&E.h)},n.or=function(E){let _=Math.max(this.g.length,E.g.length),w=[];for(let v=0;v<_;v++)w[v]=this.i(v)|E.i(v);return new a(w,this.h|E.h)},n.xor=function(E){let _=Math.max(this.g.length,E.g.length),w=[];for(let v=0;v<_;v++)w[v]=this.i(v)^E.i(v);return new a(w,this.h^E.h)};function te(E){let _=E.g.length+1,w=[];for(let v=0;v<_;v++)w[v]=E.i(v)<<1|E.i(v-1)>>>31;return new a(w,E.h)}function X(E,_){let w=_>>5;_%=32;let v=E.g.length-w,T=[];for(let b=0;b<v;b++)T[b]=_>0?E.i(b+w)>>>_|E.i(b+w+1)<<32-_:E.i(b+w);return new a(T,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Sc=$f.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,_t=$f.Integer=a}).apply(typeof zf!="undefined"?zf:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Hs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},yt={};var Rc,Tw,qn,Pc,Xr,Ws,Cc,kc,Nc;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hs=="object"&&Hs];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var A=o[p];if(!(A in h))break e;h=h[A]}o=o[o.length-1],p=h[o],u=u(p),u!=p&&u!=null&&e(h,o,{configurable:!0,writable:!0,value:u})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(u){var h=[],p;for(p in u)Object.prototype.hasOwnProperty.call(u,p)&&h.push([p,u[p]]);return h}});var s=s||{},a=this||self;function c(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function l(o,u,h){return o.call.apply(o.bind,arguments)}function d(o,u,h){return d=l,d.apply(null,arguments)}function f(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function m(o,u){function h(){}h.prototype=u.prototype,o.Z=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Ob=function(p,A,S){for(var D=Array(arguments.length-2),j=2;j<arguments.length;j++)D[j-2]=arguments[j];return u.prototype[A].apply(p,D)}}var I=typeof AsyncContext!="undefined"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function R(o){let u=o.length;if(u>0){let h=Array(u);for(let p=0;p<u;p++)h[p]=o[p];return h}return[]}function N(o,u){for(let p=1;p<arguments.length;p++){let A=arguments[p];var h=typeof A;if(h=h!="object"?h:A?Array.isArray(A)?"array":h:"null",h=="array"||h=="object"&&typeof A.length=="number"){h=o.length||0;let S=A.length||0;o.length=h+S;for(let D=0;D<S;D++)o[h+D]=A[D]}else o.push(A)}}class O{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function C(o){a.setTimeout(()=>{throw o},0)}function U(){var o=E;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class ${constructor(){this.h=this.g=null}add(u,h){let p=z.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var z=new O(()=>new W,o=>o.reset());class W{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let te,X=!1,E=new $,_=()=>{let o=Promise.resolve(void 0);te=()=>{o.then(w)}};function w(){for(var o;o=U();){try{o.h.call(o.g)}catch(h){C(h)}var u=z;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}X=!1}function v(){this.u=this.u,this.C=this.C}v.prototype.u=!1,v.prototype.dispose=function(){this.u||(this.u=!0,this.N())},v.prototype[Symbol.dispose]=function(){this.dispose()},v.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let h=()=>{};a.addEventListener("test",h,u),a.removeEventListener("test",h,u)}catch(h){}return o})();function y(o){return/^[\s\xa0]*$/.test(o)}function ke(o,u){T.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}m(ke,T),ke.prototype.init=function(o,u){let h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);let o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Pt="closure_listenable_"+(Math.random()*1e6|0),kg=0;function Ng(o,u,h,p,A){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=A,this.key=++kg,this.da=this.fa=!1}function Ui(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Bi(o,u,h){for(let p in o)u.call(h,o[p],p,o)}function Dg(o,u){for(let h in o)u.call(void 0,o[h],h,o)}function sh(o){let u={};for(let h in o)u[h]=o[h];return u}let oh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ah(o,u){let h,p;for(let A=1;A<arguments.length;A++){p=arguments[A];for(h in p)o[h]=p[h];for(let S=0;S<oh.length;S++)h=oh[S],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function qi(o){this.src=o,this.g={},this.h=0}qi.prototype.add=function(o,u,h,p,A){let S=o.toString();o=this.g[S],o||(o=this.g[S]=[],this.h++);let D=ia(o,u,p,A);return D>-1?(u=o[D],h||(u.fa=!1)):(u=new Ng(u,this.src,S,!!p,A),u.fa=h,o.push(u)),u};function ra(o,u){let h=u.type;if(h in o.g){var p=o.g[h],A=Array.prototype.indexOf.call(p,u,void 0),S;(S=A>=0)&&Array.prototype.splice.call(p,A,1),S&&(Ui(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function ia(o,u,h,p){for(let A=0;A<o.length;++A){let S=o[A];if(!S.da&&S.listener==u&&S.capture==!!h&&S.ha==p)return A}return-1}var sa="closure_lm_"+(Math.random()*1e6|0),oa={};function ch(o,u,h,p,A){if(p&&p.once)return lh(o,u,h,p,A);if(Array.isArray(u)){for(let S=0;S<u.length;S++)ch(o,u[S],h,p,A);return null}return h=la(h),o&&o[Pt]?o.J(u,h,c(p)?!!p.capture:!!p,A):uh(o,u,h,!1,p,A)}function uh(o,u,h,p,A,S){if(!u)throw Error("Invalid event type");let D=c(A)?!!A.capture:!!A,j=ca(o);if(j||(o[sa]=j=new qi(o)),h=j.add(u,h,p,D,S),h.proxy)return h;if(p=Og(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)b||(A=D),A===void 0&&(A=!1),o.addEventListener(u.toString(),p,A);else if(o.attachEvent)o.attachEvent(dh(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Og(){function o(h){return u.call(o.src,o.listener,h)}let u=xg;return o}function lh(o,u,h,p,A){if(Array.isArray(u)){for(let S=0;S<u.length;S++)lh(o,u[S],h,p,A);return null}return h=la(h),o&&o[Pt]?o.K(u,h,c(p)?!!p.capture:!!p,A):uh(o,u,h,!0,p,A)}function hh(o,u,h,p,A){if(Array.isArray(u))for(var S=0;S<u.length;S++)hh(o,u[S],h,p,A);else p=c(p)?!!p.capture:!!p,h=la(h),o&&o[Pt]?(o=o.i,S=String(u).toString(),S in o.g&&(u=o.g[S],h=ia(u,h,p,A),h>-1&&(Ui(u[h]),Array.prototype.splice.call(u,h,1),u.length==0&&(delete o.g[S],o.h--)))):o&&(o=ca(o))&&(u=o.g[u.toString()],o=-1,u&&(o=ia(u,h,p,A)),(h=o>-1?u[o]:null)&&aa(h))}function aa(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Pt])ra(u.i,o);else{var h=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(h,p,o.capture):u.detachEvent?u.detachEvent(dh(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=ca(u))?(ra(h,o),h.h==0&&(h.src=null,u[sa]=null)):Ui(o)}}}function dh(o){return o in oa?oa[o]:oa[o]="on"+o}function xg(o,u){if(o.da)o=!0;else{u=new ke(u,this);let h=o.listener,p=o.ha||o.src;o.fa&&aa(o),o=h.call(p,u)}return o}function ca(o){return o=o[sa],o instanceof qi?o:null}var ua="__closure_events_fn_"+(Math.random()*1e9>>>0);function la(o){return typeof o=="function"?o:(o[ua]||(o[ua]=function(u){return o.handleEvent(u)}),o[ua])}function we(){v.call(this),this.i=new qi(this),this.M=this,this.G=null}m(we,v),we.prototype[Pt]=!0,we.prototype.removeEventListener=function(o,u,h,p){hh(this,o,u,h,p)};function Re(o,u){var h,p=o.G;if(p)for(h=[];p;p=p.G)h.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new T(u,o);else if(u instanceof T)u.target=u.target||o;else{var A=u;u=new T(p,o),ah(u,A)}A=!0;let S,D;if(h)for(D=h.length-1;D>=0;D--)S=u.g=h[D],A=zi(S,p,!0,u)&&A;if(S=u.g=o,A=zi(S,p,!0,u)&&A,A=zi(S,p,!1,u)&&A,h)for(D=0;D<h.length;D++)S=u.g=h[D],A=zi(S,p,!1,u)&&A}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var o=this.i;for(let u in o.g){let h=o.g[u];for(let p=0;p<h.length;p++)Ui(h[p]);delete o.g[u],o.h--}}this.G=null},we.prototype.J=function(o,u,h,p){return this.i.add(String(o),u,!1,h,p)},we.prototype.K=function(o,u,h,p){return this.i.add(String(o),u,!0,h,p)};function zi(o,u,h,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let A=!0;for(let S=0;S<u.length;++S){let D=u[S];if(D&&!D.da&&D.capture==h){let j=D.listener,fe=D.ha||D.src;D.fa&&ra(o.i,D),A=j.call(fe,p)!==!1&&A}}return A&&!p.defaultPrevented}function Vg(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=d(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function fh(o){o.g=Vg(()=>{o.g=null,o.i&&(o.i=!1,fh(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class Lg extends v{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:fh(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(o){v.call(this),this.h=o,this.g={}}m(_r,v);var ph=[];function mh(o){Bi(o.g,function(u,h){this.g.hasOwnProperty(h)&&aa(u)},o),o.g={}}_r.prototype.N=function(){_r.Z.N.call(this),mh(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ha=a.JSON.stringify,Mg=a.JSON.parse,Fg=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function gh(){}function _h(){}var yr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function da(){T.call(this,"d")}m(da,T);function fa(){T.call(this,"c")}m(fa,T);var Xt={},yh=null;function $i(){return yh=yh||new we}Xt.Ia="serverreachability";function Ih(o){T.call(this,Xt.Ia,o)}m(Ih,T);function Ir(o){let u=$i();Re(u,new Ih(u))}Xt.STAT_EVENT="statevent";function wh(o,u){T.call(this,Xt.STAT_EVENT,o),this.stat=u}m(wh,T);function Pe(o){let u=$i();Re(u,new wh(u,o))}Xt.Ja="timingevent";function Eh(o,u){T.call(this,Xt.Ja,o),this.size=u}m(Eh,T);function wr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function Ug(o,u,h,p,A,S){o.info(function(){if(o.g)if(S){var D="",j=S.split("&");for(let Z=0;Z<j.length;Z++){var fe=j[Z].split("=");if(fe.length>1){let ge=fe[0];fe=fe[1];let Ge=ge.split("_");D=Ge.length>=2&&Ge[1]=="type"?D+(ge+"="+fe+"&"):D+(ge+"=redacted&")}}}else D=null;else D=S;return"XMLHTTP REQ ("+p+") [attempt "+A+"]: "+u+"\n"+h+"\n"+D})}function Bg(o,u,h,p,A,S,D){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+A+"]: "+u+"\n"+h+"\n"+S+" "+D})}function Cn(o,u,h,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+zg(o,h)+(p?" "+p:"")})}function qg(o,u){o.info(function(){return"TIMEOUT: "+u})}Er.prototype.info=function(){};function zg(o,u){if(!o.g)return u;if(!u)return null;try{let S=JSON.parse(u);if(S){for(o=0;o<S.length;o++)if(Array.isArray(S[o])){var h=S[o];if(!(h.length<2)){var p=h[1];if(Array.isArray(p)&&!(p.length<1)){var A=p[0];if(A!="noop"&&A!="stop"&&A!="close")for(let D=1;D<p.length;D++)p[D]=""}}}}return ha(S)}catch(S){return u}}var ji={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Th={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vh;function pa(){}m(pa,gh),pa.prototype.g=function(){return new XMLHttpRequest},vh=new pa;function Tr(o){return encodeURIComponent(String(o))}function $g(o){var u=1;o=o.split(":");let h=[];for(;u>0&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function Ct(o,u,h,p){this.j=o,this.i=u,this.l=h,this.S=p||1,this.V=new _r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ah}function Ah(){this.i=null,this.g="",this.h=!1}var bh={},ma={};function ga(o,u,h){o.M=1,o.A=Hi(je(u)),o.u=h,o.R=!0,Sh(o,null)}function Sh(o,u){o.F=Date.now(),Gi(o),o.B=je(o.A);var h=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),Uh(h.i,"t",p),o.C=0,h=o.j.L,o.h=new Ah,o.g=rd(o.j,h?u:null,!o.u),o.P>0&&(o.O=new Lg(d(o.Y,o,o.g),o.P)),u=o.V,h=o.g,p=o.ba;var A="readystatechange";Array.isArray(A)||(A&&(ph[0]=A.toString()),A=ph);for(let S=0;S<A.length;S++){let D=ch(h,A[S],p||u.handleEvent,!1,u.h||u);if(!D)break;u.g[D.key]=D}u=o.J?sh(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),Ir(),Ug(o.i,o.v,o.B,o.l,o.S,o.u)}Ct.prototype.ba=function(o){o=o.target;let u=this.O;u&&Dt(o)==3?u.j():this.Y(o)},Ct.prototype.Y=function(o){try{if(o==this.g)e:{let j=Dt(this.g),fe=this.g.ya(),Z=this.g.ca();if(!(j<3)&&(j!=3||this.g&&(this.h.h||this.g.la()||Hh(this.g)))){this.K||j!=4||fe==7||(fe==8||Z<=0?Ir(3):Ir(2)),_a(this);var u=this.g.ca();this.X=u;var h=jg(this);if(this.o=u==200,Bg(this.i,this.v,this.B,this.l,this.S,j,u),this.o){if(this.U&&!this.L){t:{if(this.g){var p,A=this.g;if((p=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(p)){var S=p;break t}}S=null}if(o=S)Cn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ya(this,o);else{this.o=!1,this.m=3,Pe(12),Zt(this),vr(this);break e}}if(this.R){o=!0;let ge;for(;!this.K&&this.C<h.length;)if(ge=Gg(this,h),ge==ma){j==4&&(this.m=4,Pe(14),o=!1),Cn(this.i,this.l,null,"[Incomplete Response]");break}else if(ge==bh){this.m=4,Pe(15),Cn(this.i,this.l,h,"[Invalid Chunk]"),o=!1;break}else Cn(this.i,this.l,ge,null),ya(this,ge);if(Rh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),j!=4||h.length!=0||this.h.h||(this.m=1,Pe(16),o=!1),this.o=this.o&&o,!o)Cn(this.i,this.l,h,"[Invalid Chunked Response]"),Zt(this),vr(this);else if(h.length>0&&!this.W){this.W=!0;var D=this.j;D.g==this&&D.aa&&!D.P&&(D.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),ba(D),D.P=!0,Pe(11))}}else Cn(this.i,this.l,h,null),ya(this,h);j==4&&Zt(this),this.o&&!this.K&&(j==4?Zh(this.j,this):(this.o=!1,Gi(this)))}else s_(this.g),u==400&&h.indexOf("Unknown SID")>0?(this.m=3,Pe(12)):(this.m=0,Pe(13)),Zt(this),vr(this)}}}catch(j){}finally{}};function jg(o){if(!Rh(o))return o.g.la();let u=Hh(o.g);if(u==="")return"";let h="",p=u.length,A=Dt(o.g)==4;if(!o.h.i){if(typeof TextDecoder=="undefined")return Zt(o),vr(o),"";o.h.i=new a.TextDecoder}for(let S=0;S<p;S++)o.h.h=!0,h+=o.h.i.decode(u[S],{stream:!(A&&S==p-1)});return u.length=0,o.h.g+=h,o.C=0,o.h.g}function Rh(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Gg(o,u){var h=o.C,p=u.indexOf("\n",h);return p==-1?ma:(h=Number(u.substring(h,p)),isNaN(h)?bh:(p+=1,p+h>u.length?ma:(u=u.slice(p,p+h),o.C=p+h,u)))}Ct.prototype.cancel=function(){this.K=!0,Zt(this)};function Gi(o){o.T=Date.now()+o.H,Ph(o,o.H)}function Ph(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=wr(d(o.aa,o),u)}function _a(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Ct.prototype.aa=function(){this.D=null;let o=Date.now();o-this.T>=0?(qg(this.i,this.B),this.M!=2&&(Ir(),Pe(17)),Zt(this),this.m=2,vr(this)):Ph(this,this.T-o)};function vr(o){o.j.I==0||o.K||Zh(o.j,o)}function Zt(o){_a(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,mh(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function ya(o,u){try{var h=o.j;if(h.I!=0&&(h.g==o||Ia(h.h,o))){if(!o.L&&Ia(h.h,o)&&h.I==3){try{var p=h.Ba.g.parse(u)}catch(Z){p=null}if(Array.isArray(p)&&p.length==3){var A=p;if(A[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<o.F)Xi(h),Ji(h);else break e;Aa(h),Pe(18)}}else h.xa=A[1],0<h.xa-h.K&&A[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=wr(d(h.Va,h),6e3));Nh(h.h)<=1&&h.ta&&(h.ta=void 0)}else tn(h,11)}else if((o.L||h.g==o)&&Xi(h),!y(u))for(A=h.Ba.g.parse(u),u=0;u<A.length;u++){let Z=A[u],ge=Z[0];if(!(ge<=h.K))if(h.K=ge,Z=Z[1],h.I==2)if(Z[0]=="c"){h.M=Z[1],h.ba=Z[2];let Ge=Z[3];Ge!=null&&(h.ka=Ge,h.j.info("VER="+h.ka));let nn=Z[4];nn!=null&&(h.za=nn,h.j.info("SVER="+h.za));let Ot=Z[5];Ot!=null&&typeof Ot=="number"&&Ot>0&&(p=1.5*Ot,h.O=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let xt=o.g;if(xt){let es=xt.g?xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(es){var S=p.h;S.g||es.indexOf("spdy")==-1&&es.indexOf("quic")==-1&&es.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(wa(S,S.h),S.h=null))}if(p.G){let Sa=xt.g?xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Sa&&(p.wa=Sa,ee(p.J,p.G,Sa))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-o.F,h.j.info("Handshake RTT: "+h.T+"ms")),p=h;var D=o;if(p.na=nd(p,p.L?p.ba:null,p.W),D.L){Dh(p.h,D);var j=D,fe=p.O;fe&&(j.H=fe),j.D&&(_a(j),Gi(j)),p.g=D}else Yh(p);h.i.length>0&&Yi(h)}else Z[0]!="stop"&&Z[0]!="close"||tn(h,7);else h.I==3&&(Z[0]=="stop"||Z[0]=="close"?Z[0]=="stop"?tn(h,7):va(h):Z[0]!="noop"&&h.l&&h.l.qa(Z),h.A=0)}}Ir(4)}catch(Z){}}var Hg=class{constructor(o,u){this.g=o,this.map=u}};function Ch(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kh(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Nh(o){return o.h?1:o.g?o.g.size:0}function Ia(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function wa(o,u){o.g?o.g.add(u):o.h=u}function Dh(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Ch.prototype.cancel=function(){if(this.i=Oh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function Oh(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let h of o.g.values())u=u.concat(h.G);return u}return R(o.i)}var xh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wg(o,u){if(o){o=o.split("&");for(let h=0;h<o.length;h++){let p=o[h].indexOf("="),A,S=null;p>=0?(A=o[h].substring(0,p),S=o[h].substring(p+1)):A=o[h],u(A,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function kt(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof kt?(this.l=o.l,Ar(this,o.j),this.o=o.o,this.g=o.g,br(this,o.u),this.h=o.h,Ea(this,Bh(o.i)),this.m=o.m):o&&(u=String(o).match(xh))?(this.l=!1,Ar(this,u[1]||"",!0),this.o=Sr(u[2]||""),this.g=Sr(u[3]||"",!0),br(this,u[4]),this.h=Sr(u[5]||"",!0),Ea(this,u[6]||"",!0),this.m=Sr(u[7]||"")):(this.l=!1,this.i=new Pr(null,this.l))}kt.prototype.toString=function(){let o=[];var u=this.j;u&&o.push(Rr(u,Vh,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Rr(u,Vh,!0),"@"),o.push(Tr(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&o.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Rr(h,h.charAt(0)=="/"?Jg:Qg,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Rr(h,Xg)),o.join("")},kt.prototype.resolve=function(o){let u=je(this),h=!!o.j;h?Ar(u,o.j):h=!!o.o,h?u.o=o.o:h=!!o.g,h?u.g=o.g:h=o.u!=null;var p=o.h;if(h)br(u,o.u);else if(h=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var A=u.h.lastIndexOf("/");A!=-1&&(p=u.h.slice(0,A+1)+p)}if(A=p,A==".."||A==".")p="";else if(A.indexOf("./")!=-1||A.indexOf("/.")!=-1){p=A.lastIndexOf("/",0)==0,A=A.split("/");let S=[];for(let D=0;D<A.length;){let j=A[D++];j=="."?p&&D==A.length&&S.push(""):j==".."?((S.length>1||S.length==1&&S[0]!="")&&S.pop(),p&&D==A.length&&S.push("")):(S.push(j),p=!0)}p=S.join("/")}else p=A}return h?u.h=p:h=o.i.toString()!=="",h?Ea(u,Bh(o.i)):h=!!o.m,h&&(u.m=o.m),u};function je(o){return new kt(o)}function Ar(o,u,h){o.j=h?Sr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function br(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function Ea(o,u,h){u instanceof Pr?(o.i=u,Zg(o.i,o.l)):(h||(u=Rr(u,Yg)),o.i=new Pr(u,o.l))}function ee(o,u,h){o.i.set(u,h)}function Hi(o){return ee(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Sr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Rr(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Kg),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Kg(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Vh=/[#\/\?@]/g,Qg=/[#\?:]/g,Jg=/[#\?]/g,Yg=/[#\?@]/g,Xg=/#/g;function Pr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function en(o){o.g||(o.g=new Map,o.h=0,o.i&&Wg(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=Pr.prototype,n.add=function(o,u){en(this),this.i=null,o=kn(this,o);let h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function Lh(o,u){en(o),u=kn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Mh(o,u){return en(o),u=kn(o,u),o.g.has(u)}n.forEach=function(o,u){en(this),this.g.forEach(function(h,p){h.forEach(function(A){o.call(u,A,p,this)},this)},this)};function Fh(o,u){en(o);let h=[];if(typeof u=="string")Mh(o,u)&&(h=h.concat(o.g.get(kn(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)h=h.concat(o[u]);return h}n.set=function(o,u){return en(this),this.i=null,o=kn(this,o),Mh(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=Fh(this,o),o.length>0?String(o[0]):u):u};function Uh(o,u,h){Lh(o,u),h.length>0&&(o.i=null,o.g.set(kn(o,u),R(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(let p=0;p<u.length;p++){var h=u[p];let A=Tr(h);h=Fh(this,h);for(let S=0;S<h.length;S++){let D=A;h[S]!==""&&(D+="="+Tr(h[S])),o.push(D)}}return this.i=o.join("&")};function Bh(o){let u=new Pr;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function kn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Zg(o,u){u&&!o.j&&(en(o),o.i=null,o.g.forEach(function(h,p){let A=p.toLowerCase();p!=A&&(Lh(this,p),Uh(this,A,h))},o)),o.j=u}function e_(o,u){let h=new Er;if(a.Image){let p=new Image;p.onload=f(Nt,h,"TestLoadImage: loaded",!0,u,p),p.onerror=f(Nt,h,"TestLoadImage: error",!1,u,p),p.onabort=f(Nt,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=f(Nt,h,"TestLoadImage: timeout",!1,u,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function t_(o,u){let h=new Er,p=new AbortController,A=setTimeout(()=>{p.abort(),Nt(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(S=>{clearTimeout(A),S.ok?Nt(h,"TestPingServer: ok",!0,u):Nt(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),Nt(h,"TestPingServer: error",!1,u)})}function Nt(o,u,h,p,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),p(h)}catch(S){}}function n_(){this.g=new Fg}function Wi(o){this.i=o.Sb||null,this.h=o.ab||!1}m(Wi,gh),Wi.prototype.g=function(){return new Ki(this.i,this.h)};function Ki(o,u){we.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Ki,we),n=Ki.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,kr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,kr(this)),this.g&&(this.readyState=3,kr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream!="undefined"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qh(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function qh(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Cr(this):kr(this),this.readyState==3&&qh(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,Cr(this))},n.Na=function(o){this.g&&(this.response=o,Cr(this))},n.ga=function(){this.g&&Cr(this)};function Cr(o){o.readyState=4,o.l=null,o.j=null,o.B=null,kr(o)}n.setRequestHeader=function(o,u){this.A.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join("\r\n")};function kr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function zh(o){let u="";return Bi(o,function(h,p){u+=p,u+=":",u+=h,u+="\r\n"}),u}function Ta(o,u,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=zh(h),typeof o=="string"?h!=null&&Tr(h):ee(o,u,h))}function se(o){we.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(se,we);var r_=/^https?$/i,i_=["POST","PUT"];n=se.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vh.g(),this.g.onreadystatechange=I(d(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(S){$h(this,S);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var A in p)h.set(A,p[A]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let S of p.keys())h.set(S,p.get(S));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),A=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(i_,u,void 0)>=0)||p||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,D]of h)this.g.setRequestHeader(S,D);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(S){$h(this,S)}};function $h(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,jh(o),Qi(o)}function jh(o){o.A||(o.A=!0,Re(o,"complete"),Re(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Re(this,"complete"),Re(this,"abort"),Qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),se.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Gh(this):this.Xa())},n.Xa=function(){Gh(this)};function Gh(o){if(o.h&&typeof s!="undefined"){if(o.v&&Dt(o)==4)setTimeout(o.Ca.bind(o),0);else if(Re(o,"readystatechange"),Dt(o)==4){o.h=!1;try{let S=o.ca();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var p;if(p=S===0){let D=String(o.D).match(xh)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),p=!r_.test(D?D.toLowerCase():"")}h=p}if(h)Re(o,"complete"),Re(o,"success");else{o.o=6;try{var A=Dt(o)>2?o.g.statusText:""}catch(D){A=""}o.l=A+" ["+o.ca()+"]",jh(o)}}finally{Qi(o)}}}}function Qi(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);let h=o.g;o.g=null,u||Re(o,"ready");try{h.onreadystatechange=null}catch(p){}}}n.isActive=function(){return!!this.g};function Dt(o){return o.g?o.g.readyState:0}n.ca=function(){try{return Dt(this)>2?this.g.status:-1}catch(o){return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch(o){return""}},n.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Mg(u)}};function Hh(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch(u){return null}}function s_(o){let u={};o=(o.g&&Dt(o)>=2&&o.g.getAllResponseHeaders()||"").split("\r\n");for(let p=0;p<o.length;p++){if(y(o[p]))continue;var h=$g(o[p]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=u[A]||[];u[A]=S,S.push(h)}Dg(u,function(p){return p.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nr(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function Wh(o){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nr("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nr("baseRetryDelayMs",5e3,o),this.Za=Nr("retryDelaySeedMs",1e4,o),this.Ta=Nr("forwardChannelMaxRetries",2,o),this.va=Nr("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Ch(o&&o.concurrentRequestLimit),this.Ba=new n_,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Wh.prototype,n.ka=8,n.I=1,n.connect=function(o,u,h,p){Pe(0),this.W=o,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.J=nd(this,null,this.W),Yi(this)};function va(o){if(Kh(o),o.I==3){var u=o.V++,h=je(o.J);if(ee(h,"SID",o.M),ee(h,"RID",u),ee(h,"TYPE","terminate"),Dr(o,h),u=new Ct(o,o.j,u),u.M=2,u.A=Hi(je(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(u.A.toString(),"")}catch(p){}!h&&a.Image&&(new Image().src=u.A,h=!0),h||(u.g=rd(u.j,null),u.g.ea(u.A)),u.F=Date.now(),Gi(u)}td(o)}function Ji(o){o.g&&(ba(o),o.g.cancel(),o.g=null)}function Kh(o){Ji(o),o.v&&(a.clearTimeout(o.v),o.v=null),Xi(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Yi(o){if(!kh(o.h)&&!o.m){o.m=!0;var u=o.Ea;te||_(),X||(te(),X=!0),E.add(u,o),o.D=0}}function o_(o,u){return Nh(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=wr(d(o.Ea,o,u),ed(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;let A=new Ct(this,this.j,o),S=this.o;if(this.U&&(S?(S=sh(S),ah(S,this.U)):S=this.U),this.u!==null||this.R||(A.J=S,S=null),this.S)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,u>4096){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=Jh(this,A,u),h=je(this.J),ee(h,"RID",o),ee(h,"CVER",22),this.G&&ee(h,"X-HTTP-Session-Id",this.G),Dr(this,h),S&&(this.R?u="headers="+Tr(zh(S))+"&"+u:this.u&&Ta(h,this.u,S)),wa(this.h,A),this.Ra&&ee(h,"TYPE","init"),this.S?(ee(h,"$req",u),ee(h,"SID","null"),A.U=!0,ga(A,h,null)):ga(A,h,u),this.I=2}}else this.I==3&&(o?Qh(this,o):this.i.length==0||kh(this.h)||Qh(this))};function Qh(o,u){var h;u?h=u.l:h=o.V++;let p=je(o.J);ee(p,"SID",o.M),ee(p,"RID",h),ee(p,"AID",o.K),Dr(o,p),o.u&&o.o&&Ta(p,o.u,o.o),h=new Ct(o,o.j,h,o.D+1),o.u===null&&(h.J=o.o),u&&(o.i=u.G.concat(o.i)),u=Jh(o,h,1e3),h.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),wa(o.h,h),ga(h,p,u)}function Dr(o,u){o.H&&Bi(o.H,function(h,p){ee(u,p,h)}),o.l&&Bi({},function(h,p){ee(u,p,h)})}function Jh(o,u,h){h=Math.min(o.i.length,h);let p=o.l?d(o.l.Ka,o.l,o):null;e:{var A=o.i;let j=-1;for(;;){let fe=["count="+h];j==-1?h>0?(j=A[0].g,fe.push("ofs="+j)):j=0:fe.push("ofs="+j);let Z=!0;for(let ge=0;ge<h;ge++){var S=A[ge].g;let Ge=A[ge].map;if(S-=j,S<0)j=Math.max(0,A[ge].g-100),Z=!1;else try{S="req"+S+"_"||"";try{var D=Ge instanceof Map?Ge:Object.entries(Ge);for(let[nn,Ot]of D){let xt=Ot;c(Ot)&&(xt=ha(Ot)),fe.push(S+nn+"="+encodeURIComponent(xt))}}catch(nn){throw fe.push(S+"type="+encodeURIComponent("_badmap")),nn}}catch(nn){p&&p(Ge)}}if(Z){D=fe.join("&");break e}}D=void 0}return o=o.i.splice(0,h),u.G=o,D}function Yh(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;te||_(),X||(te(),X=!0),E.add(u,o),o.A=0}}function Aa(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=wr(d(o.Da,o),ed(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,Xh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=wr(d(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pe(10),Ji(this),Xh(this))};function ba(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Xh(o){o.g=new Ct(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=je(o.na);ee(u,"RID","rpc"),ee(u,"SID",o.M),ee(u,"AID",o.K),ee(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&ee(u,"TO",o.ia),ee(u,"TYPE","xmlhttp"),Dr(o,u),o.u&&o.o&&Ta(u,o.u,o.o),o.O&&(o.g.H=o.O);var h=o.g;o=o.ba,h.M=1,h.A=Hi(je(u)),h.u=null,h.R=!0,Sh(h,o)}n.Va=function(){this.C!=null&&(this.C=null,Ji(this),Aa(this),Pe(19))};function Xi(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Zh(o,u){var h=null;if(o.g==u){Xi(o),ba(o),o.g=null;var p=2}else if(Ia(o.h,u))h=u.G,Dh(o.h,u),p=1;else return;if(o.I!=0){if(u.o)if(p==1){h=u.u?u.u.length:0,u=Date.now()-u.F;var A=o.D;p=$i(),Re(p,new Eh(p,h)),Yi(o)}else Yh(o);else if(A=u.m,A==3||A==0&&u.X>0||!(p==1&&o_(o,u)||p==2&&Aa(o)))switch(h&&h.length>0&&(u=o.h,u.i=u.i.concat(h)),A){case 1:tn(o,5);break;case 4:tn(o,10);break;case 3:tn(o,6);break;default:tn(o,2)}}}function ed(o,u){let h=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(h*=2),h*u}function tn(o,u){if(o.j.info("Error code "+u),u==2){var h=d(o.bb,o),p=o.Ua;let A=!p;p=new kt(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ar(p,"https"),Hi(p),A?e_(p.toString(),h):t_(p.toString(),h)}else Pe(2);o.I=0,o.l&&o.l.pa(u),td(o),Kh(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))};function td(o){if(o.I=0,o.ja=[],o.l){let u=Oh(o.h);(u.length!=0||o.i.length!=0)&&(N(o.ja,u),N(o.ja,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.oa()}}function nd(o,u,h){var p=h instanceof kt?je(h):new kt(h);if(p.g!="")u&&(p.g=u+"."+p.g),br(p,p.u);else{var A=a.location;p=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;let S=new kt(null);p&&Ar(S,p),u&&(S.g=u),A&&br(S,A),h&&(S.h=h),p=S}return h=o.G,u=o.wa,h&&u&&ee(p,h,u),ee(p,"VER",o.ka),Dr(o,p),p}function rd(o,u,h){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new se(new Wi({ab:h})):new se(o.ma),u.Fa(o.L),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function id(){}n=id.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Zi(){}Zi.prototype.g=function(o,u){return new Oe(o,u)};function Oe(o,u){we.call(this),this.g=new Wh(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!y(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!y(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Nn(this)}m(Oe,we),Oe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Oe.prototype.close=function(){va(this.g)},Oe.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.v&&(h={},h.__data__=ha(o),o=h);u.i.push(new Hg(u.Ya++,o)),u.I==3&&Yi(u)},Oe.prototype.N=function(){this.g.l=null,delete this.j,va(this.g),delete this.g,Oe.Z.N.call(this)};function sd(o){da.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let h in u){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}m(sd,da);function od(){fa.call(this),this.status=1}m(od,fa);function Nn(o){this.g=o}m(Nn,id),Nn.prototype.ra=function(){Re(this.g,"a")},Nn.prototype.qa=function(o){Re(this.g,new sd(o))},Nn.prototype.pa=function(o){Re(this.g,new od)},Nn.prototype.oa=function(){Re(this.g,"b")},Zi.prototype.createWebChannel=Zi.prototype.g,Oe.prototype.send=Oe.prototype.o,Oe.prototype.open=Oe.prototype.m,Oe.prototype.close=Oe.prototype.close,Nc=yt.createWebChannelTransport=function(){return new Zi},kc=yt.getStatEventTarget=function(){return $i()},Cc=yt.Event=Xt,Ws=yt.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,Xr=yt.ErrorCode=ji,Th.COMPLETE="complete",Pc=yt.EventType=Th,_h.EventType=yr,yr.OPEN="a",yr.CLOSE="b",yr.ERROR="c",yr.MESSAGE="d",we.prototype.listen=we.prototype.J,qn=yt.WebChannel=_h,Tw=yt.FetchXmlHttpFactory=Wi,se.prototype.listenOnce=se.prototype.K,se.prototype.getLastError=se.prototype.Ha,se.prototype.getLastErrorCode=se.prototype.ya,se.prototype.getStatus=se.prototype.ca,se.prototype.getResponseJson=se.prototype.La,se.prototype.getResponseText=se.prototype.la,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Fa,Rc=yt.XhrIo=se}).apply(typeof Hs!="undefined"?Hs:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var jf="@firebase/firestore",Gf="4.9.2";var ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ye.UNAUTHENTICATED=new ye(null),ye.GOOGLE_CREDENTIALS=new ye("google-credentials-uid"),ye.FIRST_PARTY=new ye("first-party-uid"),ye.MOCK_USER=new ye("mock-user");var hr="12.3.0";var gn=new Lt("@firebase/firestore");function zn(){return gn.logLevel}function V(n,...e){if(gn.logLevel<=H.DEBUG){let t=e.map(vl);gn.debug("Firestore (".concat(hr,"): ").concat(n),...t)}}function It(n,...e){if(gn.logLevel<=H.ERROR){let t=e.map(vl);gn.error("Firestore (".concat(hr,"): ").concat(n),...t)}}function Jn(n,...e){if(gn.logLevel<=H.WARN){let t=e.map(vl);gn.warn("Firestore (".concat(hr,"): ").concat(n),...t)}}function vl(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch(e){return n}}function F(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Vp(n,r,t)}function Vp(n,e,t){let r="FIRESTORE (".concat(hr,") INTERNAL ASSERTION FAILED: ").concat(e," (ID: ").concat(n.toString(16),")");if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch(i){r+=" CONTEXT: "+t}throw It(r),new Error(r)}function Y(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Vp(e,i,r)}function B(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends Ce{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}};var et=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}};var eo=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}},Fc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ye.UNAUTHENTICATED)))}shutdown(){}},Uc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},Bc=class{constructor(e){this.t=e,this.currentUser=ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Y(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new et;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new et,e.enqueueRetryable((()=>i(this.currentUser)))};let a=()=>{let l=s;e.enqueueRetryable((()=>g(this,null,function*(){yield l.promise,yield i(this.currentUser)})))},c=l=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new et)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string",31837,{l:r}),new eo(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string",2055,{h:e}),new ye(e)}},qc=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ye.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},zc=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qc(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ye.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},to=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$c=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Te(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Y(this.o===void 0,3512);let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(s.error.message));let a=s.token!==this.m;return this.m=s.token,V("FirebaseAppCheckTokenProvider","Received ".concat(a?"new":"existing"," token.")),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new to(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Y(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new to(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function vw(n){let e=typeof self!="undefined"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ii=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=vw(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function K(n,e){return n<e?-1:n>e?1:0}function jc(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return Dc(i)===Dc(s)?K(i,s):Dc(i)?1:-1}return K(n.length,e.length)}var Aw=55296,bw=57343;function Dc(n){let e=n.charCodeAt(0);return e>=Aw&&e<=bw}function Yn(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}var Hf="__name__",no=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&F(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&F(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return K(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):jc(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _t.fromString(e.substring(4,e.length-2))}},ie=class n extends no{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(P.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));t.push(...r.split("/").filter((i=>i.length>0)))}return new n(t)}static emptyPath(){return new n([])}},Sw=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ve=class n extends no{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Sw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hf}static keyField(){return new n([Hf])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new x(P.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new x(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new x(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new x(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var M=class n{constructor(e){this.path=e}static fromPath(e){return new n(ie.fromString(e))}static fromName(e){return new n(ie.fromString(e).popFirst(5))}static empty(){return new n(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ie(e.slice()))}};function Lp(n,e,t){if(!t)throw new x(P.INVALID_ARGUMENT,"Function ".concat(n,"() cannot be called with an empty ").concat(e,"."))}function Rw(n,e,t,r){if(e===!0&&r===!0)throw new x(P.INVALID_ARGUMENT,"".concat(n," and ").concat(t," cannot be used together."))}function Wf(n){if(!M.isDocumentKey(n))throw new x(P.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(n," has ").concat(n.length,"."))}function Kf(n){if(M.isDocumentKey(n))throw new x(P.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(n," has ").concat(n.length,"."))}function Mp(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Lo(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n="".concat(n.substring(0,20),"...")),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?"a custom ".concat(e," object"):"an object"}}return typeof n=="function"?"a function":F(12329,{type:typeof n})}function Fe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Lo(n);throw new x(P.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(t))}}return n}function he(n,e){let t={typeString:n};return e&&(t.value=e),t}function _i(n,e){if(!Mp(n))throw new x(P.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t="JSON missing required field: '".concat(r,"'");break}let a=n[r];if(i&&typeof a!==i){t="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(s!==void 0&&a!==s.value){t="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(t)throw new x(P.INVALID_ARGUMENT,t);return!0}var Qf=-62135596800,Jf=1e6,de=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Jf);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qf)throw new x(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jf}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_i(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Qf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};de._jsonSchemaVersion="firestore/timestamp/1.0",de._jsonSchema={type:he("string",de._jsonSchemaVersion),seconds:he("number"),nanoseconds:he("number")};var q=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new de(0,0))}static max(){return new n(new de(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var si=-1,Gc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Gc.UNKNOWN_ID=-1;function Pw(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new de(t+1,0):new de(t,r));return new _n(i,M.empty(),e)}function Cw(n){return new _n(n.readTime,n.key,si)}var _n=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(q.min(),M.empty(),si)}static max(){return new n(q.max(),M.empty(),si)}};function kw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=M.comparator(n.documentKey,e.documentKey),t!==0?t:K(n.largestBatchId,e.largestBatchId))}var Nw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};function dr(n){return g(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==Nw)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&F(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):n.reject(t)}static resolve(e){return new n(((t,r)=>{t(e)}))}static reject(e){return new n(((t,r)=>{r(e)}))}static waitFor(e){return new n(((t,r)=>{let i=0,s=0,a=!1;e.forEach((c=>{++i,c.next((()=>{++s,a&&s===i&&t()}),(l=>r(l)))})),a=!0,s===i&&t()}))}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next((i=>i?n.resolve(i):r()));return t}static forEach(e,t){let r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new n(((r,i)=>{let s=e.length,a=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next((f=>{a[d]=f,++c,c===s&&r(a)}),(f=>i(f)))}}))}static doWhile(e,t){return new n(((r,i)=>{let s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}};function Dw(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fr(n){return n.name==="IndexedDbTransactionError"}var Xn=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Xn.ce=-1;var Al=-1;function Mo(n){return n==null}function oi(n){return n===0&&1/n==-1/0}function Ow(n){return typeof n=="number"&&Number.isInteger(n)&&!oi(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Fp="";function xw(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Yf(e)),e=Vw(n.get(t),e);return Yf(e)}function Vw(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case Fp:t+="";break;default:t+=s}}return t}function Yf(n){return n+Fp+""}var Lw="remoteDocuments",Up="owner";var Bp="mutationQueues";var qp="mutations";var zp="documentMutations",Mw="remoteDocumentsV14";var $p="remoteDocumentGlobal";var jp="targets";var Gp="targetDocuments";var Hp="targetGlobal",Wp="collectionParents";var Kp="clientMetadata";var Qp="bundles";var Jp="namedQueries";var Fw="indexConfiguration";var Uw="indexState";var Bw="indexEntries";var Yp="documentOverlays";var qw="globals";var zw=[Bp,qp,zp,Lw,jp,Up,Hp,Gp,Kp,$p,Wp,Qp,Jp],Cb=[...zw,Yp],$w=[Bp,qp,zp,Mw,jp,Up,Hp,Gp,Kp,$p,Wp,Qp,Jp,Yp],jw=$w,Gw=[...jw,Fw,Uw,Bw];var kb=[...Gw,qw];function Xf(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jt(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Xp(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var oe=class n{constructor(e,t){this.comparator=e,this.root=t||tt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){let e=[];return this.inorderTraversal(((t,r)=>(e.push("".concat(t,":").concat(r)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hn(this.root,e,this.comparator,!0)}},Hn=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},tt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r!=null?r:n.RED,this.left=i!=null?i:n.EMPTY,this.right=s!=null?s:n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw F(43730,{key:this.key,value:this.value});if(this.right.isRed())throw F(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw F(27949);return e+(this.isRed()?0:1)}};tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw F(57766)}get value(){throw F(16141)}get color(){throw F(16727)}get left(){throw F(29726)}get right(){throw F(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new tt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ie=class n{constructor(e){this.comparator=e,this.data=new oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ro(this.data.getIterator())}getIteratorFrom(e){return new ro(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ro=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Me=class n{constructor(e){this.fields=e,e.sort(Ve.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ie(Ve.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yn(this.fields,e.fields,((t,r)=>t.isEqual(r)))}};var io=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var be=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new io("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};be.EMPTY_BYTE_STRING=new be("");var Hw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wt(n){if(Y(!!n,39018),typeof n=="string"){let e=0,t=Hw.exec(n);if(Y(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:re(n.seconds),nanos:re(n.nanos)}}function re(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Et(n){return typeof n=="string"?be.fromBase64String(n):be.fromUint8Array(n)}var Zp="server_timestamp",em="__type__",tm="__previous_value__",nm="__local_write_time__";function bl(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[em])==null?void 0:r.stringValue)===Zp}function Fo(n){let e=n.mapValue.fields[tm];return bl(e)?Fo(e):e}function ai(n){let e=wt(n.mapValue.fields[nm].timestampValue);return new de(e.seconds,e.nanos)}var Wc=class{constructor(e,t,r,i,s,a,c,l,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=f}},so="(default)",oo=class n{constructor(e,t){this.projectId=e,this.database=t||so}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===so}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Sl="__type__",rm="__max__",Ks={mapValue:{fields:{__type__:{stringValue:rm}}}},Rl="__vector__",Zn="value";function Ht(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bl(n)?4:sm(n)?9007199254740991:im(n)?10:11:F(28295,{value:n})}function st(n,e){if(n===e)return!0;let t=Ht(n);if(t!==Ht(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ai(n).isEqual(ai(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=wt(i.timestampValue),c=wt(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Et(i.bytesValue).isEqual(Et(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return re(i.geoPointValue.latitude)===re(s.geoPointValue.latitude)&&re(i.geoPointValue.longitude)===re(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return re(i.integerValue)===re(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=re(i.doubleValue),c=re(s.doubleValue);return a===c?oi(a)===oi(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return Yn(n.arrayValue.values||[],e.arrayValue.values||[],st);case 10:case 11:return(function(i,s){let a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Xf(a)!==Xf(c))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!st(a[l],c[l])))return!1;return!0})(n,e);default:return F(52216,{left:n})}}function ci(n,e){return(n.values||[]).find((t=>st(t,e)))!==void 0}function er(n,e){if(n===e)return 0;let t=Ht(n),r=Ht(e);if(t!==r)return K(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return K(n.booleanValue,e.booleanValue);case 2:return(function(s,a){let c=re(s.integerValue||s.doubleValue),l=re(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(n,e);case 3:return Zf(n.timestampValue,e.timestampValue);case 4:return Zf(ai(n),ai(e));case 5:return jc(n.stringValue,e.stringValue);case 6:return(function(s,a){let c=Et(s),l=Et(a);return c.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){let c=s.split("/"),l=a.split("/");for(let d=0;d<c.length&&d<l.length;d++){let f=K(c[d],l[d]);if(f!==0)return f}return K(c.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){let c=K(re(s.latitude),re(a.latitude));return c!==0?c:K(re(s.longitude),re(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ep(n.arrayValue,e.arrayValue);case 10:return(function(s,a){var I,R,N,O;let c=s.fields||{},l=a.fields||{},d=(I=c[Zn])==null?void 0:I.arrayValue,f=(R=l[Zn])==null?void 0:R.arrayValue,m=K(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((O=f==null?void 0:f.values)==null?void 0:O.length)||0);return m!==0?m:ep(d,f)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Ks.mapValue&&a===Ks.mapValue)return 0;if(s===Ks.mapValue)return 1;if(a===Ks.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=a.fields||{},f=Object.keys(d);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){let I=jc(l[m],f[m]);if(I!==0)return I;let R=er(c[l[m]],d[f[m]]);if(R!==0)return R}return K(l.length,f.length)})(n.mapValue,e.mapValue);default:throw F(23264,{he:t})}}function Zf(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return K(n,e);let t=wt(n),r=wt(e),i=K(t.seconds,r.seconds);return i!==0?i:K(t.nanos,r.nanos)}function ep(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=er(t[i],r[i]);if(s)return s}return K(t.length,r.length)}function tr(n){return Kc(n)}function Kc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=wt(t);return"time(".concat(r.seconds,",").concat(r.nanos,")")})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Et(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return M.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Kc(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+="".concat(a,":").concat(Kc(t.fields[a]));return i+"}"})(n.mapValue):F(61005,{value:n})}function Ys(n){switch(Ht(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Fo(n);return e?16+Ys(e):16;case 5:return 2*n.stringValue.length;case 6:return Et(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Ys(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Jt(r.fields,((s,a)=>{i+=s.length+Ys(a)})),i})(n.mapValue);default:throw F(13486,{value:n})}}function tp(n,e){return{referenceValue:"projects/".concat(n.projectId,"/databases/").concat(n.database,"/documents/").concat(e.path.canonicalString())}}function Qc(n){return!!n&&"integerValue"in n}function Pl(n){return!!n&&"arrayValue"in n}function np(n){return!!n&&"nullValue"in n}function rp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xs(n){return!!n&&"mapValue"in n}function im(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Sl])==null?void 0:r.stringValue)===Rl}function ei(n){if(n.geoPointValue)return{geoPointValue:G({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:G({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Jt(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ei(r))),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ei(n.arrayValue.values[t]);return e}return G({},n)}function sm(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rm}var Db={mapValue:{fields:{[Sl]:{stringValue:Rl},[Zn]:{arrayValue:{}}}}};var xe=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ei(t)}setAll(e){let t=Ve.emptyPath(),r={},i=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=ei(a):i.push(c.lastSegment())}));let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Xs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return st(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Xs(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jt(t,((i,s)=>e[i]=s));for(let i of r)delete e[i]}clone(){return new n(ei(this.value))}};function om(n){let e=[];return Jt(n.fields,((t,r)=>{let i=new Ve([t]);if(Xs(r)){let s=om(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)})),new Me(e)}var ze=class n{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,q.min(),q.min(),q.min(),xe.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,q.min(),q.min(),xe.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,q.min(),q.min(),xe.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xe.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}};var nr=class{constructor(e,t){this.position=e,this.inclusive=t}};function ip(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=M.comparator(M.fromName(a.referenceValue),t.key):r=er(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sp(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!st(n.position[t],e.position[t]))return!1;return!0}var yn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Ww(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ao=class{},le=class n extends ao{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Yc(e,t,r):t==="array-contains"?new eu(e,r):t==="in"?new tu(e,r):t==="not-in"?new nu(e,r):t==="array-contains-any"?new ru(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Xc(e,r):new Zc(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(er(t,this.value)):t!==null&&Ht(this.value)===Ht(t)&&this.matchesComparison(er(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return F(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$e=class n extends ao{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return am(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function am(n){return n.op==="and"}function cm(n){return Kw(n)&&am(n)}function Kw(n){for(let e of n.filters)if(e instanceof $e)return!1;return!0}function Jc(n){if(n instanceof le)return n.field.canonicalString()+n.op.toString()+tr(n.value);if(cm(n))return n.filters.map((e=>Jc(e))).join(",");{let e=n.filters.map((t=>Jc(t))).join(",");return"".concat(n.op,"(").concat(e,")")}}function um(n,e){return n instanceof le?(function(r,i){return i instanceof le&&r.op===i.op&&r.field.isEqual(i.field)&&st(r.value,i.value)})(n,e):n instanceof $e?(function(r,i){return i instanceof $e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,c)=>s&&um(a,i.filters[c])),!0):!1})(n,e):void F(19439)}function lm(n){return n instanceof le?(function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(tr(t.value))})(n):n instanceof $e?(function(t){return t.op.toString()+" {"+t.getFilters().map(lm).join(" ,")+"}"})(n):"Filter"}var Yc=class extends le{constructor(e,t,r){super(e,t,r),this.key=M.fromName(r.referenceValue)}matches(e){let t=M.comparator(e.key,this.key);return this.matchesComparison(t)}},Xc=class extends le{constructor(e,t){super(e,"in",t),this.keys=hm("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},Zc=class extends le{constructor(e,t){super(e,"not-in",t),this.keys=hm("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function hm(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>M.fromName(r.referenceValue)))}var eu=class extends le{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Pl(t)&&ci(t.arrayValue,this.value)}},tu=class extends le{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ci(this.value.arrayValue,t)}},nu=class extends le{constructor(e,t){super(e,"not-in",t)}matches(e){if(ci(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ci(this.value.arrayValue,t)}},ru=class extends le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Pl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ci(this.value.arrayValue,r)))}};var iu=class{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.Te=null}};function op(n,e=null,t=[],r=[],i=null,s=null,a=null){return new iu(n,e,t,r,i,s,a)}function Cl(n){let e=B(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Jc(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Mo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>tr(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>tr(r))).join(",")),e.Te=t}return e.Te}function kl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ww(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!um(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sp(n.startAt,e.startAt)&&sp(n.endAt,e.endAt)}function su(n){return M.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Wt=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Qw(n,e,t,r,i,s,a,c){return new Wt(n,e,t,r,i,s,a,c)}function Uo(n){return new Wt(n)}function ap(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dm(n){return n.collectionGroup!==null}function ti(n){let e=B(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Ie(Ve.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new yn(s,r))})),t.has(Ve.keyField().canonicalString())||e.Ie.push(new yn(Ve.keyField(),r))}return e.Ie}function nt(n){let e=B(n);return e.Ee||(e.Ee=Jw(e,ti(n))),e.Ee}function Jw(n,e){if(n.limitType==="F")return op(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{let s=i.dir==="desc"?"asc":"desc";return new yn(i.field,s)}));let t=n.endAt?new nr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new nr(n.startAt.position,n.startAt.inclusive):null;return op(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ou(n,e){let t=n.filters.concat([e]);return new Wt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function au(n,e,t){return new Wt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bo(n,e){return kl(nt(n),nt(e))&&n.limitType===e.limitType}function fm(n){return"".concat(Cl(nt(n)),"|lt:").concat(n.limitType)}function $n(n){return"Query(target=".concat((function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=", filters: [".concat(t.filters.map((i=>lm(i))).join(", "),"]")),Mo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=", orderBy: [".concat(t.orderBy.map((i=>(function(a){return"".concat(a.field.canonicalString()," (").concat(a.dir,")")})(i))).join(", "),"]")),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>tr(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>tr(i))).join(",")),"Target(".concat(r,")")})(nt(n)),"; limitType=").concat(n.limitType,")")}function qo(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):M.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of ti(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,c,l){let d=ip(a,c,l);return a.inclusive?d<=0:d<0})(r.startAt,ti(r),i)||r.endAt&&!(function(a,c,l){let d=ip(a,c,l);return a.inclusive?d>=0:d>0})(r.endAt,ti(r),i))})(n,e)}function Yw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pm(n){return(e,t)=>{let r=!1;for(let i of ti(n)){let s=Xw(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Xw(n,e,t){let r=n.field.isKeyField()?M.comparator(e.key,t.key):(function(s,a,c){let l=a.data.field(s),d=c.data.field(s);return l!==null&&d!==null?er(l,d):F(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return F(19790,{direction:n.dir})}}var Tt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jt(this.inner,((t,r)=>{for(let[i,s]of r)e(i,s)}))}isEmpty(){return Xp(this.inner)}size(){return this.innerSize}};var Zw=new oe(M.comparator);function vt(){return Zw}var mm=new oe(M.comparator);function Zr(...n){let e=mm;for(let t of n)e=e.insert(t.key,t);return e}function gm(n){let e=mm;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function dn(){return ni()}function _m(){return ni()}function ni(){return new Tt((n=>n.toString()),((n,e)=>n.isEqual(e)))}var eE=new oe(M.comparator),tE=new Ie(M.comparator);function Q(...n){let e=tE;for(let t of n)e=e.add(t);return e}var nE=new Ie(K);function rE(){return nE}function Nl(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oi(e)?"-0":e}}function ym(n){return{integerValue:""+n}}function iE(n,e){return Ow(e)?ym(e):Nl(n,e)}var rr=class{constructor(){this._=void 0}};function sE(n,e,t){return n instanceof ir?(function(i,s){let a={fields:{[em]:{stringValue:Zp},[nm]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bl(s)&&(s=Fo(s)),s&&(a.fields[tm]=s),{mapValue:a}})(t,e):n instanceof In?wm(n,e):n instanceof wn?Em(n,e):(function(i,s){let a=Im(i,s),c=cp(a)+cp(i.Ae);return Qc(a)&&Qc(i.Ae)?ym(c):Nl(i.serializer,c)})(n,e)}function oE(n,e,t){return n instanceof In?wm(n,e):n instanceof wn?Em(n,e):t}function Im(n,e){return n instanceof sr?(function(r){return Qc(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var ir=class extends rr{},In=class extends rr{constructor(e){super(),this.elements=e}};function wm(n,e){let t=Tm(e);for(let r of n.elements)t.some((i=>st(i,r)))||t.push(r);return{arrayValue:{values:t}}}var wn=class extends rr{constructor(e){super(),this.elements=e}};function Em(n,e){let t=Tm(e);for(let r of n.elements)t=t.filter((i=>!st(i,r)));return{arrayValue:{values:t}}}var sr=class extends rr{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function cp(n){return re(n.integerValue||n.doubleValue)}function Tm(n){return Pl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function aE(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof In&&i instanceof In||r instanceof wn&&i instanceof wn?Yn(r.elements,i.elements,st):r instanceof sr&&i instanceof sr?st(r.Ae,i.Ae):r instanceof ir&&i instanceof ir})(n.transform,e.transform)}var cu=class{constructor(e,t){this.version=e,this.transformResults=t}},rt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Zs(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var or=class{};function vm(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ui(n.key,rt.none()):new En(n.key,n.data,rt.none());{let t=n.data,r=xe.empty(),i=new Ie(Ve.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ot(n.key,r,new Me(i.toArray()),rt.none())}}function cE(n,e,t){n instanceof En?(function(i,s,a){let c=i.value.clone(),l=lp(i.fieldTransforms,s,a.transformResults);c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof ot?(function(i,s,a){if(!Zs(i.precondition,s))return void s.convertToUnknownDocument(a.version);let c=lp(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(Am(i)),l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function ri(n,e,t,r){return n instanceof En?(function(s,a,c,l){if(!Zs(s.precondition,a))return c;let d=s.value.clone(),f=hp(s.fieldTransforms,l,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof ot?(function(s,a,c,l){if(!Zs(s.precondition,a))return c;let d=hp(s.fieldTransforms,l,a),f=a.data;return f.setAll(Am(s)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((m=>m.field)))})(n,e,t,r):(function(s,a,c){return Zs(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function uE(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Im(r.transform,i||null);s!=null&&(t===null&&(t=xe.empty()),t.set(r.field,s))}return t||null}function up(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yn(r,i,((s,a)=>aE(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var En=class extends or{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ot=class extends or{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Am(n){let e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}})),e}function lp(n,e,t){let r=new Map;Y(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,oE(a,c,t[i]))}return r}function hp(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,sE(s,a,e))}return r}var ui=class extends or{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},uu=class extends or{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&cE(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ri(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ri(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=_m();return this.mutations.forEach((i=>{let s=e.get(i.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;let l=vm(a,c);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(q.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Q())}isEqual(e){return this.batchId===e.batchId&&Yn(this.mutations,e.mutations,((t,r)=>up(t,r)))&&Yn(this.baseMutations,e.baseMutations,((t,r)=>up(t,r)))}},hu=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Y(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return eE})(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var du=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}};var fu=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ce,J;function lE(n){switch(n){case P.OK:return F(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return F(15467,{code:n})}}function bm(n){if(n===void 0)return It("GRPC error has no .code"),P.UNKNOWN;switch(n){case ce.OK:return P.OK;case ce.CANCELLED:return P.CANCELLED;case ce.UNKNOWN:return P.UNKNOWN;case ce.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case ce.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case ce.INTERNAL:return P.INTERNAL;case ce.UNAVAILABLE:return P.UNAVAILABLE;case ce.UNAUTHENTICATED:return P.UNAUTHENTICATED;case ce.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case ce.NOT_FOUND:return P.NOT_FOUND;case ce.ALREADY_EXISTS:return P.ALREADY_EXISTS;case ce.PERMISSION_DENIED:return P.PERMISSION_DENIED;case ce.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case ce.ABORTED:return P.ABORTED;case ce.OUT_OF_RANGE:return P.OUT_OF_RANGE;case ce.UNIMPLEMENTED:return P.UNIMPLEMENTED;case ce.DATA_LOSS:return P.DATA_LOSS;default:return F(39323,{code:n})}}(J=ce||(ce={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";var Oc=null;function hE(){return new TextEncoder}var dE=new _t([4294967295,4294967295],0);function dp(n){let e=hE().encode(n),t=new Sc;return t.update(e),new Uint8Array(t.digest())}function fp(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _t([t,r],0),new _t([i,s],0)]}var pu=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fn("Invalid padding: ".concat(t));if(r<0)throw new fn("Invalid hash count: ".concat(r));if(e.length>0&&this.hashCount===0)throw new fn("Invalid hash count: ".concat(r));if(e.length===0&&t!==0)throw new fn("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=_t.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(_t.fromNumber(r)));return i.compare(dE)===1&&(i=new _t([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=dp(e),[r,i]=fp(t);for(let s=0;s<this.hashCount;s++){let a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;let t=dp(e),[r,i]=fp(t);for(let s=0;s<this.hashCount;s++){let a=this.ye(r,i,s);this.Se(a)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},fn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var co=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,li.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(q.min(),i,new oe(K),vt(),Q())}},li=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Q(),Q(),Q())}};var Wn=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},uo=class{constructor(e,t){this.targetId=e,this.Ce=t}},lo=class{constructor(e,t,r=be.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ho=class{constructor(){this.ve=0,this.Fe=pp(),this.Me=be.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Q(),t=Q(),r=Q();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:F(38017,{changeType:s})}})),new li(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=pp()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Y(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},mu=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=vt(),this.Je=Qs(),this.He=Qs(),this.Ye=new oe(K)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:F(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(su(s))if(r===0){let a=new M(s.path);this.et(t,a,ze.newNoDocument(a,q.min()))}else Y(r===1,20013,{expectedCount:r});else{let a=this._t(t);if(a!==r){let c=this.ut(e),l=c?this.ct(c,e,a):1;if(l!==0){this.it(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}Oc==null||Oc.lt((function(f,m,I,R,N){var U,$,z,W,te,X;let O={localCacheCount:f,existenceFilterCount:m.count,databaseId:I.database,projectId:I.projectId},C=m.unchangedNames;return C&&(O.bloomFilter={applied:N===0,hashCount:(U=C==null?void 0:C.hashCount)!=null?U:0,bitmapLength:(W=(z=($=C==null?void 0:C.bits)==null?void 0:$.bitmap)==null?void 0:z.length)!=null?W:0,padding:(X=(te=C==null?void 0:C.bits)==null?void 0:te.padding)!=null?X:0,mightContain:E=>{var _;return(_=R==null?void 0:R.mightContain(E))!=null?_:!1}}),O})(a,e.Ce,this.Ge.ht(),c,l))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,c;try{a=Et(r).toUint8Array()}catch(l){if(l instanceof io)return Jn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new pu(a,i,s)}catch(l){return Jn(l instanceof fn?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach((s=>{let a=this.Ge.ht(),c="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(s.path.canonicalString());e.mightContain(c)||(this.et(t,s,null),i++)})),i}Tt(e){let t=new Map;this.ze.forEach(((s,a)=>{let c=this.ot(a);if(c){if(s.current&&su(c.target)){let l=new M(c.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,ze.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=Q();this.He.forEach(((s,a)=>{let c=!0;a.forEachWhile((l=>{let d=this.ot(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));let i=new co(e,t,this.Ye,this.je,r);return this.je=vt(),this.Je=Qs(),this.He=Qs(),this.Ye=new oe(K),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ho,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ie(K),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ie(K),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ho),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Qs(){return new oe(M.comparator)}function pp(){return new oe(M.comparator)}var fE={asc:"ASCENDING",desc:"DESCENDING"},pE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mE={and:"AND",or:"OR"},gu=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function _u(n,e){return n.useProto3Json||Mo(e)?e:{value:e}}function fo(n,e){return n.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sm(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gE(n,e){return fo(n,e.toTimestamp())}function it(n){return Y(!!n,49232),q.fromTimestamp((function(t){let r=wt(t);return new de(r.seconds,r.nanos)})(n))}function Dl(n,e){return yu(n,e).canonicalString()}function yu(n,e){let t=(function(i){return new ie(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Rm(n){let e=ie.fromString(n);return Y(Dm(e),10190,{key:e.toString()}),e}function Iu(n,e){return Dl(n.databaseId,e.path)}function xc(n,e){let t=Rm(e);if(t.get(1)!==n.databaseId.projectId)throw new x(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new M(Cm(t))}function Pm(n,e){return Dl(n.databaseId,e)}function _E(n){let e=Rm(n);return e.length===4?ie.emptyPath():Cm(e)}function wu(n){return new ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Cm(n){return Y(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mp(n,e,t){return{name:Iu(n,e),fields:t.value.mapValue.fields}}function yE(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:F(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,f){return d.useProto3Json?(Y(f===void 0||typeof f=="string",58123),be.fromBase64String(f||"")):(Y(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),be.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(d){let f=d.code===void 0?P.UNKNOWN:bm(d.code);return new x(f,d.message||"")})(a);t=new lo(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xc(n,r.document.name),s=it(r.document.updateTime),a=r.document.createTime?it(r.document.createTime):q.min(),c=new xe({mapValue:{fields:r.document.fields}}),l=ze.newFoundDocument(i,s,a,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new Wn(d,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xc(n,r.document),s=r.readTime?it(r.readTime):q.min(),a=ze.newNoDocument(i,s),c=r.removedTargetIds||[];t=new Wn([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xc(n,r.document),s=r.removedTargetIds||[];t=new Wn([],s,i,null)}else{if(!("filter"in e))return F(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new fu(i,s),c=r.targetId;t=new uo(c,a)}}return t}function IE(n,e){let t;if(e instanceof En)t={update:mp(n,e.key,e.value)};else if(e instanceof ui)t={delete:Iu(n,e.key)};else if(e instanceof ot)t={update:mp(n,e.key,e.data),updateMask:PE(e.fieldMask)};else{if(!(e instanceof uu))return F(16599,{Vt:e.type});t={verify:Iu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){let c=a.transform;if(c instanceof ir)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof In)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof wn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof sr)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw F(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:gE(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:F(27497)})(n,e.precondition)),t}function wE(n,e){return n&&n.length>0?(Y(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?it(i.updateTime):it(s);return a.isEqual(q.min())&&(a=it(s)),new cu(a,i.transformResults||[])})(t,e)))):[]}function EE(n,e){return{documents:[Pm(n,e.path)]}}function TE(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Pm(n,i);let s=(function(d){if(d.length!==0)return Nm($e.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let a=(function(d){if(d.length!==0)return d.map((f=>(function(I){return{field:jn(I.field),direction:bE(I.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=_u(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function vE(n){let e=_E(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Y(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=(function(m){let I=km(m);return I instanceof $e&&cm(I)?I.getFilters():[I]})(t.where));let a=[];t.orderBy&&(a=(function(m){return m.map((I=>(function(N){return new yn(Gn(N.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(I)))})(t.orderBy));let c=null;t.limit&&(c=(function(m){let I;return I=typeof m=="object"?m.value:m,Mo(I)?null:I})(t.limit));let l=null;t.startAt&&(l=(function(m){let I=!!m.before,R=m.values||[];return new nr(R,I)})(t.startAt));let d=null;return t.endAt&&(d=(function(m){let I=!m.before,R=m.values||[];return new nr(R,I)})(t.endAt)),Qw(e,i,a,s,c,"F",l,d)}function AE(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return F(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function km(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Gn(t.unaryFilter.field);return le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Gn(t.unaryFilter.field);return le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Gn(t.unaryFilter.field);return le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Gn(t.unaryFilter.field);return le.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return F(61313);default:return F(60726)}})(n):n.fieldFilter!==void 0?(function(t){return le.create(Gn(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return F(58110);default:return F(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return $e.create(t.compositeFilter.filters.map((r=>km(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return F(1026)}})(t.compositeFilter.op))})(n):F(30097,{filter:n})}function bE(n){return fE[n]}function SE(n){return pE[n]}function RE(n){return mE[n]}function jn(n){return{fieldPath:n.canonicalString()}}function Gn(n){return Ve.fromServerFormat(n.fieldPath)}function Nm(n){return n instanceof le?(function(t){if(t.op==="=="){if(rp(t.value))return{unaryFilter:{field:jn(t.field),op:"IS_NAN"}};if(np(t.value))return{unaryFilter:{field:jn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rp(t.value))return{unaryFilter:{field:jn(t.field),op:"IS_NOT_NAN"}};if(np(t.value))return{unaryFilter:{field:jn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jn(t.field),op:SE(t.op),value:t.value}}})(n):n instanceof $e?(function(t){let r=t.getFilters().map((i=>Nm(i)));return r.length===1?r[0]:{compositeFilter:{op:RE(t.op),filters:r}}})(n):F(54877,{filter:n})}function PE(n){let e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Dm(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var hi=class n{constructor(e,t,r,i,s=q.min(),a=q.min(),c=be.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Eu=class{constructor(e){this.yt=e}};function CE(n){let e=vE({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?au(e,e.limit,"L"):e}var po=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(re(e.integerValue));else if("doubleValue"in e){let r=re(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),oi(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=wt(r)),t.xt("".concat(r.seconds||"")),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Et(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?sm(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):im(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):F(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var a,c;let r=e.fields||{};this.Ft(t,53);let i=Zn,s=((c=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:c.length)||0;this.Ft(t,15),t.Mt(re(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),M.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};po.Kt=new po;var Tu=class{constructor(){this.Cn=new vu}addToCollectionParentIndex(e,t){return this.Cn.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(_n.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(_n.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},vu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ie(ie.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ie(ie.comparator)).toArray()}};var Ob=new Uint8Array(0);var gp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Om=41943040,Le=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Le.DEFAULT_COLLECTION_PERCENTILE=10,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Le.DEFAULT=new Le(Om,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Le.DISABLED=new Le(-1,0,0);var di=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var _p="LruGarbageCollector",kE=1048576;function yp([n,e],[t,r]){let i=K(n,t);return i===0?K(e,r):i}var Au=class{constructor(e){this.Ir=e,this.buffer=new Ie(yp),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();yp(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},bu=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){V(_p,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(()=>g(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){fr(t)?V(_p,"Ignoring IndexedDB error during garbage collection: ",t):yield dr(t)}yield this.Vr(3e5)})))}},Su=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return k.resolve(Xn.ce);let r=new Au(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(gp)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),gp):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,c,l,d,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(m)),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i)))).next((m=>(r=m,c=Date.now(),this.removeTargets(e,r,t)))).next((m=>(s=m,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((m=>(d=Date.now(),zn()<=H.DEBUG&&V("LruGarbageCollector","LRU Garbage Collection\n	Counted targets in ".concat(a-f,"ms\n	Determined least recently used ").concat(i," in ")+(c-a)+"ms\n"+"	Removed ".concat(s," targets in ")+(l-c)+"ms\n"+"	Removed ".concat(m," documents in ")+(d-l)+"ms\n"+"Total Duration: ".concat(d-f,"ms")),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m}))))}};function NE(n,e){return new Su(n,e)}var Ru=class{constructor(){this.changes=new Tt((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Pu=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Cu=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&ri(r.mutation,i,Me.empty(),de.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Q()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Q()){let i=dn();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=Zr();return s.forEach(((c,l)=>{a=a.insert(c,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){let r=dn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Q())))}populateOverlays(e,t,r){let i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,r,i){let s=vt(),a=ni(),c=(function(){return ni()})();return t.forEach(((l,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof ot)?s=s.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),ri(f.mutation,d,f.mutation.getFieldMask(),de.now())):a.set(d.key,Me.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((d,f)=>a.set(d,f))),t.forEach(((d,f)=>{var m;return c.set(d,new Pu(f,(m=a.get(d))!=null?m:null))})),c)))}recalculateAndSaveOverlays(e,t){let r=ni(),i=new oe(((a,c)=>a-c)),s=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(let c of a)c.keys().forEach((l=>{let d=t.get(l);if(d===null)return;let f=r.get(l)||Me.empty();f=c.applyToLocalView(d,f),r.set(l,f);let m=(i.get(c.batchId)||Q()).add(l);i=i.insert(c.batchId,m)}))})).next((()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,f=l.value,m=_m();f.forEach((I=>{if(!s.has(I)){let R=vm(t.get(I),r.get(I));R!==null&&m.set(I,R),s=s.add(I)}})),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return k.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return M.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):k.resolve(dn()),c=si,l=s;return a.next((d=>k.forEach(d,((f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(f)?k.resolve():this.remoteDocumentCache.getEntry(e,f).next((I=>{l=l.insert(f,I)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,l,d,Q()))).next((f=>({batchId:c,changes:gm(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new M(t)).next((r=>{let i=Zr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=Zr();return this.indexManager.getCollectionParents(e,s).next((c=>k.forEach(c,(l=>{let d=(function(m,I){return new Wt(I,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((f=>{f.forEach(((m,I)=>{a=a.insert(m,I)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((l,d)=>{let f=d.getKey();a.get(f)===null&&(a=a.insert(f,ze.newInvalidDocument(f)))}));let c=Zr();return a.forEach(((l,d)=>{let f=s.get(l);f!==void 0&&ri(f.mutation,d,Me.empty(),de.now()),qo(t,d)&&(c=c.insert(l,d))})),c}))}};var ku=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return k.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:it(i.createTime)}})(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:CE(i.bundledQuery),readTime:it(i.readTime)}})(t)),k.resolve()}};var Nu=class{constructor(){this.overlays=new oe(M.comparator),this.qr=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=dn();return k.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=dn(),s=t.length+1,a=new M(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new oe(((d,f)=>d-f)),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=dn(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=dn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((d,f)=>c.set(d,f))),!(c.size()>=i)););return k.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new du(t,r));let s=this.qr.get(t);s===void 0&&(s=Q(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var Du=class{constructor(){this.sessionToken=be.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var fi=class{constructor(){this.Qr=new Ie(ue.$r),this.Ur=new Ie(ue.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new ue(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new ue(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){let t=new M(new ie([])),r=new ue(t,e),i=new ue(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new M(new ie([])),r=new ue(t,e),i=new ue(t,e+1),s=Q();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){let t=new ue(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ue=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return M.comparator(e.key,t.key)||K(e.Yr,t.Yr)}static Kr(e,t){return K(e.Yr,t.Yr)||M.comparator(e.key,t.key)}};var Ou=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ie(ue.$r)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new lu(s,t,r,i);this.mutationQueue.push(a);for(let c of i)this.Zr=this.Zr.add(new ue(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return k.resolve(a)}lookupMutationBatch(e,t){return k.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?Al:this.tr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ue(t,0),i=new ue(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{let c=this.Xr(a.Yr);s.push(c)})),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ie(K);return t.forEach((i=>{let s=new ue(i,0),a=new ue(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(c=>{r=r.add(c.Yr)}))})),k.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;M.isDocumentKey(s)||(s=s.child(""));let a=new ue(new M(s),0),c=new Ie(K);return this.Zr.forEachWhile((l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.Yr)),!0)}),a),k.resolve(this.ti(c))}ti(e){let t=[];return e.forEach((r=>{let i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Y(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return k.forEach(t.mutations,(i=>{let s=new ue(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){let r=new ue(t,0),i=this.Zr.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var xu=class{constructor(e){this.ri=e,this.docs=(function(){return new oe(M.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():ze.newInvalidDocument(t))}getEntries(e,t){let r=vt();return t.forEach((i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ze.newInvalidDocument(i))})),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=vt(),a=t.path,c=new M(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:f}}=l.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||kw(Cw(f),r)<=0||(i.has(f.key)||qo(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,t,r,i){F(9500)}ii(e,t){return k.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Vu(this)}getSize(e){return k.resolve(this.size)}},Vu=class extends Ru{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),k.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Lu=class{constructor(e){this.persistence=e,this.si=new Tt((t=>Cl(t)),kl),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.oi=0,this._i=new fi,this.targetCount=0,this.ai=di.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),k.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new di(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Pr(t),k.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),k.waitFor(s).next((()=>i))}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),k.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this._i.containsKey(t))}};var mo=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Xn(0),this.li=!1,this.li=!0,this.hi=new Du,this.referenceDelegate=e(this),this.Pi=new Lu(this),this.indexManager=new Tu,this.remoteDocumentCache=(function(i){return new xu(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Eu(t),this.Ii=new ku(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Ou(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new Mu(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return k.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}},Mu=class extends Hc{constructor(e){super(),this.currentSequenceNumber=e}},Fu=class n{constructor(e){this.persistence=e,this.Ri=new fi,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw F(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),k.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.fi,(r=>{let i=M.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,q.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return k.or([()=>k.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},go=class n{constructor(e,t){this.persistence=e,this.pi=new Tt((r=>xw(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=NE(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return k.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return k.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?k.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((c=>{c||(r++,s.removeEntry(a,q.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),k.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),k.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ys(e.data.value)),t}br(e,t,r){return k.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return k.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Uu=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Q(),i=Q();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Bu=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var qu=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ed()?8:Dw(_e())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;let a=new Bu;return this.Ss(e,t,a).next((c=>{if(s.result=c,this.Vs)return this.bs(e,t,a,c.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(zn()<=H.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",$n(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),k.resolve()):(zn()<=H.DEBUG&&V("QueryEngine","Query:",$n(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(zn()<=H.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",$n(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nt(t))):k.resolve())}ys(e,t){if(ap(t))return k.resolve(null);let r=nt(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=au(t,null,"F"),r=nt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{let a=Q(...s);return this.ps.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{let d=this.Ds(t,c);return this.Cs(t,d,a,l.readTime)?this.ys(e,au(t,null,"F")):this.vs(e,d,t,l)}))))})))))}ws(e,t,r,i){return ap(t)||i.isEqual(q.min())?k.resolve(null):this.ps.getDocuments(e,r).next((s=>{let a=this.Ds(t,s);return this.Cs(t,a,r,i)?k.resolve(null):(zn()<=H.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$n(t)),this.vs(e,a,t,Pw(i,si)).next((c=>c)))}))}Ds(e,t){let r=new Ie(pm(e));return t.forEach(((i,s)=>{qo(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return zn()<=H.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",$n(t)),this.ps.getDocumentsMatchingQuery(e,t,_n.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}};var Ol="LocalStore",DE=3e8,zu=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new oe(K),this.xs=new Tt((s=>Cl(s)),kl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cu(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}};function OE(n,e,t,r){return new zu(n,e,t,r)}function xm(n,e){return g(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{let a=[],c=[],l=Q();for(let d of i){a.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next((d=>({Ls:d,removedBatchIds:a,addedBatchIds:c})))}))}))})}function xE(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{let i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,d,f){let m=d.batch,I=m.keys(),R=k.resolve();return I.forEach((N=>{R=R.next((()=>f.getEntry(l,N))).next((O=>{let C=d.docVersions.get(N);Y(C!==null,48541),O.version.compareTo(C)<0&&(m.applyToRemoteDocument(O,d),O.isValidDocument()&&(O.setReadTime(d.commitVersion),f.addEntry(O)))}))})),R.next((()=>c.mutationQueue.removeMutationBatch(l,m)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Q();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function Vm(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function VE(n,e){let t=B(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{let a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let c=[];e.targetChanges.forEach(((f,m)=>{let I=i.get(m);if(!I)return;c.push(t.Pi.removeMatchingKeys(s,f.removedDocuments,m).next((()=>t.Pi.addMatchingKeys(s,f.addedDocuments,m))));let R=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?R=R.withResumeToken(be.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):f.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(f.resumeToken,r)),i=i.insert(m,R),(function(O,C,U){return O.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=DE?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(I,R,f)&&c.push(t.Pi.updateTargetData(s,R))}));let l=vt(),d=Q();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))})),c.push(LE(s,a,e.documentUpdates).next((f=>{l=f.ks,d=f.qs}))),!r.isEqual(q.min())){let f=t.Pi.getLastRemoteSnapshotVersion(s).next((m=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));c.push(f)}return k.waitFor(c).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,l,d))).next((()=>l))})).then((s=>(t.Ms=i,s)))}function LE(n,e,t){let r=Q(),i=Q();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=vt();return t.forEach(((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(q.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):V(Ol,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)})),{ks:a,qs:i}}))}function ME(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Al),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function FE(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,k.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new hi(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}function $u(n,e,t){return g(this,null,function*(){let r=B(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i))))}catch(a){if(!fr(a))throw a;V(Ol,"Failed to update sequence numbers for target ".concat(e,": ").concat(a))}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function Ip(n,e,t){let r=B(n),i=q.min(),s=Q();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,d,f){let m=B(l),I=m.xs.get(f);return I!==void 0?k.resolve(m.Ms.get(I)):m.Pi.getTargetData(d,f)})(r,a,nt(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:q.min(),t?s:Q()))).next((c=>(UE(r,Yw(e),c),{documents:c,Qs:s})))))}function UE(n,e,t){let r=n.Os.get(e)||q.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}var _o=class{constructor(){this.activeTargetIds=rE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ju=class{constructor(){this.Mo=new _o,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _o,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Gu=class{Oo(e){}shutdown(){}};var wp="ConnectivityMonitor",yo=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){V(wp,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){V(wp,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Js=null;function Hu(){return Js===null?Js=(function(){return 268435456+Math.round(2147483648*Math.random())})():Js++,"0x"+Js.toString(16)}var Vc="RestConnection",BE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Wu=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(r,"/databases/").concat(i),this.Wo=this.databaseId.database===so?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}Go(e,t,r,i,s){let a=Hu(),c=this.zo(e,t.toUriEncodedString());V(Vc,"Sending RPC '".concat(e,"' ").concat(a,":"),c,r);let l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);let{host:d}=new URL(c),f=He(d);return this.Jo(e,c,l,r,f).then((m=>(V(Vc,"Received RPC '".concat(e,"' ").concat(a,": "),m),m)),(m=>{throw Jn(Vc,"RPC '".concat(e,"' ").concat(a," failed with error: "),m,"url: ",c,"request:",r),m}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){let r=BE[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(r)}terminate(){}};var Ku=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Ae="WebChannelConnection",Qu=class extends Wu{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let a=Hu();return new Promise(((c,l)=>{let d=new Rc;d.setWithCredentials(!0),d.listenOnce(Pc.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Xr.NO_ERROR:let m=d.getResponseJson();V(Ae,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(m)),c(m);break;case Xr.TIMEOUT:V(Ae,"RPC '".concat(e,"' ").concat(a," timed out")),l(new x(P.DEADLINE_EXCEEDED,"Request time out"));break;case Xr.HTTP_ERROR:let I=d.getStatus();if(V(Ae,"RPC '".concat(e,"' ").concat(a," failed with status:"),I,"response text:",d.getResponseText()),I>0){let R=d.getResponseJson();Array.isArray(R)&&(R=R[0]);let N=R==null?void 0:R.error;if(N&&N.status&&N.message){let O=(function(U){let $=U.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf($)>=0?$:P.UNKNOWN})(N.status);l(new x(O,N.message))}else l(new x(P.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new x(P.UNAVAILABLE,"Connection failed."));break;default:F(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{V(Ae,"RPC '".concat(e,"' ").concat(a," completed."))}}));let f=JSON.stringify(i);V(Ae,"RPC '".concat(e,"' ").concat(a," sending request:"),i),d.send(t,"POST",f,r,15)}))}T_(e,t,r){let i=Hu(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Nc(),c=kc(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let f=s.join("");V(Ae,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(f),l);let m=a.createWebChannel(f,l);this.I_(m);let I=!1,R=!1,N=new Ku({Yo:C=>{R?V(Ae,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),C):(I||(V(Ae,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),m.open(),I=!0),V(Ae,"RPC '".concat(e,"' stream ").concat(i," sending:"),C),m.send(C))},Zo:()=>m.close()}),O=(C,U,$)=>{C.listen(U,(z=>{try{$(z)}catch(W){setTimeout((()=>{throw W}),0)}}))};return O(m,qn.EventType.OPEN,(()=>{R||(V(Ae,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),N.o_())})),O(m,qn.EventType.CLOSE,(()=>{R||(R=!0,V(Ae,"RPC '".concat(e,"' stream ").concat(i," transport closed")),N.a_(),this.E_(m))})),O(m,qn.EventType.ERROR,(C=>{R||(R=!0,Jn(Ae,"RPC '".concat(e,"' stream ").concat(i," transport errored. Name:"),C.name,"Message:",C.message),N.a_(new x(P.UNAVAILABLE,"The operation could not be completed")))})),O(m,qn.EventType.MESSAGE,(C=>{var U;if(!R){let $=C.data[0];Y(!!$,16349);let z=$,W=(z==null?void 0:z.error)||((U=z[0])==null?void 0:U.error);if(W){V(Ae,"RPC '".concat(e,"' stream ").concat(i," received error:"),W);let te=W.status,X=(function(w){let v=ce[w];if(v!==void 0)return bm(v)})(te),E=W.message;X===void 0&&(X=P.INTERNAL,E="Unknown error status: "+te+" with message "+W.message),R=!0,N.a_(new x(X,E)),m.close()}else V(Ae,"RPC '".concat(e,"' stream ").concat(i," received:"),$),N.u_($)}})),O(c,Cc.STAT_EVENT,(C=>{C.stat===Ws.PROXY?V(Ae,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):C.stat===Ws.NOPROXY&&V(Ae,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function Lc(){return typeof document!="undefined"?document:null}function zo(n){return new gu(n,!0)}var Io=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(r," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var Ep="PersistentStream",wo=class{constructor(e,t,r,i,s,a,c,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Io(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return g(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}k_(){return g(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return g(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(It(t.toString()),It("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{let i=new x(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((()=>g(this,null,function*(){this.state=0,this.start()})))}z_(e){return V(Ep,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(V(Ep,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}},Ju=class extends wo{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=yE(this.serializer,e),r=(function(s){if(!("targetChange"in s))return q.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?q.min():a.readTime?it(a.readTime):q.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=wu(this.serializer),t.addTarget=(function(s,a){let c,l=a.target;if(c=su(l)?{documents:EE(s,l)}:{query:TE(s,l).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Sm(s,a.resumeToken);let d=_u(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(q.min())>0){c.readTime=fo(s,a.snapshotVersion.toTimestamp());let d=_u(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);let r=AE(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=wu(this.serializer),t.removeTarget=e,this.q_(t)}},Yu=class extends wo{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Y(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Y(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=wE(e.writeResults,e.commitTime),r=it(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=wu(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((r=>IE(this.serializer,r)))};this.q_(t)}};var Xu=class{},Zu=class extends Xu{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new x(P.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,yu(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(P.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(e,yu(t,r),i,a,c,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new x(P.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},el=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(It(t),this.aa=!1):V("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Tn="RemoteStore",tl=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((()=>g(this,null,function*(){An(this)&&(V(Tn,"Restarting streams for network reachability change."),yield(function(l){return g(this,null,function*(){let d=B(l);d.Ea.add(4),yield yi(d),d.Ra.set("Unknown"),d.Ea.delete(4),yield $o(d)})})(this))})))})),this.Ra=new el(r,i)}};function $o(n){return g(this,null,function*(){if(An(n))for(let e of n.da)yield e(!0)})}function yi(n){return g(this,null,function*(){for(let e of n.da)yield e(!1)})}function Lm(n,e){let t=B(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ml(t)?Ll(t):pr(t).O_()&&Vl(t,e))}function xl(n,e){let t=B(n),r=pr(t);t.Ia.delete(e),r.O_()&&Mm(t,e),t.Ia.size===0&&(r.O_()?r.L_():An(t)&&t.Ra.set("Unknown"))}function Vl(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pr(n).Y_(e)}function Mm(n,e){n.Va.Ue(e),pr(n).Z_(e)}function Ll(n){n.Va=new mu({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),pr(n).start(),n.Ra.ua()}function Ml(n){return An(n)&&!pr(n).x_()&&n.Ia.size>0}function An(n){return B(n).Ea.size===0}function Fm(n){n.Va=void 0}function qE(n){return g(this,null,function*(){n.Ra.set("Online")})}function zE(n){return g(this,null,function*(){n.Ia.forEach(((e,t)=>{Vl(n,e)}))})}function $E(n,e){return g(this,null,function*(){Fm(n),Ml(n)?(n.Ra.ha(e),Ll(n)):n.Ra.set("Unknown")})}function jE(n,e,t){return g(this,null,function*(){if(n.Ra.set("Online"),e instanceof lo&&e.state===2&&e.cause)try{yield(function(i,s){return g(this,null,function*(){let a=s.cause;for(let c of s.targetIds)i.Ia.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.Ia.delete(c),i.Va.removeTarget(c))})})(n,e)}catch(r){V(Tn,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Eo(n,r)}else if(e instanceof Wn?n.Va.Ze(e):e instanceof uo?n.Va.st(e):n.Va.tt(e),!t.isEqual(q.min()))try{let r=yield Vm(n.localStore);t.compareTo(r)>=0&&(yield(function(s,a){let c=s.Va.Tt(a);return c.targetChanges.forEach(((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.Ia.get(d);f&&s.Ia.set(d,f.withResumeToken(l.resumeToken,a))}})),c.targetMismatches.forEach(((l,d)=>{let f=s.Ia.get(l);if(!f)return;s.Ia.set(l,f.withResumeToken(be.EMPTY_BYTE_STRING,f.snapshotVersion)),Mm(s,l);let m=new hi(f.target,l,d,f.sequenceNumber);Vl(s,m)})),s.remoteSyncer.applyRemoteEvent(c)})(n,t))}catch(r){V(Tn,"Failed to raise snapshot:",r),yield Eo(n,r)}})}function Eo(n,e,t){return g(this,null,function*(){if(!fr(e))throw e;n.Ea.add(1),yield yi(n),n.Ra.set("Offline"),t||(t=()=>Vm(n.localStore)),n.asyncQueue.enqueueRetryable((()=>g(null,null,function*(){V(Tn,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield $o(n)})))})}function Um(n,e){return e().catch((t=>Eo(n,t,e)))}function jo(n){return g(this,null,function*(){let e=B(n),t=Kt(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Al;for(;GE(e);)try{let i=yield ME(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,HE(e,i)}catch(i){yield Eo(e,i)}Bm(e)&&qm(e)})}function GE(n){return An(n)&&n.Ta.length<10}function HE(n,e){n.Ta.push(e);let t=Kt(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Bm(n){return An(n)&&!Kt(n).x_()&&n.Ta.length>0}function qm(n){Kt(n).start()}function WE(n){return g(this,null,function*(){Kt(n).ra()})}function KE(n){return g(this,null,function*(){let e=Kt(n);for(let t of n.Ta)e.ea(t.mutations)})}function QE(n,e,t){return g(this,null,function*(){let r=n.Ta.shift(),i=hu.from(r,e,t);yield Um(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),yield jo(n)})}function JE(n,e){return g(this,null,function*(){e&&Kt(n).X_&&(yield(function(r,i){return g(this,null,function*(){if((function(a){return lE(a)&&a!==P.ABORTED})(i.code)){let s=r.Ta.shift();Kt(r).B_(),yield Um(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),yield jo(r)}})})(n,e)),Bm(n)&&qm(n)})}function Tp(n,e){return g(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),V(Tn,"RemoteStore received new credentials");let r=An(t);t.Ea.add(3),yield yi(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield $o(t)})}function YE(n,e){return g(this,null,function*(){let t=B(n);e?(t.Ea.delete(2),yield $o(t)):e||(t.Ea.add(2),yield yi(t),t.Ra.set("Unknown"))})}function pr(n){return n.ma||(n.ma=(function(t,r,i){let s=B(t);return s.sa(),new Ju(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:qE.bind(null,n),t_:zE.bind(null,n),r_:$E.bind(null,n),H_:jE.bind(null,n)}),n.da.push((e=>g(null,null,function*(){e?(n.ma.B_(),Ml(n)?Ll(n):n.Ra.set("Unknown")):(yield n.ma.stop(),Fm(n))})))),n.ma}function Kt(n){return n.fa||(n.fa=(function(t,r,i){let s=B(t);return s.sa(),new Yu(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:WE.bind(null,n),r_:JE.bind(null,n),ta:KE.bind(null,n),na:QE.bind(null,n)}),n.da.push((e=>g(null,null,function*(){e?(n.fa.B_(),yield jo(n)):(yield n.fa.stop(),n.Ta.length>0&&(V(Tn,"Stopping write stream with ".concat(n.Ta.length," pending writes")),n.Ta=[]))})))),n.fa}var nl=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Fl(n,e){if(It("AsyncQueue","".concat(e,": ").concat(n)),fr(n))return new x(P.UNAVAILABLE,"".concat(e,": ").concat(n));throw n}var To=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||M.comparator(t.key,r.key):(t,r)=>M.comparator(t.key,r.key),this.keyedMap=Zr(),this.sortedSet=new oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var vo=class{constructor(){this.ga=new oe(M.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):F(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}},ar=class n{constructor(e,t,r,i,s,a,c,l,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new n(e,t,To.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var rl=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}},il=class{constructor(){this.queries=vp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=B(t),s=i.queries;i.queries=vp(),s.forEach(((a,c)=>{for(let l of c.Sa)l.onError(r)}))})(this,new x(P.ABORTED,"Firestore shutting down"))}};function vp(){return new Tt((n=>fm(n)),Bo)}function zm(n,e){return g(this,null,function*(){let t=B(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new rl,r=e.Da()?0:1);try{switch(r){case 0:s.wa=yield t.onListen(i,!0);break;case 1:s.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let c=Fl(a,"Initialization of query '".concat($n(e.query),"' failed"));return void e.onError(c)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Ul(t)})}function $m(n,e){return g(this,null,function*(){let t=B(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function XE(n,e){let t=B(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let c of a.Sa)c.Fa(i)&&(r=!0);a.wa=i}}r&&Ul(t)}function ZE(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function Ul(n){n.Ca.forEach((e=>{e.next()}))}var sl,Ap;(Ap=sl||(sl={})).Ma="default",Ap.Cache="cache";var Ao=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ar(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ar.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sl.Cache}};var bo=class{constructor(e){this.key=e}},So=class{constructor(e){this.key=e}},ol=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Q(),this.mutatedKeys=Q(),this.eu=pm(e),this.tu=new To(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new vo,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,m)=>{let I=i.get(f),R=qo(this.query,m)?m:null,N=!!I&&this.mutatedKeys.has(I.key),O=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations),C=!1;I&&R?I.data.isEqual(R.data)?N!==O&&(r.track({type:3,doc:R}),C=!0):this.su(I,R)||(r.track({type:2,doc:R}),C=!0,(l&&this.eu(R,l)>0||d&&this.eu(R,d)<0)&&(c=!0)):!I&&R?(r.track({type:0,doc:R}),C=!0):I&&!R&&(r.track({type:1,doc:I}),C=!0,(l||d)&&(c=!0)),C&&(R?(a=a.add(R),s=O?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:c,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((f,m)=>(function(R,N){let O=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F(20277,{Rt:C})}};return O(R)-O(N)})(f.type,m.type)||this.eu(f.doc,m.doc))),this.ou(r),i=i!=null?i:!1;let c=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,d=l!==this.Za;return this.Za=l,a.length!==0||d?{snapshot:new ar(this.query,e.tu,s,a,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vo,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Q(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));let t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new So(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new bo(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Q();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ar.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Bl="SyncEngine",al=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},cl=class{constructor(e){this.key=e,this.hu=!1}},ul=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Tt((c=>fm(c)),Bo),this.Iu=new Map,this.Eu=new Set,this.du=new oe(M.comparator),this.Au=new Map,this.Ru=new fi,this.Vu={},this.mu=new Map,this.fu=di.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function eT(n,e,t=!0){return g(this,null,function*(){let r=Qm(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=yield jm(r,e,t,!0),i})}function tT(n,e){return g(this,null,function*(){let t=Qm(n);yield jm(t,e,!0,!1)})}function jm(n,e,t,r){return g(this,null,function*(){let i=yield FE(n.localStore,nt(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield nT(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Lm(n.remoteStore,i),c})}function nT(n,e,t,r,i){return g(this,null,function*(){n.pu=(m,I,R)=>(function(O,C,U,$){return g(this,null,function*(){let z=C.view.ru(U);z.Cs&&(z=yield Ip(O.localStore,C.query,!1).then((({documents:E})=>C.view.ru(E,z))));let W=$&&$.targetChanges.get(C.targetId),te=$&&$.targetMismatches.get(C.targetId)!=null,X=C.view.applyChanges(z,O.isPrimaryClient,W,te);return Sp(O,C.targetId,X.au),X.snapshot})})(n,m,I,R);let s=yield Ip(n.localStore,e,!0),a=new ol(e,s.Qs),c=a.ru(s.documents),l=li.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,l);Sp(n,t,d.au);let f=new al(e,t,a);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot})}function rT(n,e,t){return g(this,null,function*(){let r=B(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Bo(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $u(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&xl(r.remoteStore,i.targetId),ll(r,i.targetId)})).catch(dr))):(ll(r,i.targetId),yield $u(r.localStore,i.targetId,!0))})}function iT(n,e){return g(this,null,function*(){let t=B(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xl(t.remoteStore,r.targetId))})}function sT(n,e,t){return g(this,null,function*(){let r=dT(n);try{let i=yield(function(a,c){let l=B(a),d=de.now(),f=c.reduce(((R,N)=>R.add(N.key)),Q()),m,I;return l.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let N=vt(),O=Q();return l.Ns.getEntries(R,f).next((C=>{N=C,N.forEach(((U,$)=>{$.isValidDocument()||(O=O.add(U))}))})).next((()=>l.localDocuments.getOverlayedDocuments(R,N))).next((C=>{m=C;let U=[];for(let $ of c){let z=uE($,m.get($.key).overlayedDocument);z!=null&&U.push(new ot($.key,z,om(z.value.mapValue),rt.exists(!0)))}return l.mutationQueue.addMutationBatch(R,d,U,c)})).next((C=>{I=C;let U=C.applyToLocalDocumentSet(m,O);return l.documentOverlayCache.saveOverlays(R,C.batchId,U)}))})).then((()=>({batchId:I.batchId,changes:gm(m)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,c,l){let d=a.Vu[a.currentUser.toKey()];d||(d=new oe(K)),d=d.insert(c,l),a.Vu[a.currentUser.toKey()]=d})(r,i.batchId,t),yield Ii(r,i.changes),yield jo(r.remoteStore)}catch(i){let s=Fl(i,"Failed to persist write");t.reject(s)}})}function Gm(n,e){return g(this,null,function*(){let t=B(n);try{let r=yield VE(t.localStore,e);e.targetChanges.forEach(((i,s)=>{let a=t.Au.get(s);a&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Y(a.hu,14607):i.removedDocuments.size>0&&(Y(a.hu,42227),a.hu=!1))})),yield Ii(t,r,e)}catch(r){yield dr(r)}})}function bp(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach(((s,a)=>{let c=a.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(a,c){let l=B(a);l.onlineState=c;let d=!1;l.queries.forEach(((f,m)=>{for(let I of m.Sa)I.va(c)&&(d=!0)})),d&&Ul(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oT(n,e,t){return g(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let a=new oe(M.comparator);a=a.insert(s,ze.newNoDocument(s,q.min()));let c=Q().add(s),l=new co(q.min(),new Map,new oe(K),a,c);yield Gm(r,l),r.du=r.du.remove(s),r.Au.delete(e),ql(r)}else yield $u(r.localStore,e,!1).then((()=>ll(r,e,t))).catch(dr)})}function aT(n,e){return g(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield xE(t.localStore,e);Wm(t,r,null),Hm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ii(t,i)}catch(i){yield dr(i)}})}function cT(n,e,t){return g(this,null,function*(){let r=B(n);try{let i=yield(function(a,c){let l=B(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let f;return l.mutationQueue.lookupMutationBatch(d,c).next((m=>(Y(m!==null,37113),f=m.keys(),l.mutationQueue.removeMutationBatch(d,m)))).next((()=>l.mutationQueue.performConsistencyCheck(d))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(d,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f))).next((()=>l.localDocuments.getDocuments(d,f)))}))})(r.localStore,e);Wm(r,e,t),Hm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ii(r,i)}catch(i){yield dr(i)}})}function Hm(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Wm(n,e,t){let r=B(n),i=r.Vu[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ll(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Km(n,r)}))}function Km(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(xl(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ql(n))}function Sp(n,e,t){for(let r of t)r instanceof bo?(n.Ru.addReference(r.key,e),uT(n,r)):r instanceof So?(V(Bl,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Km(n,r.key)):F(19791,{wu:r})}function uT(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(V(Bl,"New document in limbo: "+t),n.Eu.add(r),ql(n))}function ql(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new M(ie.fromString(e)),r=n.fu.next();n.Au.set(r,new cl(t)),n.du=n.du.insert(t,r),Lm(n.remoteStore,new hi(nt(Uo(t.path)),r,"TargetPurposeLimboResolution",Xn.ce))}}function Ii(n,e,t){return g(this,null,function*(){let r=B(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{a.push(r.pu(l,e,t).then((d=>{var f;if((d||t)&&r.isPrimaryClient){let m=d?!d.fromCache:(f=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(d){i.push(d);let m=Uu.As(l.targetId,d);s.push(m)}})))})),yield Promise.all(a),r.Pu.H_(i),yield(function(l,d){return g(this,null,function*(){let f=B(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>k.forEach(d,(I=>k.forEach(I.Es,(R=>f.persistence.referenceDelegate.addReference(m,I.targetId,R))).next((()=>k.forEach(I.ds,(R=>f.persistence.referenceDelegate.removeReference(m,I.targetId,R)))))))))}catch(m){if(!fr(m))throw m;V(Ol,"Failed to update sequence numbers: "+m)}for(let m of d){let I=m.targetId;if(!m.fromCache){let R=f.Ms.get(I),N=R.snapshotVersion,O=R.withLastLimboFreeSnapshotVersion(N);f.Ms=f.Ms.insert(I,O)}}})})(r.localStore,s))})}function lT(n,e){return g(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){V(Bl,"User change. New user:",e.toKey());let r=yield xm(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((c=>{c.forEach((l=>{l.reject(new x(P.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ii(t,r.Ls)}})}function hT(n,e){let t=B(n),r=t.Au.get(e);if(r&&r.hu)return Q().add(r.key);{let i=Q(),s=t.Iu.get(e);if(!s)return i;for(let a of s){let c=t.Tu.get(a);i=i.unionWith(c.view.nu)}return i}}function Qm(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oT.bind(null,e),e.Pu.H_=XE.bind(null,e.eventManager),e.Pu.yu=ZE.bind(null,e.eventManager),e}function dT(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cT.bind(null,e),e}var cr=class{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return g(this,null,function*(){this.serializer=zo(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),yield this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)})}Fu(e,t){return null}Mu(e,t){return null}vu(e){return OE(this.persistence,new qu,e.initialUser,this.serializer)}Cu(e){return new mo(Fu.mi,this.serializer)}Du(e){return new ju}terminate(){return g(this,null,function*(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};cr.provider={build:()=>new cr};var hl=class extends cr{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Y(this.persistence.referenceDelegate instanceof go,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new bu(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Le.withCacheSize(this.cacheSizeBytes):Le.DEFAULT;return new mo((r=>go.mi(r,t)),this.serializer)}};var pi=class{initialize(e,t){return g(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lT.bind(null,this.syncEngine),yield YE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return(function(){return new il})()}createDatastore(e){let t=zo(e.databaseInfo.databaseId),r=(function(s){return new Qu(s)})(e.databaseInfo);return(function(s,a,c,l){return new Zu(s,a,c,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,c){return new tl(r,i,s,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>bp(this.syncEngine,t,0)),(function(){return yo.v()?new yo:new Gu})())}createSyncEngine(e,t){return(function(i,s,a,c,l,d,f){let m=new ul(i,s,a,c,l,d);return f&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return g(this,null,function*(){var e,t;yield(function(i){return g(this,null,function*(){let s=B(i);V(Tn,"RemoteStore shutting down."),s.Ea.add(5),yield yi(s),s.Aa.shutdown(),s.Ra.set("Unknown")})})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()})}};pi.provider={build:()=>new pi};var Ro=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):It("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}};var Qt="FirestoreClient",dl=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ye.UNAUTHENTICATED,this.clientId=ii.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(a=>g(this,null,function*(){V(Qt,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a}))),this.appCheckCredentials.start(r,(a=>(V(Qt,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Fl(t,"Failed to shutdown persistence");e.reject(r)}}))),e.promise}};function Mc(n,e){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V(Qt,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((i=>g(null,null,function*(){r.isEqual(i)||(yield xm(e.localStore,i),r=i)}))),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e})}function Rp(n,e){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield fT(n);V(Qt,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Tp(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Tp(e.remoteStore,i))),n._onlineComponents=e})}function fT(n){return g(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(Qt,"Using user provided OfflineComponentProvider");try{yield Mc(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Jn("Error using user provided cache. Falling back to memory cache: "+t),yield Mc(n,new cr)}}else V(Qt,"Using default OfflineComponentProvider"),yield Mc(n,new hl(void 0));return n._offlineComponents})}function Jm(n){return g(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(Qt,"Using user provided OnlineComponentProvider"),yield Rp(n,n._uninitializedComponentsProvider._online)):(V(Qt,"Using default OnlineComponentProvider"),yield Rp(n,new pi))),n._onlineComponents})}function pT(n){return Jm(n).then((e=>e.syncEngine))}function fl(n){return g(this,null,function*(){let e=yield Jm(n),t=e.eventManager;return t.onListen=eT.bind(null,e.syncEngine),t.onUnlisten=rT.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tT.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iT.bind(null,e.syncEngine),t})}function mT(n,e,t={}){let r=new et;return n.asyncQueue.enqueueAndForget((()=>g(null,null,function*(){return(function(s,a,c,l,d){let f=new Ro({next:I=>{f.Nu(),a.enqueueAndForget((()=>$m(s,m)));let R=I.docs.has(c);!R&&I.fromCache?d.reject(new x(P.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&I.fromCache&&l&&l.source==="server"?d.reject(new x(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(I)},error:I=>d.reject(I)}),m=new Ao(Uo(c.path),f,{includeMetadataChanges:!0,qa:!0});return zm(s,m)})(yield fl(n),n.asyncQueue,e,t,r)}))),r.promise}function Ym(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Pp=new Map;var Xm="firestore.googleapis.com",Cp=!0,Po=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new x(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xm,this.ssl=Cp}else this.host=e.host,this.ssl=(t=e.ssl)!=null?t:Cp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Om;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kE)throw new x(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ym((r=e.experimentalLongPollingOptions)!=null?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new x(P.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(s.timeoutSeconds," (must not be NaN)"));if(s.timeoutSeconds<5)throw new x(P.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(s.timeoutSeconds," (minimum allowed value is 5)"));if(s.timeoutSeconds>30)throw new x(P.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(s.timeoutSeconds," (maximum allowed value is 30)"))}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ur=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Po({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Po(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Fc;switch(r.type){case"firstParty":return new zc(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return g(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Pp.get(t);r&&(V("ComponentProvider","Removing Datastore"),Pp.delete(t),r.terminate())})(this),Promise.resolve()}};function gT(n,e,t,r={}){var d;n=Fe(n,ur);let i=He(e),s=n._getSettings(),a=Ee(G({},s),{emulatorOptions:n._getEmulatorOptions()}),c="".concat(e,":").concat(t);i&&(Dn("https://".concat(c)),On("Firestore",!0)),s.host!==Xm&&s.host!==c&&Jn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Ee(G({},s),{host:c,ssl:i,emulatorOptions:r});if(!We(l,a)&&(n._setSettings(l),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=ye.MOCK_USER;else{f=as(r.mockUserToken,(d=n._app)==null?void 0:d.options.projectId);let I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new x(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ye(I)}n._authCredentials=new Uc(new eo(f,m))}}var vn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(_i(t,n._jsonSchema))return new n(e,r||null,new M(ie.fromString(t.referencePath)))}};me._jsonSchemaVersion="firestore/documentReference/1.0",me._jsonSchema={type:he("string",me._jsonSchemaVersion),referencePath:he("string")};var zt=class n extends vn{constructor(e,t,r){super(e,t,Uo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new me(this.firestore,null,new M(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function bn(n,e,...t){if(n=ne(n),Lp("collection","path",e),n instanceof ur){let r=ie.fromString(e,...t);return Kf(r),new zt(n,null,r)}{if(!(n instanceof me||n instanceof zt))throw new x(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ie.fromString(e,...t));return Kf(r),new zt(n.firestore,null,r)}}function At(n,e,...t){if(n=ne(n),arguments.length===1&&(e=ii.newId()),Lp("doc","path",e),n instanceof ur){let r=ie.fromString(e,...t);return Wf(r),new me(n,null,new M(r))}{if(!(n instanceof me||n instanceof zt))throw new x(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ie.fromString(e,...t));return Wf(r),new me(n.firestore,n instanceof zt?n.converter:null,new M(r))}}var kp="AsyncQueue",Co=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Io(this,"async_queue_retry"),this._c=()=>{let r=Lc();r&&V(kp,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Lc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Lc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new et;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}lc(){return g(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fr(e))throw e;V(kp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}})}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,It("INTERNAL UNHANDLED ERROR: ",Np(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=nl.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&F(47125,{Pc:Np(this.nc)})}verifyOperationInProgress(){}Tc(){return g(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function Np(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),e}function Dp(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var at=class extends ur{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Co,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return g(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Co(e),this._firestoreClient=void 0,yield e}})}};function Zm(n,e){let t=typeof n=="object"?n:Ft(),r=typeof n=="string"?n:e||so,i=sn(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=os("firestore");s&&gT(i,...s)}return i}function zl(n){if(n._terminated)throw new x(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_T(n),n._firestoreClient}function _T(n){var r,i,s;let e=n._freezeSettings(),t=(function(c,l,d,f){return new Wc(c,l,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Ym(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new dl(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){let l=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(l),_online:l}})(n._componentsProvider))}var $t=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(be.fromBase64String(e))}catch(t){throw new x(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(be.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_i(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};$t._jsonSchemaVersion="firestore/bytes/1.0",$t._jsonSchema={type:he("string",$t._jsonSchemaVersion),bytes:he("string")};var lr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ve(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var mi=class{constructor(e){this._methodName=e}};var jt=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(_i(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};jt._jsonSchemaVersion="firestore/geoPoint/1.0",jt._jsonSchema={type:he("string",jt._jsonSchemaVersion),latitude:he("number"),longitude:he("number")};var Gt=class n{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_i(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new n(e.vectorValues);throw new x(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Gt._jsonSchemaVersion="firestore/vectorValue/1.0",Gt._jsonSchema={type:he("string",Gt._jsonSchemaVersion),vectorValues:he("object")};var yT=/^__.*__$/,pl=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ot(e,this.data,this.fieldMask,t,this.fieldTransforms):new En(e,this.data,t,this.fieldTransforms)}},ko=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ot(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function eg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F(40011,{Ac:n})}}var ml=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(G(G({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;let t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;let t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Do(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eg(this.Ac)&&yT.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},gl=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zo(e)}Cc(e,t,r,i=!1){return new ml({Ac:e,methodName:t,Dc:r,path:Ve.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Go(n){let e=n._freezeSettings(),t=zo(n._databaseId);return new gl(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tg(n,e,t,r,i,s={}){let a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);$l("Data must be an object, but it was:",a,r);let c=ng(r,a),l,d;if(s.merge)l=new Me(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){let f=[];for(let m of s.mergeFields){let I=_l(e,m,t);if(!a.contains(I))throw new x(P.INVALID_ARGUMENT,"Field '".concat(I,"' is specified in your field mask but missing from your input data."));ig(f,I)||f.push(I)}l=new Me(f),d=a.fieldTransforms.filter((m=>l.covers(m.field)))}else l=null,d=a.fieldTransforms;return new pl(new xe(c),l,d)}var No=class n extends mi{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function IT(n,e,t,r){let i=n.Cc(1,e,t);$l("Data must be an object, but it was:",i,r);let s=[],a=xe.empty();Jt(r,((l,d)=>{let f=jl(e,l,t);d=ne(d);let m=i.yc(f);if(d instanceof No)s.push(f);else{let I=wi(d,m);I!=null&&(s.push(f),a.set(f,I))}}));let c=new Me(s);return new ko(a,c,i.fieldTransforms)}function wT(n,e,t,r,i,s){let a=n.Cc(1,e,t),c=[_l(e,r,t)],l=[i];if(s.length%2!=0)throw new x(P.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let I=0;I<s.length;I+=2)c.push(_l(e,s[I])),l.push(s[I+1]);let d=[],f=xe.empty();for(let I=c.length-1;I>=0;--I)if(!ig(d,c[I])){let R=c[I],N=l[I];N=ne(N);let O=a.yc(R);if(N instanceof No)d.push(R);else{let C=wi(N,O);C!=null&&(d.push(R),f.set(R,C))}}let m=new Me(d);return new ko(f,m,a.fieldTransforms)}function ET(n,e,t,r=!1){return wi(t,n.Cc(r?4:3,e))}function wi(n,e){if(rg(n=ne(n)))return $l("Unsupported field value:",e,n),ng(n,e);if(n instanceof mi)return(function(r,i){if(!eg(i.Ac))throw i.Sc("".concat(r._methodName,"() can only be used with update() and set()"));if(!i.path)throw i.Sc("".concat(r._methodName,"() is not currently supported inside arrays"));let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let s=[],a=0;for(let c of r){let l=wi(c,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iE(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=de.fromDate(r);return{timestampValue:fo(i.serializer,s)}}if(r instanceof de){let s=new de(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fo(i.serializer,s)}}if(r instanceof jt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $t)return{bytesValue:Sm(i.serializer,r._byteString)};if(r instanceof me){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(s.projectId,"/").concat(s.database));return{referenceValue:Dl(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gt)return(function(a,c){return{mapValue:{fields:{[Sl]:{stringValue:Rl},[Zn]:{arrayValue:{values:a.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Nl(c.serializer,d)}))}}}}}})(r,i);throw i.Sc("Unsupported field value: ".concat(Lo(r)))})(n,e)}function ng(n,e){let t={};return Xp(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jt(n,((r,i)=>{let s=wi(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function rg(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof de||n instanceof jt||n instanceof $t||n instanceof me||n instanceof mi||n instanceof Gt)}function $l(n,e,t){if(!rg(t)||!Mp(t)){let r=Lo(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function _l(n,e,t){if((e=ne(e))instanceof lr)return e._internalPath;if(typeof e=="string")return jl(n,e);throw Do("Field path arguments must be of type string or ",n,!1,void 0,t)}var TT=new RegExp("[~\\*/\\[\\]]");function jl(n,e,t){if(e.search(TT)>=0)throw Do("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),n,!1,void 0,t);try{return new lr(...e.split("."))._internalPath}catch(r){throw Do("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),n,!1,void 0,t)}}function Do(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c="Function ".concat(e,"() called with invalid data");t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new x(P.INVALID_ARGUMENT,c+n+l)}function ig(n,e){return n.some((t=>t.isEqual(e)))}var Oo=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Gl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},yl=class extends Oo{data(){return super.data()}};function Gl(n,e){return typeof e=="string"?jl(n,e):e instanceof lr?e._internalPath:e._delegate._internalPath}function vT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gi=class{},xo=class extends gi{};function Ho(n,e,...t){let r=[];e instanceof gi&&r.push(e),r=r.concat(t),(function(s){let a=s.filter((l=>l instanceof wl)).length,c=s.filter((l=>l instanceof Il)).length;if(a>1||a>0&&c>0)throw new x(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Il=class n extends xo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return sg(e._query,t),new vn(e.firestore,e.converter,ou(e._query,t))}_parse(e){let t=Go(e.firestore);return(function(s,a,c,l,d,f,m){let I;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new x(P.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(f,"' queries on documentId()."));if(f==="in"||f==="not-in"){xp(m,f);let N=[];for(let O of m)N.push(Op(l,s,O));I={arrayValue:{values:N}}}else I=Op(l,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||xp(m,f),I=ET(c,a,m,f==="in"||f==="not-in");return le.create(d,f,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var wl=class n extends gi{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:$e.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i,c=s.getFlattenedFilters();for(let l of c)sg(a,l),a=ou(a,l)})(e._query,t),new vn(e.firestore,e.converter,ou(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var El=class n extends xo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,a){if(i.startAt!==null)throw new x(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new x(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yn(s,a)})(e._query,this._field,this._direction);return new vn(e.firestore,e.converter,(function(i,s){let a=i.explicitOrderBy.concat([s]);return new Wt(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function Wo(n,e="asc"){let t=e,r=Gl("orderBy",n);return El._create(r,t)}function Op(n,e,t){if(typeof(t=ne(t))=="string"){if(t==="")throw new x(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dm(e)&&t.indexOf("/")!==-1)throw new x(P.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(t,"' contains a '/' character."));let r=e.path.child(ie.fromString(t));if(!M.isDocumentKey(r))throw new x(P.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return tp(n,new M(r))}if(t instanceof me)return tp(n,t._key);throw new x(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Lo(t),"."))}function xp(n,e){if(!Array.isArray(n)||n.length===0)throw new x(P.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function sg(n,e){let t=(function(i,s){for(let a of i)for(let c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new x(P.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new x(P.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(t.toString(),"' filters."))}var Tl=class{convertValue(e,t="none"){switch(Ht(e)){case 0:return null;case 1:return e.booleanValue;case 2:return re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Et(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw F(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Jt(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){var r,i,s;let t=(s=(i=(r=e.fields)==null?void 0:r[Zn].arrayValue)==null?void 0:i.values)==null?void 0:s.map((a=>re(a.doubleValue)));return new Gt(t)}convertGeoPoint(e){return new jt(re(e.latitude),re(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Fo(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ai(e));default:return null}}convertTimestamp(e){let t=wt(e);return new de(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ie.fromString(e);Y(Dm(r),9688,{name:e});let i=new oo(r.get(1),r.get(3)),s=new M(r.popFirst(5));return i.isEqual(t)||It("Document ".concat(s," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}};function og(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var pn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},mn=class n extends Oo{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Kn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Gl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new x(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};mn._jsonSchemaVersion="firestore/documentSnapshot/1.0",mn._jsonSchema={type:he("string",mn._jsonSchemaVersion),bundleSource:he("string","DocumentSnapshot"),bundleName:he("string"),bundle:he("string")};var Kn=class extends mn{data(e={}){return super.data(e)}},Qn=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Kn(this._firestore,this._userDataWriter,r.key,r,new pn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((c=>{let l=new Kn(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pn(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{let l=new Kn(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pn(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:AT(c.type),doc:l,oldIndex:d,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new x(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ii.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function AT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F(61501,{type:n})}}function Hl(n){n=Fe(n,me);let e=Fe(n.firestore,at);return mT(zl(e),n._key).then((t=>ag(e,n,t)))}Qn._jsonSchemaVersion="firestore/querySnapshot/1.0",Qn._jsonSchema={type:he("string",Qn._jsonSchemaVersion),bundleSource:he("string","QuerySnapshot"),bundleName:he("string"),bundle:he("string")};var Vo=class extends Tl{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new me(this.firestore,null,t)}};function Wl(n,e,t){n=Fe(n,me);let r=Fe(n.firestore,at),i=og(n.converter,e,t);return Yo(r,[tg(Go(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,rt.none())])}function Ko(n,e,t,...r){n=Fe(n,me);let i=Fe(n.firestore,at),s=Go(i),a;return a=typeof(e=ne(e))=="string"||e instanceof lr?wT(s,"updateDoc",n._key,e,t,r):IT(s,"updateDoc",n._key,e),Yo(i,[a.toMutation(n._key,rt.exists(!0))])}function Qo(n){return Yo(Fe(n.firestore,at),[new ui(n._key,rt.none())])}function Ei(n,e){let t=Fe(n.firestore,at),r=At(n),i=og(n.converter,e);return Yo(t,[tg(Go(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,rt.exists(!1))]).then((()=>r))}function Jo(n,...e){var l,d,f;n=ne(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Dp(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Dp(e[r])){let m=e[r];e[r]=(l=m.next)==null?void 0:l.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let s,a,c;if(n instanceof me)a=Fe(n.firestore,at),c=Uo(n._key.path),s={next:m=>{e[r]&&e[r](ag(a,n,m))},error:e[r+1],complete:e[r+2]};else{let m=Fe(n,vn);a=Fe(m.firestore,at),c=m._query;let I=new Vo(a);s={next:R=>{e[r]&&e[r](new Qn(a,I,m,R))},error:e[r+1],complete:e[r+2]},vT(n._query)}return(function(I,R,N,O){let C=new Ro(O),U=new Ao(R,C,N);return I.asyncQueue.enqueueAndForget((()=>g(null,null,function*(){return zm(yield fl(I),U)}))),()=>{C.Nu(),I.asyncQueue.enqueueAndForget((()=>g(null,null,function*(){return $m(yield fl(I),U)})))}})(zl(a),c,i,s)}function Yo(n,e){return(function(r,i){let s=new et;return r.asyncQueue.enqueueAndForget((()=>g(null,null,function*(){return sT(yield pT(r),i,s)}))),s.promise})(zl(n),e)}function ag(n,e,t){let r=t.docs.get(e._key),i=new Vo(n);return new mn(n,i,e._key,r,new pn(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){hr=i})(Je),Qe(new Ne("firestore",((r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new at(new Bc(r.getProvider("auth-internal")),new $c(a,r.getProvider("app-check-internal")),(function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new x(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(d.options.projectId,f)})(a,i),a);return s=G({useFetchStreams:t},s),c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),De(jf,Gf,e),De(jf,Gf,"esm2020")})();var fg="firebasestorage.googleapis.com",bT="storageBucket",ST=120*1e3,RT=600*1e3;var ct=class n extends Ce{constructor(e,t,r=0){super(Kl(e),"Firebase Storage: ".concat(t," (").concat(Kl(e),")")),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kl(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}},ut;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ut||(ut={}));function Kl(n){return"storage/"+n}function PT(){let n="An unknown error occurred, please check the error payload for server response.";return new ct(ut.UNKNOWN,n)}function CT(){return new ct(ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kT(){return new ct(ut.CANCELED,"User canceled the upload/download.")}function NT(n){return new ct(ut.INVALID_URL,"Invalid URL '"+n+"'.")}function DT(n){return new ct(ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function cg(n){return new ct(ut.INVALID_ARGUMENT,n)}function pg(){return new ct(ut.APP_DELETED,"The Firebase app was deleted.")}function OT(n){return new ct(ut.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var bt=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch(i){return new n(e,"")}if(r.path==="")return r;throw DT(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}let a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function d(W){W.path_=decodeURIComponent(W.path)}let f="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",R=new RegExp("^https?://".concat(m,"/").concat(f,"/b/").concat(i,"/o").concat(I),"i"),N={bucket:1,path:3},O=t===fg?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",U=new RegExp("^https?://".concat(O,"/").concat(i,"/").concat(C),"i"),z=[{regex:c,indices:l,postModify:s},{regex:R,indices:N,postModify:d},{regex:U,indices:{bucket:1,path:2},postModify:d}];for(let W=0;W<z.length;W++){let te=z[W],X=te.regex.exec(e);if(X){let E=X[te.indices.bucket],_=X[te.indices.path];_||(_=""),r=new n(E,_),te.postModify(r);break}}if(r==null)throw NT(e);return r}},Ql=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function xT(n,e,t){let r=1,i=null,s=null,a=!1,c=0;function l(){return c===2}let d=!1;function f(...C){d||(d=!0,e.apply(null,C))}function m(C){i=setTimeout(()=>{i=null,n(R,l())},C)}function I(){s&&clearTimeout(s)}function R(C,...U){if(d){I();return}if(C){I(),f.call(null,C,...U);return}if(l()||a){I(),f.call(null,C,...U);return}r<64&&(r*=2);let z;c===1?(c=2,z=0):z=(r+Math.random())*1e3,m(z)}let N=!1;function O(C){N||(N=!0,I(),!d&&(i!==null?(C||(c=2),clearTimeout(i),m(0)):C||(c=1)))}return m(0),s=setTimeout(()=>{a=!0,O(!0)},t),O}function VT(n){n(!1)}function LT(n){return n!==void 0}function ug(n,e,t,r){if(r<e)throw cg("Invalid value for '".concat(n,"'. Expected ").concat(e," or greater."));if(r>t)throw cg("Invalid value for '".concat(n,"'. Expected ").concat(t," or less."))}function MT(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Xo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Xo||(Xo={}));function FT(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var Jl=class{constructor(e,t,r,i,s,a,c,l,d,f,m,I=!0,R=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=l,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=I,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,O)=>{this.resolve_=N,this.reject_=O,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new mr(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let a=c=>{let l=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,d)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;let c=s.getErrorCode()===Xo.NO_ERROR,l=s.getStatus();if(!c||FT(l,this.additionalRetryCodes_)&&this.retry){let f=s.getErrorCode()===Xo.ABORT;r(!1,new mr(!1,null,f));return}let d=this.successCodes_.indexOf(l)!==-1;r(!0,new mr(d,s))})},t=(r,i)=>{let s=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());LT(l)?s(l):s()}catch(l){a(l)}else if(c!==null){let l=PT();l.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,l)):a(l)}else if(i.canceled){let l=this.appDelete_?pg():kT();a(l)}else{let l=CT();a(l)}};this.canceled_?t(!1,new mr(!1,null,!0)):this.backoffId_=xT(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VT(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},mr=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function UT(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function BT(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function qT(n,e){e&&(n["X-Firebase-GMPID"]=e)}function zT(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function $T(n,e,t,r,i,s,a=!0,c=!1){let l=MT(n.urlParams),d=n.url+l,f=Object.assign({},n.headers);return qT(f,e),UT(f,t),BT(f,s),zT(f,r),new Jl(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,c)}function jT(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function GT(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var qb=256*1024;var Yl=class n{constructor(e,t){this._service=e,t instanceof bt?this._location=t:this._location=bt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new bt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GT(this._location.path)}get storage(){return this._service}get parent(){let e=jT(this._location.path);if(e===null)return null;let t=new bt(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw OT(e)}};function lg(n,e){let t=e==null?void 0:e[bT];return t==null?null:bt.makeFromBucketSpec(t,n)}function HT(n,e,t,r={}){n.host="".concat(e,":").concat(t);let i=He(e);i&&(Dn("https://".concat(n.host,"/b")),On("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:as(s,n.app.options.projectId))}var Xl=class{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=fg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ST,this._maxUploadRetryTime=RT,this._requests=new Set,i!=null?this._bucket=bt.makeFromBucketSpec(i,this._host):this._bucket=lg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bt.makeFromBucketSpec(this._url,e):this._bucket=lg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ug("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ug("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return g(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return g(this,null,function*(){if(Te(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yl(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Ql(pg());{let a=$T(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){return g(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},hg="@firebase/storage",dg="0.14.0";var mg="storage";function gg(n=Ft(),e){n=ne(n);let r=sn(n,mg).getImmediate({identifier:e}),i=os("storage");return i&&WT(r,...i),r}function WT(n,e,t,r={}){HT(n,e,t,r)}function KT(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Xl(t,r,i,e,Je)}function QT(){Qe(new Ne(mg,KT,"PUBLIC").setMultipleInstances(!0)),De(hg,dg,""),De(hg,dg,"esm2020")}QT();var JT={apiKey:"AIzaSyBJDPg-KcDOrQN8VAGM0B7GEg2MgstGZKA",authDomain:"madrasati-9fd0b.firebaseapp.com",projectId:"madrasati-9fd0b",storageBucket:"madrasati-9fd0b.firebasestorage.app",messagingSenderId:"351776192308",appId:"1:351776192308:web:74985a6c9f1f8d4a339761",measurementId:"G-5V737P3M2L"},Zo="btecmaad@gmail.com",Zl="vsbwILaUtvdf6OIo3aM3zi89lbO2",eh=Md().length?Ft():Ka(JT),lt=bc(eh),Ue=Zm(eh),eS=gg(eh);var _g=document.getElementById("adminLoginForm"),Pi=document.getElementById("adminEmail"),Ci=document.getElementById("adminPassword"),yg=document.getElementById("adminLogout"),Ig=document.getElementById("addPostBtn"),ki=document.getElementById("postTitle"),Be=document.getElementById("postImage"),Sn=document.getElementById("selectedImages"),Rn=document.getElementById("adminPosts"),rS=document.getElementById("adminLoginCard"),wg=document.getElementById("adminPanelCard"),Pn=document.getElementById("adminStatus"),Ni=document.getElementById("galleryHeading"),Di=document.getElementById("galleryIntro"),Eg=document.getElementById("saveHeroBtn"),Ti=document.getElementById("postGroupTitle"),vi=document.getElementById("postGroupIntro"),Se=document.getElementById("slotGrid"),Tg=document.getElementById("saveSlotsBtn"),ea=document.getElementById("slotsStatus"),Ai=document.getElementById("slotGroupTitle"),bi=document.getElementById("slotGroupIntro"),rh=document.querySelectorAll("[data-admin-tab]"),Sg=document.querySelectorAll(".tab-panel"),Oi=document.getElementById("videoTitle"),xi=document.getElementById("videoDescription"),Vi=document.getElementById("videoUrl"),Li=document.getElementById("videoFile"),Mi=document.getElementById("videoThumb"),Fi=document.getElementById("videoPublish"),vg=document.getElementById("saveVideoBtn"),ta=document.getElementById("videoStatus"),Yt=document.getElementById("adminVideos"),na=11,St=Array.from({length:na},()=>({image:"",title:"",caption:""})),Si=null,Ri=null,YT="btecmaad@gmail.com",XT="123456789102008",th={},gr={get(n){try{return localStorage.getItem(n)}catch(e){return th[n]||null}},set(n,e){try{localStorage.setItem(n,e)}catch(t){th[n]=e}},remove(n){try{localStorage.removeItem(n)}catch(e){delete th[n]}}};function ZT(){Pi&&(Pi.value=""),Ci&&(Ci.value="")}var ev="https://api.cloudinary.com/v1_1/dzrwjhqzu/image/upload",tv="gallery_app",nv="app_gallery",rv="https://api.cloudinary.com/v1_1/dzrwjhqzu/video/upload",iv="app_videos",sv="app_videos";function ae(n,e=!1){Pn&&(Pn.textContent=n||"",Pn.className=e?"status error":"status",n&&Pn.classList.add("show"))}function nh(n,e=!1){ea&&(ea.textContent=n||"",ea.className=e?"status error":"status",n&&ea.classList.add("show"))}function Rt(n,e=!1){ta&&(ta.textContent=n||"",ta.className=e?"status error":"status",n&&ta.classList.add("show"))}function ov(n){return g(this,null,function*(){var r,i,s;n==null||n.preventDefault();let e=(r=Pi==null?void 0:Pi.value)==null?void 0:r.trim(),t=(Ci==null?void 0:Ci.value)||"";if(!e||!t){ae("\u0623\u062F\u062E\u0644 \u0627\u0644\u0628\u0631\u064A\u062F \u0648\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",!0);return}try{let a=yield $s(lt,e,t);(((i=a==null?void 0:a.user)==null?void 0:i.email)||"").toLowerCase()===Zo.toLowerCase()||((s=a==null?void 0:a.user)==null?void 0:s.uid)===Zl||(yield Bn(lt),ae("\u0647\u0630\u0627 \u0627\u0644\u062D\u0633\u0627\u0628 \u0644\u064A\u0633 \u0645\u062E\u0648\u0644\u0627\u064B \u0643\u0623\u062F\u0645\u0646",!0))}catch(a){if((a==null?void 0:a.code)==="auth/user-not-found"&&e.toLowerCase()===Zo.toLowerCase())try{yield zs(lt,e,t),ae("\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u062D\u0633\u0627\u0628 \u0627\u0644\u0623\u062F\u0645\u0646\u060C \u0623\u0639\u062F \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629");return}catch(c){console.error(c),ae("\u062A\u0639\u0630\u0631 \u0625\u0646\u0634\u0627\u0621 \u062D\u0633\u0627\u0628 \u0627\u0644\u0623\u062F\u0645\u0646",!0);return}if(e.toLowerCase()===YT.toLowerCase()&&t===XT){gr.set("fakeAdmin","true"),Cg(!0),ae("");return}console.error(a),ae((a==null?void 0:a.message)||"\u062A\u0639\u0630\u0631 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",!0)}})}function av(){return g(this,null,function*(){try{yield Bn(lt),Pg(),ZT(),ae("\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C")}catch(n){console.error(n),ae("\u062A\u0639\u0630\u0631 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C",!0)}gr.remove("fakeAdmin")})}function cv(){return g(this,null,function*(){var s,a,c,l;let n=((s=ki==null?void 0:ki.value)==null?void 0:s.trim())||"",e=((a=Ti==null?void 0:Ti.value)==null?void 0:a.trim())||n||"\u0645\u0639\u0631\u0636 \u062C\u062F\u064A\u062F",t=((c=vi==null?void 0:vi.value)==null?void 0:c.trim())||"",r=Be!=null&&Be.files?Array.from(Be.files):[];if(!r.length){ae("\u0627\u062E\u062A\u0631 \u0635\u0648\u0631\u0629 \u0648\u0627\u062D\u062F\u0629 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644",!0);return}if(!e){ae("\u0623\u062F\u062E\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0639\u0631\u0636",!0);return}let i=Array.from(document.querySelectorAll(".image-caption")).map(d=>d.value.trim());ae("...\u062C\u0627\u0631\u064A \u0627\u0644\u0631\u0641\u0639");try{let d=[];for(let[m,I]of r.entries()){let R=yield ih(I);d.push({url:R,caption:i[m]||""})}let f="post-".concat(Date.now());yield Ei(bn(Ue,"gallery"),{title:n||"\u0645\u0646\u0634\u0648\u0631 \u0628\u062F\u0648\u0646 \u0639\u0646\u0648\u0627\u0646",images:d,createdAt:Date.now(),createdBy:((l=lt.currentUser)==null?void 0:l.email)||"",groupId:f,groupTitle:e,groupIntro:t}),Pg(),Ti&&(Ti.value=""),vi&&(vi.value=""),ae("\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u0634\u0648\u0631 \u0645\u0639 \u0627\u0644\u0635\u0648\u0631")}catch(d){console.error(d),ae("\u062A\u0639\u0630\u0631 \u0631\u0641\u0639 \u0627\u0644\u0645\u0646\u0634\u0648\u0631",!0)}})}function uv(){return g(this,null,function*(){var t,r;let n=((t=Ni==null?void 0:Ni.value)==null?void 0:t.trim())||"\u0645\u0639\u0631\u0636 \u0627\u0644\u0625\u0646\u062C\u0627\u0632\u0627\u062A",e=((r=Di==null?void 0:Di.value)==null?void 0:r.trim())||"";ae("...\u062D\u0641\u0638 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0648\u0627\u0644\u0648\u0635\u0641");try{yield Wl(At(Ue,"config","gallery"),{heading:n,intro:e},{merge:!0}),ae("\u062A\u0645 \u062D\u0641\u0638 \u0627\u0644\u0639\u0646\u0648\u0627\u0646/\u0627\u0644\u0648\u0635\u0641")}catch(i){console.error(i),ae("\u062A\u0639\u0630\u0631 \u062D\u0641\u0638 \u0627\u0644\u0639\u0646\u0648\u0627\u0646/\u0627\u0644\u0648\u0635\u0641",!0)}})}function lv(){return g(this,null,function*(){try{let n=yield Hl(At(Ue,"config","gallery"));if(n.exists()){let e=n.data();Ni&&e.heading&&(Ni.value=e.heading),Di&&e.intro&&(Di.value=e.intro)}}catch(n){console.error(n)}})}function Rg(){if(Se){Se.innerHTML="";for(let n=0;n<na;n++){let e="\u0631\u0641\u0639 \u0635\u0648\u0631\u0629 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 ".concat(n+1),t=document.createElement("div");t.className="slot-card",t.innerHTML='\n            <div class="slot-preview" data-slot-preview="'.concat(n,'">\u0635\u0648\u0631\u0629 ').concat(n+1,'</div>\n            <input type="file" accept="image/*" data-slot-file="').concat(n,'" aria-label="').concat(e,'" title="').concat(e,'">\n            <input type="text" placeholder="\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0628\u0637\u0627\u0642\u0629" data-slot-title="').concat(n,'" aria-label="\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 ').concat(n+1,'">\n            <textarea rows="2" placeholder="\u0648\u0635\u0641 \u0645\u062E\u062A\u0635\u0631" data-slot-caption="').concat(n,'" aria-label="\u0648\u0635\u0641 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 ').concat(n+1,'"></textarea>\n        '),Se.appendChild(t)}}}function hv(){Se&&St.forEach((n,e)=>{let t=Se.querySelector('[data-slot-preview="'.concat(e,'"]')),r=Se.querySelector('[data-slot-title="'.concat(e,'"]')),i=Se.querySelector('[data-slot-caption="'.concat(e,'"]'));t&&n.image&&(t.style.backgroundImage="url('".concat(n.image,"')"),t.textContent=""),r&&(r.value=n.title||""),i&&(i.value=n.caption||"")})}function Ag(n){var t;if(!Se)return;let e=n.target;if(e.matches("[data-slot-file]")){let r=Number(e.dataset.slotFile),i=(t=e.files)==null?void 0:t[0];if(i){let s=URL.createObjectURL(i);St[r]=Ee(G({},St[r]),{image:s});let a=Se.querySelector('[data-slot-preview="'.concat(r,'"]'));a&&(a.style.backgroundImage="url('".concat(s,"')"),a.textContent="")}return}if(e.matches("[data-slot-title]")){let r=Number(e.dataset.slotTitle);St[r]=Ee(G({},St[r]),{title:e.value});return}if(e.matches("[data-slot-caption]")){let r=Number(e.dataset.slotCaption);St[r]=Ee(G({},St[r]),{caption:e.value});return}}function dv(){return g(this,null,function*(){var n,e,t,r,i,s,a;if(Se){nh("...\u062C\u0627\u0631\u064A \u0627\u0644\u0646\u0634\u0631");try{let c="batch-".concat(Date.now()),l=((n=Ai==null?void 0:Ai.value)==null?void 0:n.trim())||"\u0645\u0639\u0631\u0636 \u062C\u062F\u064A\u062F",d=((e=bi==null?void 0:bi.value)==null?void 0:e.trim())||"";for(let f=0;f<na;f++){let m=Se.querySelector('[data-slot-title="'.concat(f,'"]')),I=Se.querySelector('[data-slot-caption="'.concat(f,'"]')),R=Se.querySelector('[data-slot-file="'.concat(f,'"]')),N=((t=St[f])==null?void 0:t.image)||"";(r=R==null?void 0:R.files)!=null&&r.length&&(N=yield ih(R.files[0]));let O=((i=m==null?void 0:m.value)==null?void 0:i.trim())||"",C=((s=I==null?void 0:I.value)==null?void 0:s.trim())||"";N&&(yield Ei(bn(Ue,"gallery"),{title:O||"\u0645\u0646\u0634\u0648\u0631 \u0628\u062F\u0648\u0646 \u0639\u0646\u0648\u0627\u0646",images:[{url:N,caption:C}],createdAt:Date.now(),createdBy:((a=lt.currentUser)==null?void 0:a.email)||"",groupId:c,groupTitle:l,groupIntro:d}))}St=Array.from({length:na},()=>({image:"",title:"",caption:""})),Rg(),Ai&&(Ai.value=""),bi&&(bi.value=""),nh("\u062A\u0645 \u0646\u0634\u0631 \u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A")}catch(c){console.error(c),nh("\u062A\u0639\u0630\u0631 \u062D\u0641\u0638 \u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062A",!0)}}})}function fv(n){return g(this,null,function*(){try{yield Qo(At(Ue,"gallery",n))}catch(e){console.error(e),ae("\u062A\u0639\u0630\u0631 \u062D\u0630\u0641 \u0627\u0644\u0645\u0646\u0634\u0648\u0631",!0)}})}function pv(n,e){return g(this,null,function*(){let t=e.title||"\u0645\u0646\u0634\u0648\u0631 \u0628\u062F\u0648\u0646 \u0639\u0646\u0648\u0627\u0646",r=prompt("\u062A\u0639\u062F\u064A\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0646\u0634\u0648\u0631",t);if(r===null)return;let i=Array.isArray(e.images)?e.images:e.image?[{url:e.image,caption:e.caption||""}]:[],s=[];for(let[a,c]of i.entries()){let l=prompt("\u0648\u0635\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u0631\u0642\u0645 ".concat(a+1),c.caption||"");s.push({url:c.url||c,caption:l===null?c.caption||"":l})}try{yield Ko(At(Ue,"gallery",n),{title:r.trim()||t,images:s}),ae("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0646\u0634\u0648\u0631")}catch(a){console.error(a),ae("\u062A\u0639\u0630\u0631 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0646\u0634\u0648\u0631",!0)}})}function mv(n){return g(this,null,function*(){let e=new FormData;e.append("file",n),e.append("upload_preset",iv),e.append("folder",sv);let t=yield fetch(rv,{method:"POST",body:e});if(!t.ok)throw new Error("video-upload-failed");let r=yield t.json();if(!r.secure_url)throw new Error("no-video-url");return r.secure_url})}function gv(){Oi&&(Oi.value=""),xi&&(xi.value=""),Vi&&(Vi.value=""),Li&&(Li.value=""),Mi&&(Mi.value=""),Fi&&(Fi.value="published")}function _v(){return g(this,null,function*(){var a,c,l,d,f,m;let n=((a=Oi==null?void 0:Oi.value)==null?void 0:a.trim())||"",e=((c=xi==null?void 0:xi.value)==null?void 0:c.trim())||"",t=((l=Vi==null?void 0:Vi.value)==null?void 0:l.trim())||"",r=(d=Li==null?void 0:Li.files)==null?void 0:d[0],i=(f=Mi==null?void 0:Mi.files)==null?void 0:f[0],s=((Fi==null?void 0:Fi.value)||"published")==="published";if(!n){Rt("\u0623\u062F\u062E\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0641\u064A\u062F\u064A\u0648",!0);return}if(!t&&!r){Rt("\u0623\u0636\u0641 \u0631\u0627\u0628\u0637\u0627\u064B \u0623\u0648 \u0627\u0631\u0641\u0639 \u0645\u0644\u0641 \u0641\u064A\u062F\u064A\u0648",!0);return}Rt("...\u062C\u0627\u0631\u064A \u062D\u0641\u0638 \u0627\u0644\u0641\u064A\u062F\u064A\u0648");try{let I=t,R="link";r&&(I=yield mv(r),R="upload");let N="";i&&(N=yield ih(i)),yield Ei(bn(Ue,"videos"),{title:n,description:e,videoUrl:I,thumbnailUrl:N,published:s,source:R,createdAt:Date.now(),createdBy:((m=lt.currentUser)==null?void 0:m.email)||""}),gv(),Rt("\u062A\u0645 \u062D\u0641\u0638 \u0627\u0644\u0641\u064A\u062F\u064A\u0648")}catch(I){console.error(I),Rt("\u062A\u0639\u0630\u0631 \u062D\u0641\u0638 \u0627\u0644\u0641\u064A\u062F\u064A\u0648",!0)}})}function yv(n){return g(this,null,function*(){if(confirm("\u062A\u0623\u0643\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0641\u064A\u062F\u064A\u0648\u061F"))try{yield Qo(At(Ue,"videos",n))}catch(e){console.error(e),Rt("\u062A\u0639\u0630\u0631 \u062D\u0630\u0641 \u0627\u0644\u0641\u064A\u062F\u064A\u0648",!0)}})}function Iv(n,e){return g(this,null,function*(){var c;let t=prompt("\u062A\u0639\u062F\u064A\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0641\u064A\u062F\u064A\u0648",e.title||"\u0641\u064A\u062F\u064A\u0648 \u0628\u062F\u0648\u0646 \u0639\u0646\u0648\u0627\u0646");if(t===null)return;let r=prompt("\u0648\u0635\u0641 \u0627\u0644\u0641\u064A\u062F\u064A\u0648",e.description||"");if(r===null)return;let i=prompt("\u0631\u0627\u0628\u0637 \u0627\u0644\u0641\u064A\u062F\u064A\u0648 (\u0627\u062A\u0631\u0643\u0647 \u0643\u0645\u0627 \u0647\u0648 \u0644\u0644\u0645\u0644\u0641 \u0627\u0644\u0645\u0631\u0641\u0648\u0639)",e.videoUrl||"");if(i===null)return;let s=prompt("\u062D\u0627\u0644\u0629 \u0627\u0644\u0646\u0634\u0631 (\u0645\u0646\u0634\u0648\u0631/\u0645\u0633\u0648\u062F\u0629)",e.published===!1?"\u0645\u0633\u0648\u062F\u0629":"\u0645\u0646\u0634\u0648\u0631"),a=(((c=s==null?void 0:s.trim())==null?void 0:c.toLowerCase())||"\u0645\u0646\u0634\u0648\u0631")!=="\u0645\u0633\u0648\u062F\u0629";try{yield Ko(At(Ue,"videos",n),{title:t.trim()||e.title||"\u0641\u064A\u062F\u064A\u0648 \u0628\u062F\u0648\u0646 \u0639\u0646\u0648\u0627\u0646",description:r.trim(),videoUrl:i.trim()||e.videoUrl,published:a}),Rt("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0641\u064A\u062F\u064A\u0648")}catch(l){console.error(l),Rt("\u062A\u0639\u0630\u0631 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0641\u064A\u062F\u064A\u0648",!0)}})}function wv(n){if(Yt){if(Yt.innerHTML="",n.empty){let e=document.createElement("p");e.className="eyebrow",e.textContent="\u0644\u0627 \u064A\u0648\u062C\u062F \u0641\u064A\u062F\u064A\u0648\u0647\u0627\u062A \u0628\u0639\u062F.",Yt.appendChild(e);return}n.forEach(e=>{let t=e.data(),r=t.createdAt?new Date(t.createdAt).toLocaleString():"",i=t.published!==!1,s=document.createElement("article");s.className="video-admin-card",s.innerHTML='\n            <div class="video-admin-head">\n                <div>\n                    <p class="eyebrow">'.concat(r,"</p>\n                    <h3>").concat(t.title||"\u0641\u064A\u062F\u064A\u0648 \u0628\u062F\u0648\u0646 \u0639\u0646\u0648\u0627\u0646",'</h3>\n                    <div class="video-admin-meta">\n                        <span class="pill ').concat(i?"published":"draft",'">').concat(i?"\u0645\u0646\u0634\u0648\u0631":"\u0645\u0633\u0648\u062F\u0629",'</span>\n                        <span class="pill">').concat(t.source==="upload"?"\u0645\u0644\u0641 \u0645\u0631\u0641\u0648\u0639":"\u0631\u0627\u0628\u0637 \u062E\u0627\u0631\u062C\u064A",'</span>\n                    </div>\n                </div>\n                <div class="admin-actions">\n                    <button data-action="edit-video" data-id="').concat(e.id,'">\u062A\u0639\u062F\u064A\u0644</button>\n                    <button class="danger" data-action="delete-video" data-id="').concat(e.id,'">\u062D\u0630\u0641</button>\n                </div>\n            </div>\n            ').concat(t.description?"<p>".concat(t.description,"</p>"):"","\n            ").concat(t.videoUrl?'<p class="eyebrow" style="word-break: break-all;">'.concat(t.videoUrl,"</p>"):"","\n        "),Yt.appendChild(s)}),Yt.querySelectorAll('button[data-action="delete-video"]').forEach(e=>{e.addEventListener("click",()=>yv(e.dataset.id))}),Yt.querySelectorAll('button[data-action="edit-video"]').forEach(e=>{e.addEventListener("click",()=>{let t=n.docs.find(r=>r.id===e.dataset.id);t&&Iv(e.dataset.id,t.data())})})}}function Ev(n){Rn&&(Rn.innerHTML="",n.forEach(e=>{let t=e.data(),r=t.createdAt?new Date(t.createdAt).toLocaleString():"",i=Array.isArray(t.images)?t.images:t.image?[{url:t.image,caption:t.caption||""}]:[],s=document.createElement("article");s.className="admin-post",s.innerHTML='\n            <div class="post-head">\n                <div>\n                    <p class="eyebrow">'.concat(r,"</p>\n                    <h3>").concat(t.title||"\u0645\u0646\u0634\u0648\u0631 \u0628\u062F\u0648\u0646 \u0639\u0646\u0648\u0627\u0646",'</h3>\n                </div>\n                <div class="admin-actions">\n                    <button data-action="edit" data-id="').concat(e.id,'">\u062A\u0639\u062F\u064A\u0644</button>\n                    <button class="danger" data-action="delete" data-id="').concat(e.id,'">\u062D\u0630\u0641</button>\n                </div>\n            </div>\n            <div class="post-body">\n                ').concat(i.length?'\n                    <div class="post-gallery">\n                        '.concat(i.map(a=>'\n                            <figure>\n                                <img src="'.concat(a.url||a,'" alt="').concat(t.title||"",'">\n                                <figcaption>').concat(a.caption||"","</figcaption>\n                            </figure>\n                        ")).join(""),"\n                    </div>\n                "):"","\n            </div>\n        "),Rn.appendChild(s)}),Rn.querySelectorAll('button[data-action="delete"]').forEach(e=>{e.addEventListener("click",()=>fv(e.dataset.id))}),Rn.querySelectorAll('button[data-action="edit"]').forEach(e=>{e.addEventListener("click",()=>{let t=n.docs.find(r=>r.id===e.dataset.id);t&&pv(e.dataset.id,t.data())})}))}function Tv(){let n=Ho(bn(Ue,"gallery"),Wo("createdAt","desc"));return Jo(n,Ev,e=>{console.error(e),ae("\u062A\u0639\u0630\u0631 \u062C\u0644\u0628 \u0627\u0644\u0645\u0646\u0634\u0648\u0631\u0627\u062A",!0)})}function vv(){let n=Ho(bn(Ue,"videos"),Wo("createdAt","desc"));return Jo(n,wv,e=>{console.error(e),Rt("\u062A\u0639\u0630\u0631 \u062C\u0644\u0628 \u0627\u0644\u0641\u064A\u062F\u064A\u0648\u0647\u0627\u062A",!0)})}function Av(){var n;if(!Sn||!((n=Be==null?void 0:Be.files)!=null&&n.length)){Sn&&(Sn.innerHTML="");return}Sn.innerHTML="",Array.from(Be.files).forEach((e,t)=>{let r=document.createElement("div");r.className="image-row",r.innerHTML='\n            <div class="file-name">'.concat(e.name,'</div>\n            <input type="text" class="image-caption" data-idx="').concat(t,'" placeholder="\u0648\u0635\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)">\n        '),Sn.appendChild(r)})}function Pg(){ki&&(ki.value=""),Be&&(Be.value=""),Sn&&(Sn.innerHTML="")}function Cg(n){wg&&(wg.style.display=n?"grid":"none")}function bg(n){n&&(rh.forEach(e=>{e.classList.toggle("active",e.dataset.adminTab===n)}),Sg.forEach(e=>{e.classList.toggle("active",e.id===n)}),gr.set("adminTab",n))}function bv(){if(!rh.length||!Sg.length)return;let n=gr.get("adminTab"),e=n&&document.getElementById(n)?n:"galleryTab";bg(e),rh.forEach(t=>{t.addEventListener("click",()=>bg(t.dataset.adminTab))})}function Sv(){_g&&_g.addEventListener("submit",ov),yg&&yg.addEventListener("click",av),Ig&&Ig.addEventListener("click",cv),Be&&Be.addEventListener("change",Av),Eg&&Eg.addEventListener("click",uv),Tg&&Tg.addEventListener("click",dv),Se&&(Se.addEventListener("change",Ag),Se.addEventListener("input",Ag)),vg&&vg.addEventListener("click",_v),bv(),js(lt,n=>{var r;let e=gr.get("fakeAdmin")==="true",t=!!n&&(((r=n.email)==null?void 0:r.toLowerCase())===Zo.toLowerCase()||n.uid===Zl)||e;Cg(t),t?(ae(""),lv(),Rg(),hv(),Si=Si||Tv(),Ri=Ri||vv()):(n&&!t&&Bn(lt),gr.remove("fakeAdmin"),Si&&Si(),Ri&&Ri(),Si=null,Ri=null,Rn&&(Rn.innerHTML=""),Yt&&(Yt.innerHTML=""),Pn&&(Pn.innerHTML='<a href="admin-login.html" class="status-link">\u0627\u0644\u0631\u062C\u0627\u0621 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0645\u0646 \u0635\u0641\u062D\u0629 \u0627\u0644\u0623\u062F\u0645\u0646</a>',Pn.className="status error show"))})}document.addEventListener("DOMContentLoaded",Sv);function ih(n){return g(this,null,function*(){let e=new FormData;e.append("file",n),e.append("upload_preset",tv),e.append("folder",nv);let t=yield fetch(ev,{method:"POST",body:e});if(!t.ok)throw new Error("upload-failed");let r=yield t.json();if(!r.secure_url)throw new Error("no-url");return r.secure_url})}})();
/*! Bundled license information:

@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/logger/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/component/dist/esm/index.esm.js:
@firebase/app/dist/esm/index.esm.js:
@firebase/app/dist/esm/index.esm.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
firebase/app/dist/esm/index.esm.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/firestore/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/webchannel-wrapper/dist/bloom-blob/esm/bloom_blob_es2018.js:
@firebase/webchannel-wrapper/dist/webchannel-blob/esm/webchannel_blob_es2018.js:
  (** @license
  Copyright The Closure Library Authors.
  SPDX-License-Identifier: Apache-2.0
  *)
  (** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  *)

@firebase/firestore/dist/index.esm.js:
  (**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law | agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
